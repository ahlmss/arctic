dev36 run-test-pre: PYTHONHASHSEED='3877000795'
dev36 run-test: commands[0] | python -c 'print((80*"~")+"\ntestenv:dev-python3.6\n"+(80*"~"))'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
testenv:dev-python3.6
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
dev36 run-test: commands[1] | python setup.py test
running test
WARNING: Testing via this command is deprecated and will be removed in a future version. Users looking for a generic test entry point independent of test runner are encouraged to use tox.
running egg_info
writing arctic.egg-info/PKG-INFO
writing dependency_links to arctic.egg-info/dependency_links.txt
writing entry points to arctic.egg-info/entry_points.txt
writing requirements to arctic.egg-info/requires.txt
writing top-level names to arctic.egg-info/top_level.txt
writing manifest file 'arctic.egg-info/SOURCES.txt'
running build_ext
============================= test session starts ==============================
platform linux -- Python 3.6.12, pytest-6.2.1, py-1.10.0, pluggy-0.13.1
cachedir: .tox/dev36/.pytest_cache
rootdir: /home/cwm/git/bb.FLXSA/quant/arctic_878
plugins: shutil-1.7.0, forked-1.3.0, cov-2.10.1, server-fixtures-1.7.0, timeout-1.4.2, xdist-1.26.1
collected 1339 items

tests/integration/test_arctic.py .2021-01-15 22:39:06,366 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:09,890 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:14,169 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:18,473 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:24,525 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 22:39:34,791 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:39,257 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:39:43,554 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
....2021-01-15 22:39:56,411 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:00,635 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
..2021-01-15 22:40:09,846 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:15,754 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:20,855 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:25,772 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:30,947 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:40:35,263 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                   [  1%]
tests/integration/test_arctic_multithreading.py .2021-01-15 22:41:01,127 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:41:23,296 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                       [  1%]
tests/integration/test_async_arctic.py .                                 [  1%]
tests/integration/test_compress_integration.py ..........                [  2%]
tests/integration/test_concurrent_append.py .2021-01-15 22:48:46,129 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                            [  2%]
tests/integration/test_decorators.py .2021-01-15 22:48:50,458 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                                   [  2%]
tests/integration/test_howtos.py .2021-01-15 22:48:54,767 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:00,135 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                                      [  2%]
tests/integration/chunkstore/test_chunkstore.py .2021-01-15 22:49:05,592 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:10,134 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:14,441 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:18,859 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:23,179 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:27,660 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:32,041 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:36,319 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:40,605 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:44,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:49,283 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:53,599 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:49:57,913 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:02,319 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:06,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:11,004 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:15,922 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:20,435 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:24,852 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:29,151 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:33,415 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:37,657 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:42,022 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:46,469 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [  4%]
.2021-01-15 22:50:51,038 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:55,472 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:50:59,687 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:51:04,209 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:51:08,523 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:51:12,828 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:51:17,104 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:51:21,601 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:00,679 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:20,262 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:24,632 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:29,349 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:33,559 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:38,098 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:42,564 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:47,041 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:51,436 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:52:55,885 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
....2021-01-15 22:53:12,809 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:18,190 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:22,521 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:26,834 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:31,110 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:35,323 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:39,605 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:43,990 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:48,338 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:52,712 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:53:57,155 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
..2021-01-15 22:54:06,346 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:54:10,619 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:54:14,869 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:54:19,233 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:54:32,943 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:54:59,091 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:55:21,526 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:55:47,895 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:56:03,744 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:56:07,972 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:56:12,769 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
..2021-01-15 22:56:21,353 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:56:42,974 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:06,041 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:10,963 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:15,438 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:19,665 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:23,981 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:28,240 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:32,444 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:36,560 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:41,830 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:45,974 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:50,443 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:54,629 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:57:58,857 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:03,724 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:08,549 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:12,951 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
          [  9%]
tests/integration/chunkstore/test_fixes.py .2021-01-15 22:58:17,251 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:25,158 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:30,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:34,655 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:39,972 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:44,527 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:48,769 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:58:52,950 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                      [  9%]
tests/integration/chunkstore/test_utils.py .2021-01-15 22:58:57,205 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                             [ 10%]
tests/integration/chunkstore/tools/test_tools.py .2021-01-15 22:59:08,631 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                       [ 10%]
tests/integration/fixtures/test_arctic.py .2021-01-15 22:59:12,178 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:16,413 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:20,232 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                            [ 10%]
tests/integration/scripts/test_arctic_fsck.py .2021-01-15 22:59:24,731 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:29,228 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:33,728 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:38,241 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:42,716 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 22:59:47,205 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F2021-01-15 22:59:56,240 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF2021-01-15 23:00:05,367 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF2021-01-15 23:00:14,817 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 23:00:19,543 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:24,056 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:28,807 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:33,370 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:37,976 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:42,553 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:47,016 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:51,516 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:00:55,991 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:00,642 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:05,198 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:09,837 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:14,379 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:19,091 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 12%]
.2021-01-15 23:01:23,573 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:28,080 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:32,562 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:37,028 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:41,546 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:46,081 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:50,637 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:55,111 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:01:59,617 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:03,951 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:08,697 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:13,275 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:17,840 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:22,521 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:27,238 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:31,923 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:36,444 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:40,946 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:45,438 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:49,993 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:54,574 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:02:59,411 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F2021-01-15 23:03:08,353 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF2021-01-15 23:03:17,545 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF2021-01-15 23:03:26,893 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 23:03:31,538 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:36,186 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:40,662 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:45,280 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:49,993 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:54,635 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:03:59,132 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:03,644 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:08,134 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:12,705 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:17,261 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:21,838 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:26,338 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:30,856 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:35,363 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:40,096 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:44,674 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:49,309 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:53,779 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:04:58,269 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:02,555 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:07,178 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:11,761 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:16,325 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                     [ 16%]
tests/integration/scripts/test_copy_data.py .2021-01-15 23:05:21,671 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:27,349 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:32,757 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:38,174 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:43,109 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                        [ 16%]
tests/integration/scripts/test_delete_library.py .2021-01-15 23:05:48,399 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:53,681 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:05:58,956 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:04,437 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:09,427 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                   [ 16%]
tests/integration/scripts/test_enable_sharding.py .2021-01-15 23:06:13,699 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:17,972 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.                    [ 17%]
tests/integration/scripts/test_initialize_library.py .2021-01-15 23:06:26,550 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:30,870 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:35,156 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:38,567 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                [ 17%]
tests/integration/scripts/test_list_libraries.py .2021-01-15 23:06:42,849 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:47,157 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:06:51,434 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                     [ 17%]
tests/integration/scripts/test_prune_versions.py .2021-01-15 23:06:56,020 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:00,562 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:04,869 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF                   [ 17%]
tests/integration/store/test_bitemporal_store.py .2021-01-15 23:07:17,983 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:22,418 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:26,932 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:31,434 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:35,885 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:40,435 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:45,540 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:50,103 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:54,621 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:07:59,259 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:03,982 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:08,342 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:12,783 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:17,184 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:21,631 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:26,399 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
        [ 19%]
tests/integration/store/test_metadata_store.py .2021-01-15 23:08:30,307 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:34,170 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:38,140 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:42,009 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:45,870 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:49,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:53,667 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:08:57,599 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:09:01,478 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:09:05,333 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                [ 19%]
tests/integration/store/test_ndarray_store.py .2021-01-15 23:09:09,916 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:09:14,240 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
x.2021-01-15 23:09:34,309 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:09:50,542 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:06,573 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:11,009 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:15,757 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:20,145 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:35,671 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:10:51,791 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:07,458 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:11,762 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:16,071 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:20,230 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:24,998 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:29,684 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:34,184 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
..2021-01-15 23:11:40,024 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:44,373 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
X2021-01-15 23:11:48,747 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
     [ 21%]
tests/integration/store/test_ndarray_store_append.py .2021-01-15 23:11:53,131 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:11:57,503 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:01,981 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:06,378 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:10,793 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:15,287 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:19,634 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:23,949 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:28,291 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:32,629 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:36,944 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:41,285 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:45,659 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:50,029 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:12:54,201 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:04,101 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:14,817 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:24,731 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:32,125 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 23%]
.2021-01-15 23:13:38,327 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:44,394 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:50,490 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:13:57,425 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:01,712 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:06,070 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:10,410 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:14,699 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:19,173 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:23,522 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:27,828 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:32,335 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:36,833 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:41,366 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:46,576 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:51,840 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:14:57,098 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:01,595 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:06,077 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:10,709 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:15,058 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:19,396 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:23,741 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:28,107 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:32,478 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:36,856 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:41,342 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:45,747 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                                             [ 25%]
tests/integration/store/test_pandas_store.py .2021-01-15 23:15:50,221 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:54,596 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:15:58,922 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:03,513 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:07,863 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 23:16:17,286 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:21,631 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:16:26,217 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 23:16:31,222 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:35,573 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:39,925 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:44,272 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:48,619 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:52,986 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:16:57,381 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:01,799 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:06,155 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:10,530 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:14,877 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:19,300 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:23,633 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:28,013 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:32,436 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:37,086 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:41,495 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:45,927 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 27%]
.2021-01-15 23:17:50,468 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:54,866 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:17:59,281 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:03,674 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:08,037 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:12,403 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:16,758 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:21,127 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:25,815 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:30,202 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:34,558 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:38,941 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:43,375 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:47,773 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:52,095 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:18:56,417 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:00,719 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:05,070 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:09,416 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:13,921 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:18,230 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:22,545 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:26,867 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:31,174 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:35,486 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:39,811 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:44,144 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:48,448 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:52,772 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:19:57,119 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:01,701 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:06,049 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:10,474 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:14,870 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:19,185 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:23,573 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:27,968 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:32,305 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:36,660 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:40,983 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:45,400 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:49,738 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:54,081 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:20:58,430 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:02,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:07,117 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:11,469 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:15,824 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:20,171 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:24,517 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:28,846 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:33,312 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:37,695 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:42,078 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:48,153 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:21:57,860 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:22:02,351 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:22:06,717 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
x2021-01-15 23:22:15,881 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:22:15,882 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
xxxxx2021-01-15 23:22:39,446 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:22:39,447 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:22:39,448 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:22:39,448 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:22:39,448 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
xxxxx.2021-01-15 23:23:02,599 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:06,975 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:11,301 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 32%]
.2021-01-15 23:23:15,696 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:20,298 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
x.2021-01-15 23:23:29,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:35,130 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:40,833 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:45,283 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:23:51,651 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:15,537 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:20,540 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:25,495 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:32,802 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:37,416 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:41,832 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:46,215 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:50,574 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:54,911 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:24:59,249 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:03,570 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:07,991 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:12,352 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
ss.2021-01-15 23:25:16,800 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:21,450 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                                                [ 34%]
tests/integration/store/test_pickle_store.py .2021-01-15 23:25:25,783 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:30,485 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:34,799 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:39,137 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:44,302 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:48,656 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:53,011 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:25:57,433 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:01,750 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                   [ 35%]
tests/integration/store/test_version_store.py .2021-01-15 23:26:06,304 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
xx.2021-01-15 23:26:20,177 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:24,566 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:29,092 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:33,510 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:37,830 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:42,155 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:46,591 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:50,976 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:55,579 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:26:59,947 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:04,309 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:08,740 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:16,593 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:24,225 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:31,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:37,060 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:41,991 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:46,779 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:51,397 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:27:55,770 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:00,180 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:04,626 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:09,110 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 36%]
.2021-01-15 23:28:13,606 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:18,021 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:22,435 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:26,796 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:31,244 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:35,745 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:40,210 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:44,429 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:48,894 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:53,343 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:28:57,840 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:02,247 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:06,702 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:11,336 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:16,286 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:20,953 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:25,681 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:30,109 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:34,545 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:39,316 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:43,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:48,402 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:52,866 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:29:57,437 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:01,960 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:06,857 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:11,669 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:16,231 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:20,995 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:25,347 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:29,934 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:34,493 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:39,119 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:43,711 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:48,302 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:52,890 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:30:57,247 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:01,837 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:06,200 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:10,692 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:15,139 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:19,733 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:24,385 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:29,191 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:33,986 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:38,599 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:43,112 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:47,494 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:51,902 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:31:56,347 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:00,794 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:05,442 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:10,226 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:14,917 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:19,402 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:23,907 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:28,413 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:33,025 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:37,776 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:42,371 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:46,976 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:51,649 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:32:55,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:00,679 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:05,518 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:10,245 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:15,173 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:20,039 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:25,164 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:29,550 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:33,917 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:38,259 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 42%]
.2021-01-15 23:33:42,634 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:47,056 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:51,457 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:33:55,808 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:00,175 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:04,527 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:09,146 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:13,525 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:17,886 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:22,236 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:26,580 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:30,936 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:35,784 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:40,662 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:34:45,473 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:00,652 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:35:01,004 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-15 23:35:01,004 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:17,803 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:33,518 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:38,032 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:42,488 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:46,967 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:53,413 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:35:59,832 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:06,245 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:10,375 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:14,725 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:19,061 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:23,459 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:27,913 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:32,310 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:38,824 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:45,511 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:52,019 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:36:56,488 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:00,933 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:05,401 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:09,866 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:14,684 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:19,176 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:23,615 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:28,136 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:32,610 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:39,136 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:45,635 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:52,143 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:37:58,643 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:05,110 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:11,902 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:16,262 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:20,686 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:25,076 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:29,531 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:34,072 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:38,491 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:42,998 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:47,559 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:52,063 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:38:56,558 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:00,951 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:05,415 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:09,821 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:14,286 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:18,640 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:23,213 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:27,782 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:32,344 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:36,733 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:41,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:45,865 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:50,350 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:54,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:39:59,207 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 47%]
.2021-01-15 23:40:03,617 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:08,073 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:12,447 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
....2021-01-15 23:40:30,323 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:34,708 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:39,119 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:43,552 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:47,944 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:52,334 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:40:56,674 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:01,144 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:05,533 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:09,996 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:14,479 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:18,896 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:23,295 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:27,640 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:32,081 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:36,498 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:40,824 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:45,059 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:49,356 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:53,612 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:41:58,012 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:02,528 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:06,902 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:11,434 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:15,785 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:20,180 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:24,555 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:28,909 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:33,368 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:37,727 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:42,141 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:46,855 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:51,424 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:42:55,933 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:00,455 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:04,934 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:09,441 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:13,928 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:18,428 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:22,845 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:27,439 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:32,148 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:36,734 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:41,343 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:45,839 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:43:50,153 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:12,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:21,864 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:30,689 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:39,601 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:48,674 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:44:57,509 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:06,457 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
              [ 52%]
tests/integration/store/test_version_store_audit.py .2021-01-15 23:45:09,857 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:11,942 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:14,002 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:16,742 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:18,821 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:20,870 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
..2021-01-15 23:45:25,739 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:27,820 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:30,494 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
           [ 52%]
tests/integration/store/test_version_store_corruption.py .2021-01-15 23:45:35,713 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:39,923 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:48,785 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:52,077 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:45:56,105 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
s.2021-01-15 23:46:05,895 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:08,596 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:10,635 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:25,583 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
      [ 53%]
tests/integration/tickstore/test_toplevel.py .2021-01-15 23:46:27,138 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:28,692 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:30,300 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:31,861 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:33,416 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:34,975 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:36,530 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:38,077 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:39,640 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:46:43,301 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FFF.2021-01-15 23:46:51,546 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F..x.2021-01-15 23:47:02,836 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:05,695 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:07,894 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:10,063 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF.2021-01-15 23:47:16,808 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:19,213 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:21,446 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
 [ 55%]
.2021-01-15 23:47:22,998 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:25,172 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                                                                       [ 55%]
tests/integration/tickstore/test_ts_delete.py .2021-01-15 23:47:26,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:29,215 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                         [ 55%]
tests/integration/tickstore/test_ts_read.py .2021-01-15 23:47:30,897 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:33,206 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:34,944 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:37,222 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:38,912 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:40,656 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:42,958 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FF.2021-01-15 23:47:48,771 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:51,080 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:52,783 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
F.2021-01-15 23:47:56,833 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:47:59,133 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:00,827 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:03,147 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:04,853 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:07,145 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:08,827 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:11,131 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:12,834 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:15,118 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:16,801 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:19,264 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:20,936 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:22,644 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
  [ 57%]
tests/integration/tickstore/test_ts_write.py .2021-01-15 23:48:25,673 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:27,356 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:29,050 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:32,064 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
.2021-01-15 23:48:33,741 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
                       [ 58%]
tests/unit/test_arctic.py ....................................           [ 61%]
tests/unit/test_auth.py ...                                              [ 61%]
tests/unit/test_compress.py .............                                [ 62%]
tests/unit/test_compression.py ..........                                [ 62%]
tests/unit/test_decorators_unit.py ......x.....                          [ 63%]
tests/unit/test_fixtures.py ...                                          [ 64%]
tests/unit/test_hooks.py ...                                             [ 64%]
tests/unit/test_hosts.py ......                                          [ 64%]
tests/unit/test_multi_index.py ..............                            [ 65%]
tests/unit/test_util.py ..                                               [ 65%]
tests/unit/chunkstore/test_date_chunker.py .......                       [ 66%]
tests/unit/chunkstore/test_passthrough_chunker.py .                      [ 66%]
tests/unit/date/test_daterange.py ...................................... [ 69%]
.................                                                        [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py ..x.......              [ 71%]
tests/unit/date/test_mktz.py ....                                        [ 71%]
tests/unit/date/test_util.py ........................................... [ 74%]
.............                                                            [ 75%]
tests/unit/scripts/test_arctic_create_user.py ....                       [ 76%]
tests/unit/scripts/test_arctic_fsck.py ..                                [ 76%]
tests/unit/scripts/test_initialize_library.py .....                      [ 76%]
tests/unit/scripts/test_utils.py ......                                  [ 77%]
tests/unit/serialization/test_incremental.py ........................... [ 79%]
........................................................................ [ 84%]
.........                                                                [ 85%]
tests/unit/serialization/test_numpy_arrays.py ............               [ 86%]
tests/unit/serialization/test_numpy_records.py ............              [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py ................ [ 88%]
........                                                                 [ 88%]
tests/unit/store/test_bitemporal_store.py .                              [ 88%]
tests/unit/store/test_bson_store.py ...................                  [ 90%]
tests/unit/store/test_metadata_store.py .......                          [ 90%]
tests/unit/store/test_ndarray_store.py ..........                        [ 91%]
tests/unit/store/test_pandas_ndarray_store.py .....                      [ 91%]
tests/unit/store/test_pickle_store.py ......x...                         [ 92%]
tests/unit/store/test_version_item.py ....                               [ 92%]
tests/unit/store/test_version_store.py ................................. [ 95%]
..                                                                       [ 95%]
tests/unit/store/test_version_store_audit.py ..........F                 [ 96%]
tests/unit/store/test_version_store_utils.py .....                       [ 96%]
tests/unit/tickstore/test_tickstore.py F...F..F....                      [ 97%]
tests/unit/tickstore/test_toplevel.py ...............................    [100%]

=================================== FAILURES ===================================
_________________________________ test_indexes _________________________________

arctic = <Arctic at 0x7efdeff7be48, connected to MongoClient(host=['127.223.246.167:22868'], document_class=dict, tz_aware=False, connect=True)>

    def test_indexes(arctic):
        c = arctic._conn
        arctic.initialize_library("library", VERSION_STORE, segment='month')
        chunk = c.arctic.library.index_information()
        index_version = chunk['_id_']['v']  # Mongo 3.2 has index v1, 3.4 and 3.5 have v2 (3.4 can run in compabitility mode with v1)
>       assert chunk == {u'_id_': {u'key': [(u'_id', 1)], u'ns': u'arctic.library', u'v': index_version},
                         u'symbol_1_parent_1_segment_1': {u'background': True,
                                                          u'key': [(u'symbol', 1),
                                                                   (u'parent', 1),
                                                                   (u'segment', 1)],
                                                          u'ns': u'arctic.library',
                                                          u'unique': True,
                                                          u'v': index_version},
                         u'symbol_1_sha_1': {u'background': True,
                                             u'key': [(u'symbol', 1), (u'sha', 1)],
                                             u'ns': u'arctic.library',
                                             u'unique': True,
                                             u'v': index_version},
                         u'symbol_hashed': {u'background': True,
                                            u'key': [(u'symbol', u'hashed')],
                                            u'ns': u'arctic.library',
                                            u'v': index_version},
                         u'symbol_1_sha_1_segment_1': {u'background': True,
                                                       u'key': [(u'symbol', 1), (u'sha', 1), (u'segment', 1)],
                                                       u'ns': u'arctic.library',
                                                       u'unique': True,
                                                       u'v': index_version}}
E       AssertionError: assert {'_id_': {'ke... 'v': 2}, ...} == {'_id_': {'ke...ue, ...}, ...}
E         Differing items:
E         {'symbol_1_parent_1_segment_1': {'background': True, 'key': [('symbol', 1), ('parent', 1), ('segment', 1)], 'unique': True, 'v': 2}} != {'symbol_1_parent_1_segment_1': {'background': True, 'key': [('symbol', 1), ('parent', 1), ('segment', 1)], 'ns': 'arctic.library', 'unique': True, ...}}
E         {'symbol_1_sha_1_segment_1': {'background': True, 'key': [('symbol', 1), ('sha', 1), ('segment', 1)], 'unique': True, 'v': 2}} != {'symbol_1_sha_1_segment_1': {'background': True, 'key': [('symbol', 1), ('sha', 1), ('segment', 1)], 'ns': 'arctic.library', 'unique': True,...
E         
E         ...Full output truncated (5 lines hidden), use '-vv' to show

tests/integration/test_arctic.py:81: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T22:39:24.651-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T22:39:24.661-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T22:39:24.661-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T22:39:24.662-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":25442,"port":22868,"dbPath":"/tmp/tmp3ujenmjq","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T22:39:24.663-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T22:39:24.663-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T22:39:24.663-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":22868,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp3ujenmjq","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T22:39:24.666-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:39:24.666-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T22:39:27.126-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610775567:126859][25442:0x7f1d4b2afa80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:39:27.127-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610775567:127003][25442:0x7f1d4b2afa80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:39:27.173-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2507}}
{"t":{"$date":"2021-01-15T22:39:27.174-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.241-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T22:39:27.242-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T22:39:27.259-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:39:27.260-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"2d8a69fe-ec60-494b-85bb-4393906c6c8d"}},"options":{"uuid":{"$uuid":"2d8a69fe-ec60-494b-85bb-4393906c6c8d"}}}}
{"t":{"$date":"2021-01-15T22:39:27.328-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.329-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T22:39:27.330-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T22:39:27.331-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"dfd67b67-bdb9-427f-9277-c80349fe1213"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T22:39:27.395-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.396-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp3ujenmjq/diagnostic.data"}}
{"t":{"$date":"2021-01-15T22:39:27.400-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T22:39:27.400-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":22868,"ssl":"off"}}
{"t":{"$date":"2021-01-15T22:39:27.400-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T22:39:27.401-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"70be2e52-0d39-4d20-bf8b-7a3647acbaf1"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:27.502-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.502-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.502-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T22:39:27.631-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:41388","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.635-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:41390","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.838-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:41392","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.843-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:41396","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.843-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:41394","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.859-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:41398","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.866-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:41400","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.867-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:41402","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:39:27.878-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2210564f-be5c-4347-8fb5-80fc075f4f2d"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:27.950-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.952-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c4afcbaf-be2d-48fc-bfab-bf79d84c2228"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"2210564f-be5c-4347-8fb5-80fc075f4f2d"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T22:39:27.981-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:27.981-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c4afcbaf-be2d-48fc-bfab-bf79d84c2228"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:39:27.981-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c4afcbaf-be2d-48fc-bfab-bf79d84c2228"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 22:39:24,532 DEBUG pytest_shutil.workspace 
2021-01-15 22:39:24,533 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:39:24,534 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp3ujenmjq
2021-01-15 22:39:24,535 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 22:39:24,535 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:39:24,536 DEBUG pytest_shutil.workspace 
2021-01-15 22:39:24,537 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 22:39:24,559 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=22868 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3ujenmjq
2021-01-15 22:39:24,561 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 22:39:24,562 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 22:39:24,563 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:25,181 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 22:39:25,182 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:25,795 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 22:39:25,796 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:26,405 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 22:39:26,406 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:27,120 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 22:39:27,121 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:27,830 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 22:39:27,831 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22868
2021-01-15 22:39:27,859 DEBUG pytest_server_fixtures.base2 waited 0:00:03.296773 for server to start successfully
2021-01-15 22:39:27,860 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 22:39:27,861 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp3ujenmjq
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=22868 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3ujenmjq
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22868
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.296773 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T22:39:27.989-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ffe57c8e-278f-4b97-90c1-62e4359a92a9"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:28.061-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.066-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"63fdb342-1b66-4bbd-86a3-a9d44f261816"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:28.135-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T22:39:28.201-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.201-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.201-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"7b6e70d3-8da1-402f-9995-57b72fd564ee"}},"$db":"arctic","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":135}}
{"t":{"$date":"2021-01-15T22:39:28.204-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"56e391ed-d31e-498c-b117-4f2754f16959"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:28.343-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T22:39:28.351-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.351-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.351-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"7b6e70d3-8da1-402f-9995-57b72fd564ee"}},"$db":"arctic","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":147}}
{"t":{"$date":"2021-01-15T22:39:28.354-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"cf0e649e-2524-4a6d-9575-5a94fcca18bc"}},"namespace":"arctic.library.versions","collectionUUID":{"uuid":{"$uuid":"56e391ed-d31e-498c-b117-4f2754f16959"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T22:39:28.398-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.398-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"cf0e649e-2524-4a6d-9575-5a94fcca18bc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:39:28.398-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"cf0e649e-2524-4a6d-9575-5a94fcca18bc"}}}}
{"t":{"$date":"2021-01-15T22:39:28.401-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"be679969-ef17-423a-9e17-bd9acaca10b0"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:28.543-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.543-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.543-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"7b6e70d3-8da1-402f-9995-57b72fd564ee"}},"$db":"arctic","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":142}}
{"t":{"$date":"2021-01-15T22:39:28.546-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9ae5ab13-bdf7-43c0-9893-db802e379dc8"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:39:28.687-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.687-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.687-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"7b6e70d3-8da1-402f-9995-57b72fd564ee"}},"$db":"arctic","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":141}}
{"t":{"$date":"2021-01-15T22:39:28.689-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6e673bdc-8f82-4f09-bcac-51979fd7f768"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"9ae5ab13-bdf7-43c0-9893-db802e379dc8"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T22:39:28.724-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.724-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6e673bdc-8f82-4f09-bcac-51979fd7f768"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:39:28.724-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6e673bdc-8f82-4f09-bcac-51979fd7f768"}}}}
{"t":{"$date":"2021-01-15T22:39:28.726-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4cd7cbcb-4bf0-43fb-a725-4208e58adbde"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"9ae5ab13-bdf7-43c0-9893-db802e379dc8"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:39:28.753-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.753-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4cd7cbcb-4bf0-43fb-a725-4208e58adbde"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:39:28.753-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4cd7cbcb-4bf0-43fb-a725-4208e58adbde"}}}}
{"t":{"$date":"2021-01-15T22:39:28.756-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"64ed9ea7-a124-4cc7-b34d-af5adda5173c"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"9ae5ab13-bdf7-43c0-9893-db802e379dc8"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:39:28.793-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:39:28.793-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"64ed9ea7-a124-4cc7-b34d-af5adda5173c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:39:28.793-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"64ed9ea7-a124-4cc7-b34d-af5adda5173c"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 22:39:28,817 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 22:39:28,823 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log call -------------------------------
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 22:39:29,467 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 25442 (total_procs_to_kill=1)
2021-01-15 22:39:29,467 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 22:39:29,469 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 22:39:29,484 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 22:39:29,485 DEBUG pytest_shutil.workspace 
2021-01-15 22:39:29,485 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:39:29,485 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp3ujenmjq
2021-01-15 22:39:29,486 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:39:29,487 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 25442 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp3ujenmjq
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data6-FwPointersCfg.DISABLED] _______

mongo_host = '127.223.246.167:8536'
library = <VersionStore at 0x7efe398a5e10>
    <ArcticLibrary at 0x7efe398a5c18, arctic_user.library>
        <Arctic at 0x7efe3983d438, connected to MongoClient(host=['127.223.246.167:8536'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:8536'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:8536'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe398a5e10>\n    <ArcticLibrary at 0x7efe398a5c18, arctic_user.library>\n        <Arctic at 0x7efe3983d438, connected to MongoClient(host=['127.223.246.167:8536'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T22:59:47.330-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T22:59:47.336-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T22:59:47.336-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T22:59:47.337-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":4808,"port":8536,"dbPath":"/tmp/tmp5ah3cedy","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T22:59:47.337-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T22:59:47.337-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T22:59:47.337-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":8536,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp5ah3cedy","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T22:59:47.339-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:47.339-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T22:59:49.743-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776789:743904][4808:0x7f31e96d1a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:49.744-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776789:744033][4808:0x7f31e96d1a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:49.790-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2451}}
{"t":{"$date":"2021-01-15T22:59:49.790-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:49.856-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T22:59:49.856-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T22:59:49.875-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:49.876-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"9dac6782-bf4d-4443-85a4-6da3652fc427"}},"options":{"uuid":{"$uuid":"9dac6782-bf4d-4443-85a4-6da3652fc427"}}}}
{"t":{"$date":"2021-01-15T22:59:49.945-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:49.945-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T22:59:49.946-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T22:59:49.948-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8492e162-1425-417a-b49b-49189cabd1f3"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T22:59:50.012-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.013-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp5ah3cedy/diagnostic.data"}}
{"t":{"$date":"2021-01-15T22:59:50.017-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T22:59:50.017-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T22:59:50.017-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":8536,"ssl":"off"}}
{"t":{"$date":"2021-01-15T22:59:50.018-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a49dd063-cdc5-476c-8efe-6be83468549f"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:50.167-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.167-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.168-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":150}}
{"t":{"$date":"2021-01-15T22:59:50.312-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:35550","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.315-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:35552","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.520-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:35554","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.525-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:35556","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.526-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:35558","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.541-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:35560","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.545-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:35562","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.546-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:35564","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:50.557-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2e58a918-d32e-4108-b307-183a5a5d88be"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:50.628-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.631-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1733f8f8-b615-4880-94dc-deda1c074b4e"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"2e58a918-d32e-4108-b307-183a5a5d88be"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T22:59:50.664-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.664-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1733f8f8-b615-4880-94dc-deda1c074b4e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:50.664-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1733f8f8-b615-4880-94dc-deda1c074b4e"}}}}
{"t":{"$date":"2021-01-15T22:59:50.670-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7b2836fc-8247-4e64-b456-f540635fc361"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:50.737-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.741-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0756673c-77dd-400a-9a08-eda63cb271ed"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:50.815-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T22:59:50.876-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.876-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.876-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"53b33778-b3c3-492e-91dc-a208017ade57"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":135}}
{"t":{"$date":"2021-01-15T22:59:50.879-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1c8759a1-406b-44a6-9cfe-6d5dca49f6a4"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:50.979-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.979-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:50.980-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"53b33778-b3c3-492e-91dc-a208017ade57"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T22:59:50.982-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3931ef58-e50f-488e-8e03-068dffbc8ee0"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"1c8759a1-406b-44a6-9cfe-6d5dca49f6a4"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T22:59:51.019-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.019-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3931ef58-e50f-488e-8e03-068dffbc8ee0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:51.019-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3931ef58-e50f-488e-8e03-068dffbc8ee0"}}}}
{"t":{"$date":"2021-01-15T22:59:51.022-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e1dd540a-aa54-47a1-b82e-5e059d3a42b1"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:51.025-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T22:59:51.120-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.120-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.122-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"58587d9e-0655-47e6-8312-eda52a770f9f"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:51.221-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.221-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.223-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0c86579c-1e2f-44ff-b5bd-fff376d78b87"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"58587d9e-0655-47e6-8312-eda52a770f9f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T22:59:51.262-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.262-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0c86579c-1e2f-44ff-b5bd-fff376d78b87"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:51.262-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0c86579c-1e2f-44ff-b5bd-fff376d78b87"}}}}
{"t":{"$date":"2021-01-15T22:59:51.265-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6e3a72eb-1068-4dc8-adc1-134fb0d5dde8"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"58587d9e-0655-47e6-8312-eda52a770f9f"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:59:51.295-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.295-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6e3a72eb-1068-4dc8-adc1-134fb0d5dde8"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:51.296-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6e3a72eb-1068-4dc8-adc1-134fb0d5dde8"}}}}
{"t":{"$date":"2021-01-15T22:59:51.298-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d5ead366-32fb-4f37-b089-cd7265eca89b"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"58587d9e-0655-47e6-8312-eda52a770f9f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:59:51.332-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:51.332-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d5ead366-32fb-4f37-b089-cd7265eca89b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:51.332-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d5ead366-32fb-4f37-b089-cd7265eca89b"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 22:59:47,209 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:47,210 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:47,211 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp5ah3cedy
2021-01-15 22:59:47,211 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 22:59:47,212 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:47,212 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:47,213 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 22:59:47,241 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=8536 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp5ah3cedy
2021-01-15 22:59:47,243 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 22:59:47,245 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 22:59:47,245 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:47,862 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 22:59:47,863 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:48,473 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 22:59:48,473 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:49,086 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 22:59:49,086 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:49,798 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 22:59:49,799 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:50,510 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 22:59:50,511 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8536
2021-01-15 22:59:50,536 DEBUG pytest_server_fixtures.base2 waited 0:00:03.291567 for server to start successfully
2021-01-15 22:59:50,537 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 22:59:50,540 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 22:59:51,354 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 22:59:51,361 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp5ah3cedy
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=8536 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp5ah3cedy
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8536
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.291567 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:8536', '-f')
{"t":{"$date":"2021-01-15T22:59:51.465-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:35566","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:51.469-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:35568","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:51.470-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:35570","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 22:59:51,428 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 22:59:51,445 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 22:59:51,456 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:8536
2021-01-15 22:59:51,457 INFO arctic.arctic Connecting to mongo: 127.223.246.167:8536 (127.223.246.167:8536)
2021-01-15 22:59:51,475 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:8536', or admin credentials
2021-01-15 22:59:51,539 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:51,540 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 22:59:51,544 DEBUG arctic.store.version_store Checking symbol
2021-01-15 22:59:51,559 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 22:59:51,567 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 22:59:51,572 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 22:59:51,579 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:51,626 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 22:59:51,626 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 22:59:51,630 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 22:59:51,631 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 22:59:51,631 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 22:59:51,632 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 22:59:51,632 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 22:59:51,632 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:51,633 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:8536
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:8536 (127.223.246.167:8536)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:8536', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 22:59:51,730 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 4808 (total_procs_to_kill=1)
2021-01-15 22:59:51,731 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 22:59:51,733 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 22:59:51,748 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 22:59:51,750 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:51,751 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:51,752 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp5ah3cedy
2021-01-15 22:59:51,752 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:51,753 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 4808 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp5ah3cedy
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
________ test_cleanup_orphaned_chunks[False-data7-FwPointersCfg.HYBRID] ________

mongo_host = '127.223.246.167:22687'
library = <VersionStore at 0x7efe3983fb00>
    <ArcticLibrary at 0x7efe3983f5c0, arctic_user.library>
        <Arctic at 0x7efe3983f358, connected to MongoClient(host=['127.223.246.167:22687'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:22687'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:22687'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe3983fb00>\n    <ArcticLibrary at 0x7efe3983f5c0, arctic_user.library>\n        <Arctic at 0x7efe3983f358, connected to MongoClient(host=['127.223.246.167:22687'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T22:59:51.906-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T22:59:51.917-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T22:59:51.917-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T22:59:51.918-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":4872,"port":22687,"dbPath":"/tmp/tmp9ugmbazm","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T22:59:51.918-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T22:59:51.918-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T22:59:51.918-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":22687,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp9ugmbazm","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T22:59:51.921-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:51.921-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T22:59:54.436-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776794:436150][4872:0x7f7f790ada80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:54.436-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776794:436284][4872:0x7f7f790ada80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:54.483-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2561}}
{"t":{"$date":"2021-01-15T22:59:54.483-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:54.548-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T22:59:54.549-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T22:59:54.568-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:54.570-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"0d68cf31-082b-4add-a484-6b060cc248f6"}},"options":{"uuid":{"$uuid":"0d68cf31-082b-4add-a484-6b060cc248f6"}}}}
{"t":{"$date":"2021-01-15T22:59:54.636-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:54.636-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T22:59:54.637-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T22:59:54.639-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"118a9a50-0c49-4782-b267-19a21a42f268"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T22:59:54.706-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:54.707-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp9ugmbazm/diagnostic.data"}}
{"t":{"$date":"2021-01-15T22:59:54.711-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c78a4e2b-e398-4621-9e66-4dd1aa952da7"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:54.711-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T22:59:54.711-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T22:59:54.712-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":22687,"ssl":"off"}}
{"t":{"$date":"2021-01-15T22:59:54.812-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:54.813-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:54.813-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T22:59:54.913-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:37520","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:54.917-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:37522","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.124-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:37524","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.129-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:37526","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.131-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:37528","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.141-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:37530","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.149-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:37532","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.149-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:37534","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:55.160-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ed5ec7b5-0e12-4669-821a-7fe0572a229b"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.233-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.235-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c07ee6ca-4029-4e3e-8066-832c6c17bca1"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"ed5ec7b5-0e12-4669-821a-7fe0572a229b"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T22:59:55.266-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.266-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c07ee6ca-4029-4e3e-8066-832c6c17bca1"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:55.266-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c07ee6ca-4029-4e3e-8066-832c6c17bca1"}}}}
{"t":{"$date":"2021-01-15T22:59:55.272-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"faab909e-b422-4e24-b7cc-f0e817f8845e"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.342-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.346-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"896f0ab7-905a-46da-9a7b-2dee18b53b38"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.417-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T22:59:55.458-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.458-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.458-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"ab518148-ccf6-406a-af2a-7f52d6a25341"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":112}}
{"t":{"$date":"2021-01-15T22:59:55.461-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"95dc4887-67b2-4d3a-a7ce-13a5fb85c141"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.559-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.559-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.562-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ae67aeb9-41f3-4dc7-85ab-523b231fca43"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"95dc4887-67b2-4d3a-a7ce-13a5fb85c141"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T22:59:55.600-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.600-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ae67aeb9-41f3-4dc7-85ab-523b231fca43"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:55.600-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ae67aeb9-41f3-4dc7-85ab-523b231fca43"}}}}
{"t":{"$date":"2021-01-15T22:59:55.603-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1f57fb26-1604-4f86-aaf1-4730c520ccd3"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.629-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T22:59:55.701-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.701-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.703-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9a14cca0-2883-482a-b8cf-012355d72ac5"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:55.801-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.801-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.803-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"9261f103-9e57-4fc5-b82e-5a3c6d0fedbe"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"9a14cca0-2883-482a-b8cf-012355d72ac5"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T22:59:55.841-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.841-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"9261f103-9e57-4fc5-b82e-5a3c6d0fedbe"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:55.841-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"9261f103-9e57-4fc5-b82e-5a3c6d0fedbe"}}}}
{"t":{"$date":"2021-01-15T22:59:55.844-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3fe6a231-3247-405b-842c-e37b35ce1124"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"9a14cca0-2883-482a-b8cf-012355d72ac5"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:59:55.871-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.871-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3fe6a231-3247-405b-842c-e37b35ce1124"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:55.871-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3fe6a231-3247-405b-842c-e37b35ce1124"}}}}
{"t":{"$date":"2021-01-15T22:59:55.874-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"563f3f56-2e55-4923-8db9-a588054de6f4"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"9a14cca0-2883-482a-b8cf-012355d72ac5"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T22:59:55.908-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:55.908-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"563f3f56-2e55-4923-8db9-a588054de6f4"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:55.908-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"563f3f56-2e55-4923-8db9-a588054de6f4"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 22:59:51,766 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:51,767 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:51,768 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp9ugmbazm
2021-01-15 22:59:51,769 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 22:59:51,769 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:51,770 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:51,771 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 22:59:51,802 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=22687 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp9ugmbazm
2021-01-15 22:59:51,804 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 22:59:51,808 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 22:59:51,813 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:52,433 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 22:59:52,434 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:53,048 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 22:59:53,049 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:53,664 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 22:59:53,665 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:54,401 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 22:59:54,402 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:55,112 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 22:59:55,113 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:22687
2021-01-15 22:59:55,141 DEBUG pytest_server_fixtures.base2 waited 0:00:03.332778 for server to start successfully
2021-01-15 22:59:55,141 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 22:59:55,144 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 22:59:55,930 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 22:59:55,935 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp9ugmbazm
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=22687 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp9ugmbazm
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:22687
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.332778 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:22687', '-f')
{"t":{"$date":"2021-01-15T22:59:56.042-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:37536","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:56.056-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:37538","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:56.068-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:37540","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 22:59:56,006 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 22:59:56,024 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 22:59:56,033 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:22687
2021-01-15 22:59:56,034 INFO arctic.arctic Connecting to mongo: 127.223.246.167:22687 (127.223.246.167:22687)
2021-01-15 22:59:56,062 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:22687', or admin credentials
2021-01-15 22:59:56,118 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:56,119 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 22:59:56,123 DEBUG arctic.store.version_store Checking symbol
2021-01-15 22:59:56,140 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 22:59:56,147 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 22:59:56,152 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 22:59:56,159 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:56,213 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 22:59:56,214 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 22:59:56,218 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 22:59:56,219 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 22:59:56,219 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 22:59:56,220 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 22:59:56,220 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 22:59:56,221 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 22:59:56,221 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:22687
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:22687 (127.223.246.167:22687)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:22687', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 22:59:56,322 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 4872 (total_procs_to_kill=1)
2021-01-15 22:59:56,322 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 22:59:56,324 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 22:59:56,338 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 22:59:56,339 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:56,340 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:56,340 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp9ugmbazm
2021-01-15 22:59:56,340 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:56,341 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 4872 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp9ugmbazm
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data8-FwPointersCfg.ENABLED] ________

mongo_host = '127.223.246.167:6005'
library = <VersionStore at 0x7efe398d7630>
    <ArcticLibrary at 0x7efe398d7cf8, arctic_user.library>
        <Arctic at 0x7efe39813898, connected to MongoClient(host=['127.223.246.167:6005'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:6005'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:6005'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe398d7630>\n    <ArcticLibrary at 0x7efe398d7cf8, arctic_user.library>\n        <Arctic at 0x7efe39813898, connected to MongoClient(host=['127.223.246.167:6005'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T22:59:56.450-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T22:59:56.457-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T22:59:56.457-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T22:59:56.458-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":4936,"port":6005,"dbPath":"/tmp/tmpywi52hv7","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T22:59:56.458-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T22:59:56.458-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T22:59:56.458-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":6005,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpywi52hv7","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T22:59:56.461-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:56.461-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T22:59:58.932-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776798:932374][4936:0x7fa4bae1ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:58.932-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776798:932667][4936:0x7fa4bae1ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T22:59:58.984-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2523}}
{"t":{"$date":"2021-01-15T22:59:58.984-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.053-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T22:59:59.054-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T22:59:59.076-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T22:59:59.078-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"e5c3e1ac-72a0-47db-8729-cb2acbff5ec9"}},"options":{"uuid":{"$uuid":"e5c3e1ac-72a0-47db-8729-cb2acbff5ec9"}}}}
{"t":{"$date":"2021-01-15T22:59:59.148-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.148-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T22:59:59.149-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T22:59:59.151-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"36abe310-0575-49bb-998f-b1ae36d62911"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T22:59:59.216-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.217-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpywi52hv7/diagnostic.data"}}
{"t":{"$date":"2021-01-15T22:59:59.223-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"99f10927-88c5-4974-ba34-13a67d33b0d9"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:59.223-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T22:59:59.223-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T22:59:59.224-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":6005,"ssl":"off"}}
{"t":{"$date":"2021-01-15T22:59:59.322-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.322-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.448-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:46554","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.452-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:46556","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.661-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:46558","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.668-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:46560","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.668-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:46562","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.683-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:46564","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.693-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:46566","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.694-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:46568","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T22:59:59.709-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"dff85bd4-5f3a-467a-98a9-09700e045311"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:59.779-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.782-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4f48a9fb-8713-471d-a180-538a7f08519b"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"dff85bd4-5f3a-467a-98a9-09700e045311"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T22:59:59.811-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.812-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4f48a9fb-8713-471d-a180-538a7f08519b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T22:59:59.812-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4f48a9fb-8713-471d-a180-538a7f08519b"}}}}
{"t":{"$date":"2021-01-15T22:59:59.818-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"824086d5-2326-4c6e-aafb-84d910255b86"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:59.889-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.892-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"06324275-8a66-4ab5-84a0-809ab4876d00"}},"options":{}}}
{"t":{"$date":"2021-01-15T22:59:59.951-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T22:59:59.992-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.992-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T22:59:59.992-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"d0eae39c-aee8-4918-b875-4b0ec9bcb10f"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T22:59:59.995-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b20436cc-27f3-425c-9cbf-d0e68726482a"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:00.123-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.123-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.124-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"d0eae39c-aee8-4918-b875-4b0ec9bcb10f"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":128}}
{"t":{"$date":"2021-01-15T23:00:00.127-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3586986d-148f-4db9-836d-5a401c6fb0de"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"b20436cc-27f3-425c-9cbf-d0e68726482a"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:00:00.163-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.164-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3586986d-148f-4db9-836d-5a401c6fb0de"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:00.164-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3586986d-148f-4db9-836d-5a401c6fb0de"}}}}
{"t":{"$date":"2021-01-15T23:00:00.166-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9867c4b3-4553-4c69-8ac2-83d6e33984d3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:00.167-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:00:00.264-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.264-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.267-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"52e6481f-b441-4b94-adf5-55a08092294f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:00.367-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.367-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.367-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"d0eae39c-aee8-4918-b875-4b0ec9bcb10f"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:00:00.369-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f6a98dac-bfa7-4e30-85ce-9778ba8d33ae"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"52e6481f-b441-4b94-adf5-55a08092294f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:00:00.406-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.406-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f6a98dac-bfa7-4e30-85ce-9778ba8d33ae"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:00.406-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f6a98dac-bfa7-4e30-85ce-9778ba8d33ae"}}}}
{"t":{"$date":"2021-01-15T23:00:00.408-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6f6241d8-9f89-4d48-b64b-0415ae427422"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"52e6481f-b441-4b94-adf5-55a08092294f"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:00.435-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.436-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6f6241d8-9f89-4d48-b64b-0415ae427422"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:00.436-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6f6241d8-9f89-4d48-b64b-0415ae427422"}}}}
{"t":{"$date":"2021-01-15T23:00:00.438-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"246a2500-5702-4493-8fd5-1231c80f6d77"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"52e6481f-b441-4b94-adf5-55a08092294f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:00.474-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:00.474-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"246a2500-5702-4493-8fd5-1231c80f6d77"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:00.474-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"246a2500-5702-4493-8fd5-1231c80f6d77"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 22:59:56,350 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:56,351 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:56,352 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpywi52hv7
2021-01-15 22:59:56,352 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 22:59:56,352 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 22:59:56,353 DEBUG pytest_shutil.workspace 
2021-01-15 22:59:56,354 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 22:59:56,378 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=6005 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpywi52hv7
2021-01-15 22:59:56,379 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 22:59:56,381 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 22:59:56,382 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:56,997 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 22:59:56,998 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:57,609 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 22:59:57,610 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:58,223 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 22:59:58,224 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:58,933 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 22:59:58,934 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:59,647 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 22:59:59,648 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6005
2021-01-15 22:59:59,681 DEBUG pytest_server_fixtures.base2 waited 0:00:03.300159 for server to start successfully
2021-01-15 22:59:59,684 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 22:59:59,689 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:00:00,499 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:00:00,506 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpywi52hv7
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=6005 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpywi52hv7
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6005
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.300159 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:6005', '-f')
{"t":{"$date":"2021-01-15T23:00:00.615-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:46570","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:00.619-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:46572","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:00.620-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:46574","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:00:00,575 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:00:00,592 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:00:00,606 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:6005
2021-01-15 23:00:00,607 INFO arctic.arctic Connecting to mongo: 127.223.246.167:6005 (127.223.246.167:6005)
2021-01-15 23:00:00,624 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:6005', or admin credentials
2021-01-15 23:00:00,668 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:00,669 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:00:00,671 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:00:00,685 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:00:00,692 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:00:00,695 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:00:00,703 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:00,750 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:00:00,750 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:00:00,754 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 23:00:00,754 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:00,755 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:00:00,755 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:00,756 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:00:00,756 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:00,756 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:6005
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:6005 (127.223.246.167:6005)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:6005', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:00:00,851 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 4936 (total_procs_to_kill=1)
2021-01-15 23:00:00,851 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:00:00,853 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:00:00,868 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:00:00,869 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:00,870 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:00,871 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpywi52hv7
2021-01-15 23:00:00,871 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:00,872 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 4936 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpywi52hv7
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data9-FwPointersCfg.DISABLED] _______

mongo_host = '127.223.246.167:8889'
library = <VersionStore at 0x7efe3983fba8>
    <ArcticLibrary at 0x7efe3983fb38, arctic_user.library>
        <Arctic at 0x7efe3983fd68, connected to MongoClient(host=['127.223.246.167:8889'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:8889'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:8889'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe3983fba8>\n    <ArcticLibrary at 0x7efe3983fb38, arctic_user.library>\n        <Arctic at 0x7efe3983fd68, connected to MongoClient(host=['127.223.246.167:8889'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:00:00.997-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:00:01.006-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:00:01.006-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:00:01.007-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":5012,"port":8889,"dbPath":"/tmp/tmpbk8gfxoy","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:00:01.007-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:00:01.008-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:00:01.008-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":8889,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpbk8gfxoy","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:00:01.010-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:01.010-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:00:03.496-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776803:496064][5012:0x7f6ad9edda80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:03.496-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776803:496191][5012:0x7f6ad9edda80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:03.541-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2531}}
{"t":{"$date":"2021-01-15T23:00:03.541-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:03.608-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:00:03.609-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:00:03.625-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:03.627-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"7653f8d4-cef9-4262-bb41-494c70c62d00"}},"options":{"uuid":{"$uuid":"7653f8d4-cef9-4262-bb41-494c70c62d00"}}}}
{"t":{"$date":"2021-01-15T23:00:03.695-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:03.696-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:00:03.697-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:00:03.698-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9a5d321b-1a22-4e6e-8b7d-745c225ac498"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:00:03.762-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:03.762-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpbk8gfxoy/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:00:03.767-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:00:03.767-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"27f107c9-f509-45b5-af43-c7f8999614aa"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:03.767-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:00:03.767-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":8889,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:00:03.868-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:03.868-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:03.869-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:00:03.986-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:45846","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:03.991-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:45848","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.194-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:45850","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.199-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:45852","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.200-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:45854","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.212-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:45856","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.220-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:45858","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.221-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:45860","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:04.231-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d7fb9002-1595-406e-a5e3-8ed8551022be"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.303-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.307-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"23aa1e1e-9852-4739-993f-51b8e84f0c5b"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"d7fb9002-1595-406e-a5e3-8ed8551022be"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:00:04.334-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.334-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"23aa1e1e-9852-4739-993f-51b8e84f0c5b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:04.334-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"23aa1e1e-9852-4739-993f-51b8e84f0c5b"}}}}
{"t":{"$date":"2021-01-15T23:00:04.342-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4d4d15d2-eb13-4a77-9f72-026e1a533530"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.413-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.416-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c9550895-7143-40d6-9c33-95f65fbb6039"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.491-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:00:04.536-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.537-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.537-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"ea27c315-5816-452e-aa04-5a7e655560c2"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":120}}
{"t":{"$date":"2021-01-15T23:00:04.539-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3af7a32b-c3f4-488e-ab88-735101fd41aa"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.641-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.641-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.641-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"ea27c315-5816-452e-aa04-5a7e655560c2"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:00:04.644-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0630c158-f86c-41b8-ae10-136d19a79bb6"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"3af7a32b-c3f4-488e-ab88-735101fd41aa"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:00:04.681-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.681-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0630c158-f86c-41b8-ae10-136d19a79bb6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:04.681-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0630c158-f86c-41b8-ae10-136d19a79bb6"}}}}
{"t":{"$date":"2021-01-15T23:00:04.683-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7dff3928-1712-44a2-afcd-7c1554bb129e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.699-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:00:04.780-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.781-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.783-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5e8ebee9-24c6-4038-a0d8-530ba6e801a1"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:04.882-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.882-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.885-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"61f6e79c-cdc7-44fc-8f6a-a2769b97dd2a"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"5e8ebee9-24c6-4038-a0d8-530ba6e801a1"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:00:04.924-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.924-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"61f6e79c-cdc7-44fc-8f6a-a2769b97dd2a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:04.924-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"61f6e79c-cdc7-44fc-8f6a-a2769b97dd2a"}}}}
{"t":{"$date":"2021-01-15T23:00:04.928-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"090d789e-00e0-4768-9f83-34a18566589d"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"5e8ebee9-24c6-4038-a0d8-530ba6e801a1"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:04.958-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:04.958-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"090d789e-00e0-4768-9f83-34a18566589d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:04.958-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"090d789e-00e0-4768-9f83-34a18566589d"}}}}
{"t":{"$date":"2021-01-15T23:00:04.962-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"99553a85-ebfa-461a-a7b3-7936b5c7ad33"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"5e8ebee9-24c6-4038-a0d8-530ba6e801a1"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:05.001-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:05.001-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"99553a85-ebfa-461a-a7b3-7936b5c7ad33"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:05.001-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"99553a85-ebfa-461a-a7b3-7936b5c7ad33"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:00:00,883 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:00,884 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:00,885 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpbk8gfxoy
2021-01-15 23:00:00,886 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:00:00,887 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:00,887 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:00,888 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:00:00,913 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=8889 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpbk8gfxoy
2021-01-15 23:00:00,915 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:00:00,917 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:00:00,918 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:01,538 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:00:01,539 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:02,149 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:00:02,150 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:02,760 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:00:02,761 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:03,472 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:00:03,473 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:04,185 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:00:04,185 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8889
2021-01-15 23:00:04,212 DEBUG pytest_server_fixtures.base2 waited 0:00:03.295286 for server to start successfully
2021-01-15 23:00:04,213 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:00:04,215 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:00:05,032 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:00:05,043 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpbk8gfxoy
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=8889 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpbk8gfxoy
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8889
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.295286 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:8889', '-f')
{"t":{"$date":"2021-01-15T23:00:05.182-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:45862","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:05.187-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:45864","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:05.187-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:45866","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:00:05,140 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:00:05,164 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:00:05,173 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:8889
2021-01-15 23:00:05,174 INFO arctic.arctic Connecting to mongo: 127.223.246.167:8889 (127.223.246.167:8889)
2021-01-15 23:00:05,192 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:8889', or admin credentials
2021-01-15 23:00:05,249 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:05,251 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:00:05,255 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:00:05,271 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:00:05,282 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:00:05,287 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:00:05,296 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:05,341 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:00:05,342 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:00:05,346 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 23:00:05,347 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:05,348 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:00:05,348 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:05,349 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:00:05,349 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:05,350 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:8889
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:8889 (127.223.246.167:8889)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:8889', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:00:05,455 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 5012 (total_procs_to_kill=1)
2021-01-15 23:00:05,456 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:00:05,457 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:00:05,478 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:00:05,479 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:05,480 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:05,481 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpbk8gfxoy
2021-01-15 23:00:05,482 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:05,483 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 5012 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpbk8gfxoy
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data10-FwPointersCfg.HYBRID] ________

mongo_host = '127.223.246.167:30016'
library = <VersionStore at 0x7efe398d71d0>
    <ArcticLibrary at 0x7efe398d7630, arctic_user.library>
        <Arctic at 0x7efe398a5780, connected to MongoClient(host=['127.223.246.167:30016'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:30016'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:30016'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe398d71d0>\n    <ArcticLibrary at 0x7efe398d7630, arctic_user.library>\n        <Arctic at 0x7efe398a5780, connected to MongoClient(host=['127.223.246.167:30016'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:00:05.629-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:00:05.634-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:00:05.634-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:00:05.635-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":5081,"port":30016,"dbPath":"/tmp/tmpi3yjj7ey","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:00:05.635-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:00:05.635-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:00:05.635-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":30016,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpi3yjj7ey","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:00:05.638-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:05.638-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:00:08.152-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776808:152589][5081:0x7efd08fa0a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:08.152-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776808:152724][5081:0x7efd08fa0a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:08.201-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2563}}
{"t":{"$date":"2021-01-15T23:00:08.201-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.264-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:00:08.265-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:00:08.282-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:08.284-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"ebecb8a2-f448-44f7-97e6-177fc616a4e6"}},"options":{"uuid":{"$uuid":"ebecb8a2-f448-44f7-97e6-177fc616a4e6"}}}}
{"t":{"$date":"2021-01-15T23:00:08.354-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.354-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:00:08.355-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:00:08.357-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"120fe561-eab2-4ae9-bbcc-63540117aca9"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:00:08.421-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.421-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpi3yjj7ey/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:00:08.428-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:00:08.428-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f5684a22-b346-4fcb-9fcc-31ad655468d6"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:08.429-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:00:08.429-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":30016,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:00:08.526-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.526-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.625-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:32788","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.631-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:32790","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.834-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:32792","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.839-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:32794","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.840-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:32796","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.852-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:32798","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.862-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:32802","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.862-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:32800","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:08.876-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"db35c812-285b-40d1-9fff-ca35c8e32ad3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:08.946-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.950-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a17995cf-00ba-4f35-b9f4-d2502429f24a"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"db35c812-285b-40d1-9fff-ca35c8e32ad3"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:00:08.983-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:08.984-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a17995cf-00ba-4f35-b9f4-d2502429f24a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:08.984-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a17995cf-00ba-4f35-b9f4-d2502429f24a"}}}}
{"t":{"$date":"2021-01-15T23:00:08.993-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2cbcf7be-5f08-479b-ad47-0e6e4bf47099"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:09.067-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.072-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5ded183f-5cd7-4747-b90a-96a5bc639f78"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:09.131-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:00:09.209-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.209-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.209-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"7d587adf-fbf8-4239-95a9-542622522421"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":137}}
{"t":{"$date":"2021-01-15T23:00:09.213-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2b90e2d6-d599-459a-b73b-532e76b43496"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:09.324-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.325-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.325-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"7d587adf-fbf8-4239-95a9-542622522421"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":112}}
{"t":{"$date":"2021-01-15T23:00:09.327-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d75d911f-953c-49bc-ace3-8db9c23c53c7"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"2b90e2d6-d599-459a-b73b-532e76b43496"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:00:09.338-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:00:09.361-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.361-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d75d911f-953c-49bc-ace3-8db9c23c53c7"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:09.361-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d75d911f-953c-49bc-ace3-8db9c23c53c7"}}}}
{"t":{"$date":"2021-01-15T23:00:09.364-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1271cd3c-b13d-4810-a7e9-db15c92c5f2d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:09.469-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.470-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.470-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"7d587adf-fbf8-4239-95a9-542622522421"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":105}}
{"t":{"$date":"2021-01-15T23:00:09.472-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"af7c7935-869b-4ca4-8933-a5b441a7bc40"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:09.573-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.573-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.573-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"7d587adf-fbf8-4239-95a9-542622522421"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:00:09.576-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b83dae0a-30c6-4790-9ee0-2b8a353fdbcc"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"af7c7935-869b-4ca4-8933-a5b441a7bc40"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:00:09.611-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.611-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b83dae0a-30c6-4790-9ee0-2b8a353fdbcc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:09.611-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b83dae0a-30c6-4790-9ee0-2b8a353fdbcc"}}}}
{"t":{"$date":"2021-01-15T23:00:09.614-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"971502c6-8443-41e8-a1b0-1b865f7689f6"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"af7c7935-869b-4ca4-8933-a5b441a7bc40"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:09.645-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.645-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"971502c6-8443-41e8-a1b0-1b865f7689f6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:09.645-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"971502c6-8443-41e8-a1b0-1b865f7689f6"}}}}
{"t":{"$date":"2021-01-15T23:00:09.647-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"41dde998-9540-4383-aa67-ea220f435c68"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"af7c7935-869b-4ca4-8933-a5b441a7bc40"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:09.681-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:09.681-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"41dde998-9540-4383-aa67-ea220f435c68"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:09.681-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"41dde998-9540-4383-aa67-ea220f435c68"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:00:05,500 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:05,501 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:05,502 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpi3yjj7ey
2021-01-15 23:00:05,503 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:00:05,504 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:05,505 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:05,506 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:00:05,539 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=30016 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpi3yjj7ey
2021-01-15 23:00:05,541 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:00:05,543 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:00:05,545 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:06,164 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:00:06,165 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:06,782 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:00:06,783 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:07,395 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:00:07,396 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:08,112 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:00:08,113 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:08,823 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:00:08,824 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30016
2021-01-15 23:00:08,851 DEBUG pytest_server_fixtures.base2 waited 0:00:03.308094 for server to start successfully
2021-01-15 23:00:08,852 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:00:08,857 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:00:09,707 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:00:09,714 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpi3yjj7ey
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=30016 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpi3yjj7ey
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30016
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.308094 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:30016', '-f')
{"t":{"$date":"2021-01-15T23:00:09.878-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:32804","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:09.883-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:32808","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:09.884-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:32806","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:00:09,820 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:00:09,852 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:00:09,864 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:30016
2021-01-15 23:00:09,865 INFO arctic.arctic Connecting to mongo: 127.223.246.167:30016 (127.223.246.167:30016)
2021-01-15 23:00:09,893 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:30016', or admin credentials
2021-01-15 23:00:09,966 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:09,968 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:00:09,973 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:00:09,991 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:00:09,999 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:00:10,005 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:00:10,014 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:10,076 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:00:10,077 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:00:10,081 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 23:00:10,082 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:10,083 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:00:10,084 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:10,084 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:00:10,085 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:10,086 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:30016
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:30016 (127.223.246.167:30016)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:30016', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:00:10,218 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 5081 (total_procs_to_kill=1)
2021-01-15 23:00:10,219 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:00:10,220 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:00:10,248 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:00:10,249 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:10,250 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:10,251 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpi3yjj7ey
2021-01-15 23:00:10,252 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:10,252 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 5081 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpi3yjj7ey
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data11-FwPointersCfg.ENABLED] _______

mongo_host = '127.223.246.167:10118'
library = <VersionStore at 0x7efe3983d320>
    <ArcticLibrary at 0x7efe3983d588, arctic_user.library>
        <Arctic at 0x7efe398ace48, connected to MongoClient(host=['127.223.246.167:10118'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = mongo_count(Collection(Database(MongoClient(host=['127.223.246.167:10118'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library'))
E                +    where Collection(Database(MongoClient(host=['127.223.246.167:10118'], document_class=dict, tz_aware=False, connect=True), 'arctic_user'), 'library') = <VersionStore at 0x7efe3983d320>\n    <ArcticLibrary at 0x7efe3983d588, arctic_user.library>\n        <Arctic at 0x7efe398ace48, connected to MongoClient(host=['127.223.246.167:10118'], document_class=dict, tz_aware=False, connect=True)>._collection

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:00:10.390-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:00:10.395-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:00:10.395-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:00:10.397-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":5181,"port":10118,"dbPath":"/tmp/tmpp1ciea1w","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:00:10.397-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:00:10.397-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:00:10.397-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":10118,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpp1ciea1w","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:00:10.399-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:10.399-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:00:12.901-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776812:901225][5181:0x7fd5ac1dca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:12.901-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776812:901357][5181:0x7fd5ac1dca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:00:12.947-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2548}}
{"t":{"$date":"2021-01-15T23:00:12.947-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.014-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:00:13.015-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:00:13.032-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:00:13.033-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"b602bc37-ce37-4c67-97ba-9a46e5d909d2"}},"options":{"uuid":{"$uuid":"b602bc37-ce37-4c67-97ba-9a46e5d909d2"}}}}
{"t":{"$date":"2021-01-15T23:00:13.103-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.103-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:00:13.104-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:00:13.106-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"be0108e4-974c-49d3-86f5-56a432947e4b"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:00:13.173-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.173-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpp1ciea1w/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:00:13.179-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bad954d0-ce28-44e2-b5fb-ec8e453c284e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:13.181-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:00:13.182-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:00:13.182-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":10118,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:00:13.292-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.292-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.292-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":113}}
{"t":{"$date":"2021-01-15T23:00:13.381-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:42484","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.385-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:42486","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.599-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:42488","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.607-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:42492","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.607-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:42490","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.624-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:42494","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.631-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:42496","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.637-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:42498","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:13.648-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"75479144-90e1-444d-ac29-56a09e890ff8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:13.724-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.727-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a1a73677-9195-42c0-82cb-a775caec017e"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"75479144-90e1-444d-ac29-56a09e890ff8"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:00:13.757-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.757-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a1a73677-9195-42c0-82cb-a775caec017e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:13.757-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a1a73677-9195-42c0-82cb-a775caec017e"}}}}
{"t":{"$date":"2021-01-15T23:00:13.766-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6e007151-c9eb-483f-be17-f91d91e928d2"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:13.835-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.839-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d22e94b0-61fd-4305-8c01-505eb33aba2e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:13.885-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:00:13.939-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.939-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:13.939-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"06506919-38f5-4ffe-80d5-e818d69c3807"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:00:13.941-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7f84a86c-0004-4307-8ee1-1fda31bf6ef4"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:14.067-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.067-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.067-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"06506919-38f5-4ffe-80d5-e818d69c3807"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":125}}
{"t":{"$date":"2021-01-15T23:00:14.072-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f845c70f-68b9-4f99-9496-01db41f16132"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"7f84a86c-0004-4307-8ee1-1fda31bf6ef4"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:00:14.107-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:00:14.112-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.112-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f845c70f-68b9-4f99-9496-01db41f16132"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:14.112-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f845c70f-68b9-4f99-9496-01db41f16132"}}}}
{"t":{"$date":"2021-01-15T23:00:14.115-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cd076e54-27c7-4924-9242-a145fbead80f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:14.215-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.215-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.216-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"06506919-38f5-4ffe-80d5-e818d69c3807"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:00:14.219-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"85f61493-d38f-4b4a-aae2-a9549bd537c7"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:00:14.324-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.325-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.325-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"06506919-38f5-4ffe-80d5-e818d69c3807"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":105}}
{"t":{"$date":"2021-01-15T23:00:14.328-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f328c953-07c6-4b36-80b3-9fa38f831dd1"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"85f61493-d38f-4b4a-aae2-a9549bd537c7"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:00:14.367-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.367-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f328c953-07c6-4b36-80b3-9fa38f831dd1"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:14.367-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f328c953-07c6-4b36-80b3-9fa38f831dd1"}}}}
{"t":{"$date":"2021-01-15T23:00:14.371-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d76c0c9c-2e01-4168-9e75-217a5e3093cb"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"85f61493-d38f-4b4a-aae2-a9549bd537c7"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:14.397-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.397-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d76c0c9c-2e01-4168-9e75-217a5e3093cb"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:14.397-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d76c0c9c-2e01-4168-9e75-217a5e3093cb"}}}}
{"t":{"$date":"2021-01-15T23:00:14.401-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ac281c76-04e4-4640-af8a-e79b9a706a45"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"85f61493-d38f-4b4a-aae2-a9549bd537c7"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:00:14.437-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:00:14.438-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ac281c76-04e4-4640-af8a-e79b9a706a45"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:00:14.438-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ac281c76-04e4-4640-af8a-e79b9a706a45"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:00:10,265 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:10,266 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:10,267 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpp1ciea1w
2021-01-15 23:00:10,268 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:00:10,268 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:10,269 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:10,270 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:00:10,297 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=10118 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpp1ciea1w
2021-01-15 23:00:10,299 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:00:10,300 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:00:10,301 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:10,921 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:00:10,921 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:11,533 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:00:11,534 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:12,149 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:00:12,150 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:12,865 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:00:12,866 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:13,580 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:00:13,581 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:10118
2021-01-15 23:00:13,624 DEBUG pytest_server_fixtures.base2 waited 0:00:03.323210 for server to start successfully
2021-01-15 23:00:13,624 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:00:13,627 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:00:14,467 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:00:14,476 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpp1ciea1w
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=10118 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpp1ciea1w
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:10118
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.323210 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:10118', '-f')
{"t":{"$date":"2021-01-15T23:00:14.635-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:42500","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:14.642-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:42504","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:00:14.653-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:42502","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:00:14,577 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:00:14,602 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:00:14,622 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:10118
2021-01-15 23:00:14,623 INFO arctic.arctic Connecting to mongo: 127.223.246.167:10118 (127.223.246.167:10118)
2021-01-15 23:00:14,647 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:10118', or admin credentials
2021-01-15 23:00:14,702 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:14,704 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:00:14,707 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:00:14,721 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:00:14,729 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:00:14,732 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:00:14,739 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:14,787 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:00:14,788 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:00:14,793 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-15 23:00:14,794 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:14,795 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:00:14,796 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:00:14,797 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:00:14,798 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:00:14,798 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:10118
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:10118 (127.223.246.167:10118)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:10118', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:00:14,934 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 5181 (total_procs_to_kill=1)
2021-01-15 23:00:14,934 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:00:14,936 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:00:14,951 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:00:14,952 DEBUG pytest_shutil.workspace 
2021-01-15 23:00:14,953 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:14,953 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpp1ciea1w
2021-01-15 23:00:14,953 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:00:14,954 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 5181 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpp1ciea1w
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED] ______

mongo_host = '127.223.246.167:11024'
library = <VersionStore at 0x7efe397e3dd8>
    <ArcticLibrary at 0x7efe397e3ba8, arctic_user.library>
        <Arctic at 0x7efe397e5a58, connected to MongoClient(host=['127.223.246.167:11024'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600130160000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:02:59.514-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:02:59.526-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:02:59.526-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:02:59.527-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7600,"port":11024,"dbPath":"/tmp/tmptbtdnng5","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:02:59.527-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:02:59.527-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:02:59.527-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":11024,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmptbtdnng5","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:02:59.530-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:02:59.530-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:01.954-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776981:954605][7600:0x7f27fcae1a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:01.954-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776981:954766][7600:0x7f27fcae1a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:02.006-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2476}}
{"t":{"$date":"2021-01-15T23:03:02.006-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.071-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:02.071-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:02.090-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:02.091-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"71f61e02-e3d5-44fb-a936-e30865265645"}},"options":{"uuid":{"$uuid":"71f61e02-e3d5-44fb-a936-e30865265645"}}}}
{"t":{"$date":"2021-01-15T23:03:02.160-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.160-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:02.161-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:02.163-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e804e8b6-b5c9-4e8f-b187-e948b1891ab8"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:02.231-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.231-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmptbtdnng5/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:02.236-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:02.236-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:02.236-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":11024,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:02.236-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9d4fd8da-f1b1-4e80-88c9-1b01a477115c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:02.338-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.338-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.338-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:03:02.515-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:33540","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.519-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:33542","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.722-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:33544","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.726-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:33546","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.728-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:33548","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.742-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:33550","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.749-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:33552","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.750-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:33554","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:02.760-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fd9ad5c4-71b2-4d35-87dc-826e718d2b85"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:02.826-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.829-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b2408202-601a-4078-acb5-e854ca3f920a"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"fd9ad5c4-71b2-4d35-87dc-826e718d2b85"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:02.860-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.860-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b2408202-601a-4078-acb5-e854ca3f920a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:02.860-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b2408202-601a-4078-acb5-e854ca3f920a"}}}}
{"t":{"$date":"2021-01-15T23:03:02.867-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7a71fc44-1f37-475d-b695-acf9b58c2077"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:02.936-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:02.939-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e47989b0-6df0-40ee-9077-ddb8c061bb53"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:03.019-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:03:03.070-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.070-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.070-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"ee9fccf1-75af-4aab-8ce6-ae9d07c30667"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":131}}
{"t":{"$date":"2021-01-15T23:03:03.073-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"04e76d3b-a281-4e5f-8e1e-431094d12dfc"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:03.174-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.175-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.175-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"ee9fccf1-75af-4aab-8ce6-ae9d07c30667"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:03:03.177-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6e8fc178-d02d-41d0-8ff3-f811f9911bfc"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"04e76d3b-a281-4e5f-8e1e-431094d12dfc"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:03.212-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.212-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6e8fc178-d02d-41d0-8ff3-f811f9911bfc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:03.212-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6e8fc178-d02d-41d0-8ff3-f811f9911bfc"}}}}
{"t":{"$date":"2021-01-15T23:03:03.215-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"93dbd915-6dae-4f27-8649-7538fc257efc"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:03.226-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:03:03.315-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.315-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.315-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"ee9fccf1-75af-4aab-8ce6-ae9d07c30667"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:03.317-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3baa9f48-7324-462a-bba6-84dbd1e33992"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:03.418-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.418-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.418-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"ee9fccf1-75af-4aab-8ce6-ae9d07c30667"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:03.421-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"5ca38370-dab8-45ff-b36e-8ac7a42a9da2"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"3baa9f48-7324-462a-bba6-84dbd1e33992"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:03.458-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.458-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"5ca38370-dab8-45ff-b36e-8ac7a42a9da2"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:03.458-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"5ca38370-dab8-45ff-b36e-8ac7a42a9da2"}}}}
{"t":{"$date":"2021-01-15T23:03:03.460-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"cca3c607-bbf2-4010-90f2-e980e393adfb"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"3baa9f48-7324-462a-bba6-84dbd1e33992"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:03.491-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.491-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"cca3c607-bbf2-4010-90f2-e980e393adfb"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:03.491-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"cca3c607-bbf2-4010-90f2-e980e393adfb"}}}}
{"t":{"$date":"2021-01-15T23:03:03.494-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"30449232-a668-4bcf-b883-c0f2444171d6"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"3baa9f48-7324-462a-bba6-84dbd1e33992"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:03.528-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:03.528-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"30449232-a668-4bcf-b883-c0f2444171d6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:03.528-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"30449232-a668-4bcf-b883-c0f2444171d6"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:02:59,415 DEBUG pytest_shutil.workspace 
2021-01-15 23:02:59,416 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:02:59,417 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmptbtdnng5
2021-01-15 23:02:59,417 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:02:59,417 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:02:59,418 DEBUG pytest_shutil.workspace 
2021-01-15 23:02:59,419 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:02:59,444 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=11024 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmptbtdnng5
2021-01-15 23:02:59,445 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:02:59,446 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:02:59,447 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:00,063 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:00,064 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:00,678 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:00,678 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:01,290 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:01,291 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:02,001 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:02,002 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:02,713 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:02,714 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:11024
2021-01-15 23:03:02,742 DEBUG pytest_server_fixtures.base2 waited 0:00:03.295207 for server to start successfully
2021-01-15 23:03:02,742 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:02,745 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:03,550 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:03,556 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmptbtdnng5
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=11024 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmptbtdnng5
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:11024
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.295207 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:11024', '-f')
{"t":{"$date":"2021-01-15T23:03:03.665-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:33556","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:03.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:33558","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:03.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:33560","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:03,615 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:03,632 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:03,656 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:11024
2021-01-15 23:03:03,657 INFO arctic.arctic Connecting to mongo: 127.223.246.167:11024 (127.223.246.167:11024)
2021-01-15 23:03:03,675 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:11024', or admin credentials
2021-01-15 23:03:03,724 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:03,725 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:03,727 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:03,742 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:03,746 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:03,752 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:03,794 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:03,794 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:03,798 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:03,799 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:03,800 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:03,800 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:03,800 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:03,801 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:03,801 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:11024
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:11024 (127.223.246.167:11024)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:11024', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:03,900 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7600 (total_procs_to_kill=1)
2021-01-15 23:03:03,900 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:03,902 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:03,917 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:03,918 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:03,919 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:03,919 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmptbtdnng5
2021-01-15 23:03:03,920 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:03,920 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7600 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmptbtdnng5
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID] _______

mongo_host = '127.223.246.167:26993'
library = <VersionStore at 0x7efe397e6320>
    <ArcticLibrary at 0x7efe397e6048, arctic_user.library>
        <Arctic at 0x7efe397735c0, connected to MongoClient(host=['127.223.246.167:26993'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('6001301b0000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:03:04.046-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:03:04.053-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:03:04.054-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:03:04.055-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7664,"port":26993,"dbPath":"/tmp/tmp737eoobk","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:03:04.055-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:03:04.055-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:03:04.055-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":26993,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp737eoobk","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:03:04.059-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:04.059-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:06.492-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776986:492361][7664:0x7fd9acdc8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:06.492-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776986:492486][7664:0x7fd9acdc8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:06.540-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2481}}
{"t":{"$date":"2021-01-15T23:03:06.541-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:06.604-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:06.604-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:06.624-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:06.625-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"f40b22ed-256e-41a9-a1f8-988224e6b0eb"}},"options":{"uuid":{"$uuid":"f40b22ed-256e-41a9-a1f8-988224e6b0eb"}}}}
{"t":{"$date":"2021-01-15T23:03:06.690-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:06.690-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:06.691-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:06.693-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7aa2c8c7-9935-4764-a504-6546bb3dda53"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:06.759-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:06.759-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp737eoobk/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:06.765-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:06.765-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":26993,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:06.765-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:06.765-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f1fa3ab0-13e2-4ce1-958b-dfbb40bb428f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:06.867-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:06.867-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:06.868-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:03:07.028-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:59042","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.032-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:59044","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.236-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:59046","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.241-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:59048","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.242-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:59050","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.254-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:59052","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.261-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:59054","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.262-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:59056","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:07.272-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"01582ee3-c872-414d-a311-f8d345ffc10c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.342-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.345-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3cb703bb-8d9c-4b33-8824-36d0d44e0361"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"01582ee3-c872-414d-a311-f8d345ffc10c"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:07.375-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.375-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3cb703bb-8d9c-4b33-8824-36d0d44e0361"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:07.375-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3cb703bb-8d9c-4b33-8824-36d0d44e0361"}}}}
{"t":{"$date":"2021-01-15T23:03:07.382-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1f7a008d-e64c-43e1-86db-c295d037c8c7"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.449-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.453-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7214756d-fdb6-4a4b-8989-81d81bc84581"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.532-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-15T23:03:07.573-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.573-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.573-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"f4ef1147-97f8-42da-a01b-afabf4c3cd85"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":120}}
{"t":{"$date":"2021-01-15T23:03:07.576-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b1f3e6f5-eddc-4343-b9ea-5b30931e672b"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.676-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.676-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.676-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"f4ef1147-97f8-42da-a01b-afabf4c3cd85"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:07.679-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"096ffedd-2a24-46a8-a362-4c166864e88e"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"b1f3e6f5-eddc-4343-b9ea-5b30931e672b"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:07.716-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.716-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"096ffedd-2a24-46a8-a362-4c166864e88e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:07.717-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"096ffedd-2a24-46a8-a362-4c166864e88e"}}}}
{"t":{"$date":"2021-01-15T23:03:07.720-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7161d5e7-dc66-44ec-93d3-2a08d9d02764"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.741-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:03:07.817-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.818-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.820-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b77e52fa-05d9-4598-916c-0351f1a7757d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:07.917-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.917-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.919-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"62f7f6cd-edf8-4786-a1aa-52a108265879"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b77e52fa-05d9-4598-916c-0351f1a7757d"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:07.956-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.957-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"62f7f6cd-edf8-4786-a1aa-52a108265879"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:07.957-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"62f7f6cd-edf8-4786-a1aa-52a108265879"}}}}
{"t":{"$date":"2021-01-15T23:03:07.959-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3ba69502-70e9-45ef-ba05-2c321b877023"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b77e52fa-05d9-4598-916c-0351f1a7757d"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:07.987-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:07.987-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3ba69502-70e9-45ef-ba05-2c321b877023"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:07.987-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3ba69502-70e9-45ef-ba05-2c321b877023"}}}}
{"t":{"$date":"2021-01-15T23:03:07.990-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"2fd6ad62-1265-4c07-b8ca-657f100fc0d4"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b77e52fa-05d9-4598-916c-0351f1a7757d"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:08.023-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:08.023-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"2fd6ad62-1265-4c07-b8ca-657f100fc0d4"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:08.023-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"2fd6ad62-1265-4c07-b8ca-657f100fc0d4"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:03:03,931 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:03,931 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:03,932 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp737eoobk
2021-01-15 23:03:03,933 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:03:03,933 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:03,934 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:03,935 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:03:03,960 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=26993 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp737eoobk
2021-01-15 23:03:03,962 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:03:03,964 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:03:03,965 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:04,583 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:04,584 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:05,195 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:05,196 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:05,807 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:05,807 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:06,517 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:06,518 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:07,227 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:07,227 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26993
2021-01-15 23:03:07,253 DEBUG pytest_server_fixtures.base2 waited 0:00:03.289149 for server to start successfully
2021-01-15 23:03:07,254 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:07,256 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:08,049 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:08,060 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp737eoobk
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=26993 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp737eoobk
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26993
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.289149 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:26993', '-f')
{"t":{"$date":"2021-01-15T23:03:08.182-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:59058","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:08.187-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:59060","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:08.188-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:59062","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:08,136 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:08,153 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:08,173 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:26993
2021-01-15 23:03:08,174 INFO arctic.arctic Connecting to mongo: 127.223.246.167:26993 (127.223.246.167:26993)
2021-01-15 23:03:08,193 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:26993', or admin credentials
2021-01-15 23:03:08,245 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:08,246 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:08,249 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:08,264 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:08,268 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:08,274 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:08,318 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:08,319 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:08,322 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:08,323 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:08,323 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:08,323 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:08,324 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:08,324 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:08,324 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:26993
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:26993 (127.223.246.167:26993)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:26993', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:08,439 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7664 (total_procs_to_kill=1)
2021-01-15 23:03:08,440 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:08,441 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:08,456 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:08,457 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:08,458 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:08,458 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp737eoobk
2021-01-15 23:03:08,459 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:08,459 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7664 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp737eoobk
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED] ______

mongo_host = '127.223.246.167:2220'
library = <VersionStore at 0x7efe39830438>
    <ArcticLibrary at 0x7efe398303c8, arctic_user.library>
        <Arctic at 0x7efe397bd518, connected to MongoClient(host=['127.223.246.167:2220'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('6001301f0000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:03:08.575-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:03:08.587-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:03:08.587-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:03:08.588-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7726,"port":2220,"dbPath":"/tmp/tmps5s8hqj1","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:03:08.588-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:03:08.589-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:03:08.589-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":2220,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmps5s8hqj1","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:03:08.591-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:08.591-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:11.070-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776991:70905][7726:0x7fc6a0736a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:11.071-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776991:71078][7726:0x7fc6a0736a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:11.117-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2526}}
{"t":{"$date":"2021-01-15T23:03:11.117-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.181-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:11.182-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:11.201-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:11.204-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"e152751b-7c35-44c4-a33a-dd1b94482572"}},"options":{"uuid":{"$uuid":"e152751b-7c35-44c4-a33a-dd1b94482572"}}}}
{"t":{"$date":"2021-01-15T23:03:11.272-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.273-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:11.273-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:11.276-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5f17bc60-be32-4151-987f-1cbee2641ba9"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:11.340-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.341-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmps5s8hqj1/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:11.346-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7a9e981b-a6f1-45fa-ad4c-6c9dcc07f60d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:11.346-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:11.347-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:11.347-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":2220,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:11.445-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.445-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.446-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:11.565-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:40406","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.569-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:40408","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.772-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:40410","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.776-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:40412","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.776-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:40414","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.788-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:40416","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.795-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:40418","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.796-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:40420","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:11.807-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"beb74ff2-cb1e-4527-a5ce-d5b48f3865df"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:11.878-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.881-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"24c9af56-06f1-4753-890c-b4847bc5674d"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"beb74ff2-cb1e-4527-a5ce-d5b48f3865df"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:11.912-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.912-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"24c9af56-06f1-4753-890c-b4847bc5674d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:11.912-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"24c9af56-06f1-4753-890c-b4847bc5674d"}}}}
{"t":{"$date":"2021-01-15T23:03:11.920-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b9d4b2f6-0ec8-4d6b-85b8-cfcad9aa856f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:11.991-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:11.994-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c5b515c4-7778-424b-ab18-750b9dd30cdc"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:12.070-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:03:12.124-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.124-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.125-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"9367647a-2e73-4fd3-9b4d-34cb4045d82d"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":130}}
{"t":{"$date":"2021-01-15T23:03:12.127-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c9db7bdb-5fca-42f9-a1b9-30de4c7e49a0"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:12.224-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.224-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.226-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"53c520cc-fe18-4993-ad35-e5ef882fbf01"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"c9db7bdb-5fca-42f9-a1b9-30de4c7e49a0"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:12.264-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.264-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"53c520cc-fe18-4993-ad35-e5ef882fbf01"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:12.264-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"53c520cc-fe18-4993-ad35-e5ef882fbf01"}}}}
{"t":{"$date":"2021-01-15T23:03:12.266-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"597052e7-7d2b-47a3-b9bd-33b19ee40c8c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:12.279-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:03:12.364-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.364-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.366-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d3bdf1dd-5866-4ea4-ade6-c9e603cd5b3b"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:12.467-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.468-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.468-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"9367647a-2e73-4fd3-9b4d-34cb4045d82d"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:03:12.470-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"49c58ab0-9bc8-4f6c-9d32-995002389232"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d3bdf1dd-5866-4ea4-ade6-c9e603cd5b3b"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:12.507-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.507-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"49c58ab0-9bc8-4f6c-9d32-995002389232"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:12.507-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"49c58ab0-9bc8-4f6c-9d32-995002389232"}}}}
{"t":{"$date":"2021-01-15T23:03:12.510-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6c65e3d4-2a0f-4d47-8e30-723381ea0b12"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d3bdf1dd-5866-4ea4-ade6-c9e603cd5b3b"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:12.537-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.537-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6c65e3d4-2a0f-4d47-8e30-723381ea0b12"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:12.537-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6c65e3d4-2a0f-4d47-8e30-723381ea0b12"}}}}
{"t":{"$date":"2021-01-15T23:03:12.540-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"98119ced-60f8-45f5-bf90-5cf8d9786975"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d3bdf1dd-5866-4ea4-ade6-c9e603cd5b3b"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:12.574-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:12.574-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"98119ced-60f8-45f5-bf90-5cf8d9786975"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:12.575-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"98119ced-60f8-45f5-bf90-5cf8d9786975"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:03:08,471 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:08,472 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:08,473 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmps5s8hqj1
2021-01-15 23:03:08,474 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:03:08,474 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:08,475 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:08,476 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:03:08,501 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=2220 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmps5s8hqj1
2021-01-15 23:03:08,503 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:03:08,505 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:03:08,507 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:09,122 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:09,123 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:09,733 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:09,733 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:10,343 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:10,343 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:11,053 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:11,054 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:11,763 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:11,764 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:2220
2021-01-15 23:03:11,787 DEBUG pytest_server_fixtures.base2 waited 0:00:03.281814 for server to start successfully
2021-01-15 23:03:11,788 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:11,790 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:12,603 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:12,610 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmps5s8hqj1
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=2220 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmps5s8hqj1
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:2220
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.281814 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:2220', '-f')
{"t":{"$date":"2021-01-15T23:03:12.737-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:40430","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:12.742-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:40432","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:12.744-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:40434","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:12,684 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:12,702 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:12,727 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:2220
2021-01-15 23:03:12,727 INFO arctic.arctic Connecting to mongo: 127.223.246.167:2220 (127.223.246.167:2220)
2021-01-15 23:03:12,748 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:2220', or admin credentials
2021-01-15 23:03:12,801 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:12,803 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:12,806 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:12,823 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:12,827 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:12,836 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:12,887 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:12,888 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:12,893 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:12,894 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:12,894 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:12,895 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:12,896 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:12,897 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:12,897 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:2220
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:2220 (127.223.246.167:2220)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:2220', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:13,023 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7726 (total_procs_to_kill=1)
2021-01-15 23:03:13,024 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:13,025 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:13,040 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:13,041 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:13,041 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:13,042 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmps5s8hqj1
2021-01-15 23:03:13,042 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:13,043 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7726 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmps5s8hqj1
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED] ______

mongo_host = '127.223.246.167:7596'
library = <VersionStore at 0x7efe397d84e0>
    <ArcticLibrary at 0x7efe397d8cc0, arctic_user.library>
        <Arctic at 0x7efe397e6908, connected to MongoClient(host=['127.223.246.167:7596'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600130240000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:03:13.173-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:03:13.188-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:03:13.188-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:03:13.189-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7794,"port":7596,"dbPath":"/tmp/tmp4k0quuak","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:03:13.189-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:03:13.189-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:03:13.189-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":7596,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp4k0quuak","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:03:13.191-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:13.191-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:15.612-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776995:612861][7794:0x7fb9ace5ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:15.613-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610776995:613035][7794:0x7fb9ace5ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:15.661-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2470}}
{"t":{"$date":"2021-01-15T23:03:15.661-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:15.724-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:15.724-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:15.742-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:15.743-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"0c9ed409-9d81-472a-9368-98eceb594ce4"}},"options":{"uuid":{"$uuid":"0c9ed409-9d81-472a-9368-98eceb594ce4"}}}}
{"t":{"$date":"2021-01-15T23:03:15.812-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:15.812-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:15.813-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:15.815-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6452e75c-c422-41bd-b89f-27f6783d0fe2"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:15.878-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:15.879-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp4k0quuak/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:15.883-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:15.883-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"607e2833-cb13-4bcb-b620-d379f833b4f5"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:15.883-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:15.884-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":7596,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:15.983-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:15.983-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:15.983-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:16.168-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:39264","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.171-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:39266","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.375-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:39268","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.380-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:39270","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.381-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:39272","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.391-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:39274","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.398-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:39278","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.399-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:39276","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:16.410-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1c0dd6a4-22b0-4eb1-b51b-17f083d8fae5"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:16.481-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.484-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"8e26e954-71cb-447a-8d25-253db87daddf"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"1c0dd6a4-22b0-4eb1-b51b-17f083d8fae5"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:16.512-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.512-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"8e26e954-71cb-447a-8d25-253db87daddf"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:16.513-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"8e26e954-71cb-447a-8d25-253db87daddf"}}}}
{"t":{"$date":"2021-01-15T23:03:16.518-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f17f31c-2ee1-4a84-8a45-09b338a2d3ac"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:16.594-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.599-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b36bb749-e73b-4b54-ab18-7a213b10dac8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:16.672-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-15T23:03:16.710-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.711-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.711-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"0bd505ac-e06f-4884-85a9-7ba7e7bbc914"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":111}}
{"t":{"$date":"2021-01-15T23:03:16.714-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"de1bc031-308f-4732-981f-fcff6ccbad3c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:16.814-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.814-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.814-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"0bd505ac-e06f-4884-85a9-7ba7e7bbc914"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:16.817-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e4eafc3a-25b2-4beb-afe9-33a42bb8dc97"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"de1bc031-308f-4732-981f-fcff6ccbad3c"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:16.850-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.850-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e4eafc3a-25b2-4beb-afe9-33a42bb8dc97"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:16.851-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e4eafc3a-25b2-4beb-afe9-33a42bb8dc97"}}}}
{"t":{"$date":"2021-01-15T23:03:16.853-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4cbf2f67-69db-4d3b-96a0-e35ac4a9164e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:16.880-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:03:16.953-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.953-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:16.954-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"0bd505ac-e06f-4884-85a9-7ba7e7bbc914"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:16.956-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"37b25a01-fb58-44cf-93bf-ec031530b412"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:17.064-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:17.065-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:17.065-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"0bd505ac-e06f-4884-85a9-7ba7e7bbc914"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":108}}
{"t":{"$date":"2021-01-15T23:03:17.067-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4ab23992-2d09-4c95-9357-e1e9318b099a"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"37b25a01-fb58-44cf-93bf-ec031530b412"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:17.101-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:17.102-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4ab23992-2d09-4c95-9357-e1e9318b099a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:17.102-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4ab23992-2d09-4c95-9357-e1e9318b099a"}}}}
{"t":{"$date":"2021-01-15T23:03:17.104-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4274aea3-9c85-4bd2-a24c-35be58204979"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"37b25a01-fb58-44cf-93bf-ec031530b412"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:17.136-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:17.136-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4274aea3-9c85-4bd2-a24c-35be58204979"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:17.136-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4274aea3-9c85-4bd2-a24c-35be58204979"}}}}
{"t":{"$date":"2021-01-15T23:03:17.139-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"585534a6-bb3f-4698-b6c6-cb8e07132195"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"37b25a01-fb58-44cf-93bf-ec031530b412"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:17.175-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:17.175-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"585534a6-bb3f-4698-b6c6-cb8e07132195"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:17.176-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"585534a6-bb3f-4698-b6c6-cb8e07132195"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:03:13,060 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:13,061 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:13,062 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp4k0quuak
2021-01-15 23:03:13,063 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:03:13,064 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:13,065 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:13,066 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:03:13,096 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=7596 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4k0quuak
2021-01-15 23:03:13,098 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:03:13,100 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:03:13,101 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:13,724 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:13,725 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:14,334 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:14,335 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:14,945 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:14,946 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:15,656 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:15,657 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:16,367 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:16,367 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:7596
2021-01-15 23:03:16,391 DEBUG pytest_server_fixtures.base2 waited 0:00:03.291124 for server to start successfully
2021-01-15 23:03:16,392 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:16,394 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:17,200 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:17,207 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp4k0quuak
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=7596 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4k0quuak
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:7596
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.291124 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:7596', '-f')
{"t":{"$date":"2021-01-15T23:03:17.324-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:39280","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:17.329-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:39282","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:17.330-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:39284","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:17,270 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:17,291 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:17,315 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:7596
2021-01-15 23:03:17,316 INFO arctic.arctic Connecting to mongo: 127.223.246.167:7596 (127.223.246.167:7596)
2021-01-15 23:03:17,334 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:7596', or admin credentials
2021-01-15 23:03:17,381 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:17,382 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:17,386 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:17,403 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:17,407 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:17,413 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:17,458 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:17,459 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:17,462 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:17,462 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:17,463 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:17,463 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:17,464 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:17,464 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:17,464 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:7596
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:7596 (127.223.246.167:7596)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:7596', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:17,659 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7794 (total_procs_to_kill=1)
2021-01-15 23:03:17,659 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:17,661 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:17,675 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:17,676 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:17,676 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:17,677 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp4k0quuak
2021-01-15 23:03:17,677 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:17,677 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7794 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp4k0quuak
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID] ______

mongo_host = '127.223.246.167:8230'
library = <VersionStore at 0x7efe398b1b00>
    <ArcticLibrary at 0x7efe398b14a8, arctic_user.library>
        <Arctic at 0x7efe398b16a0, connected to MongoClient(host=['127.223.246.167:8230'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600130280000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:03:17.795-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:03:17.802-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:03:17.802-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:03:17.803-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7857,"port":8230,"dbPath":"/tmp/tmpv7re1ku4","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:03:17.803-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:03:17.803-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:03:17.803-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":8230,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpv7re1ku4","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:03:17.805-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:17.806-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:20.275-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777000:275040][7857:0x7f2959c41a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:20.275-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777000:275163][7857:0x7f2959c41a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:20.323-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2517}}
{"t":{"$date":"2021-01-15T23:03:20.323-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:20.382-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:20.383-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:20.404-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:20.405-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"76aad3c9-be74-4db4-a03d-490aa7972ed5"}},"options":{"uuid":{"$uuid":"76aad3c9-be74-4db4-a03d-490aa7972ed5"}}}}
{"t":{"$date":"2021-01-15T23:03:20.473-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:20.473-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:20.474-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:20.476-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"930a0d91-9998-4d52-ab33-951ac35912dc"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:20.539-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:20.540-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpv7re1ku4/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:20.544-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:20.544-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:20.545-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":8230,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:20.545-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"92516dea-dd03-4770-80da-338253c2f0fa"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:20.646-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:20.646-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:20.646-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:03:20.787-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:35920","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:20.790-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:35922","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:20.994-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:35924","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:20.999-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:35926","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:20.999-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:35928","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:21.014-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:35930","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:21.023-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:35932","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:21.024-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:35934","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:21.035-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"14f60df8-0a89-4fdb-af8e-a1c34980f731"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.114-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.119-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4f353dae-03f6-44fe-a818-135fa5592e57"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"14f60df8-0a89-4fdb-af8e-a1c34980f731"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:21.153-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.153-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4f353dae-03f6-44fe-a818-135fa5592e57"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:21.153-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4f353dae-03f6-44fe-a818-135fa5592e57"}}}}
{"t":{"$date":"2021-01-15T23:03:21.160-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"067b2cd7-acbb-472d-b855-20a00edf4926"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.230-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.234-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"44568d2f-d01c-4515-843c-26444bd152a0"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.291-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:03:21.369-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.369-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.369-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"acc29ff3-1a4d-4e98-aa8c-d76304070cba"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":135}}
{"t":{"$date":"2021-01-15T23:03:21.372-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6d81bed7-aed4-44ea-a150-6b1528f04eda"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.472-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.473-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.473-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"acc29ff3-1a4d-4e98-aa8c-d76304070cba"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:03:21.476-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4d7be018-4b62-4990-a900-a74ae24fa600"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"6d81bed7-aed4-44ea-a150-6b1528f04eda"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:21.498-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:03:21.509-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.509-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4d7be018-4b62-4990-a900-a74ae24fa600"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:21.509-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4d7be018-4b62-4990-a900-a74ae24fa600"}}}}
{"t":{"$date":"2021-01-15T23:03:21.512-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0b0006d6-408c-4e07-bb3f-127fe1a81f00"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.613-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.613-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.614-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"acc29ff3-1a4d-4e98-aa8c-d76304070cba"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:03:21.616-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"15e305d5-8727-478b-a9d2-b4ef2e6d21e6"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:21.715-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.715-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.718-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"be32d669-978c-4c82-8d41-0d7f4d2fb11d"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"15e305d5-8727-478b-a9d2-b4ef2e6d21e6"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:21.752-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.752-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"be32d669-978c-4c82-8d41-0d7f4d2fb11d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:21.752-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"be32d669-978c-4c82-8d41-0d7f4d2fb11d"}}}}
{"t":{"$date":"2021-01-15T23:03:21.755-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"44d9c6c4-007e-411b-b0bc-83f9998abb76"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"15e305d5-8727-478b-a9d2-b4ef2e6d21e6"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:21.788-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.788-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"44d9c6c4-007e-411b-b0bc-83f9998abb76"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:21.789-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"44d9c6c4-007e-411b-b0bc-83f9998abb76"}}}}
{"t":{"$date":"2021-01-15T23:03:21.791-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3653116a-fc07-4f1b-87be-e28c6a6fd348"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"15e305d5-8727-478b-a9d2-b4ef2e6d21e6"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:21.825-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:21.825-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3653116a-fc07-4f1b-87be-e28c6a6fd348"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:21.825-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3653116a-fc07-4f1b-87be-e28c6a6fd348"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:03:17,688 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:17,689 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:17,689 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpv7re1ku4
2021-01-15 23:03:17,690 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:03:17,690 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:17,691 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:17,692 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:03:17,716 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=8230 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpv7re1ku4
2021-01-15 23:03:17,718 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:03:17,720 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:03:17,721 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:18,338 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:18,339 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:18,949 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:18,950 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:19,561 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:19,563 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:20,274 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:20,275 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:20,985 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:20,986 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8230
2021-01-15 23:03:21,014 DEBUG pytest_server_fixtures.base2 waited 0:00:03.293713 for server to start successfully
2021-01-15 23:03:21,014 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:21,017 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:21,851 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:21,857 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpv7re1ku4
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=8230 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpv7re1ku4
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8230
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.293713 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:8230', '-f')
{"t":{"$date":"2021-01-15T23:03:21.997-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:35936","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:22.002-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:35940","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:22.007-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:35938","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:21,922 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:21,953 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:21,984 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:8230
2021-01-15 23:03:21,985 INFO arctic.arctic Connecting to mongo: 127.223.246.167:8230 (127.223.246.167:8230)
2021-01-15 23:03:22,007 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:8230', or admin credentials
2021-01-15 23:03:22,078 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:22,079 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:22,083 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:22,096 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:22,104 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:03:22,109 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:22,118 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:22,167 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:22,168 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:22,172 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:22,172 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:22,173 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:22,173 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:22,174 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:22,174 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:22,174 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:8230
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:8230 (127.223.246.167:8230)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:8230', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:22,350 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7857 (total_procs_to_kill=1)
2021-01-15 23:03:22,351 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:22,352 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:22,368 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:22,369 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:22,371 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:22,371 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpv7re1ku4
2021-01-15 23:03:22,371 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:22,372 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7857 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpv7re1ku4
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED] ______

mongo_host = '127.223.246.167:3877'
library = <VersionStore at 0x7efe397e5668>
    <ArcticLibrary at 0x7efe397e5208, arctic_user.library>
        <Arctic at 0x7efe3975e400, connected to MongoClient(host=['127.223.246.167:3877'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('6001302d0000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:03:22.486-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:03:22.497-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:03:22.498-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:03:22.499-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":7925,"port":3877,"dbPath":"/tmp/tmpir534yri","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:03:22.499-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:03:22.499-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:03:22.499-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":3877,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpir534yri","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:03:22.501-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:22.501-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:03:24.912-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777004:912328][7925:0x7f656f3b9a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:24.912-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777004:912467][7925:0x7f656f3b9a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:03:24.961-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2460}}
{"t":{"$date":"2021-01-15T23:03:24.962-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.022-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:03:25.022-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:03:25.044-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:03:25.046-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"4bfd1825-58cd-4b0a-8790-d7882c77858e"}},"options":{"uuid":{"$uuid":"4bfd1825-58cd-4b0a-8790-d7882c77858e"}}}}
{"t":{"$date":"2021-01-15T23:03:25.116-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.116-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:03:25.117-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:03:25.119-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a1f5e26c-0dda-4675-a334-825ee6c3199a"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:03:25.186-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.187-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpir534yri/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:03:25.192-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:03:25.192-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fcfadc0d-bb81-4eeb-82b0-494995ca17bd"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:25.193-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:03:25.193-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":3877,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:03:25.292-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.292-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.292-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:25.494-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:34966","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.499-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:34968","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.703-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:34970","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.708-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:34974","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.708-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:34972","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.720-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:34976","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.728-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:34978","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.728-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:34980","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:25.739-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e83b3f99-96d6-42a4-a508-26a339ebfe27"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:25.806-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.808-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ee47649a-0fc7-42cf-99e2-b31b291f77ed"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"e83b3f99-96d6-42a4-a508-26a339ebfe27"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:03:25.840-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.840-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ee47649a-0fc7-42cf-99e2-b31b291f77ed"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:25.840-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ee47649a-0fc7-42cf-99e2-b31b291f77ed"}}}}
{"t":{"$date":"2021-01-15T23:03:25.847-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0c6fd965-8bf8-48ec-a608-3d4df21da228"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:25.916-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:25.921-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9c5d194d-7c9a-46b6-9a66-278c084272da"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:25.999-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:03:26.057-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.058-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.058-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"b46caeef-8f15-4c0b-9834-dbe8c44964ab"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":137}}
{"t":{"$date":"2021-01-15T23:03:26.061-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f3f04c1-7451-4c8a-82f3-2aa06fef854e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:26.161-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.161-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.162-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"b46caeef-8f15-4c0b-9834-dbe8c44964ab"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:03:26.164-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f9458d6c-28b1-4ed0-8c37-8c1574511e4d"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"8f3f04c1-7451-4c8a-82f3-2aa06fef854e"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:03:26.197-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.198-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f9458d6c-28b1-4ed0-8c37-8c1574511e4d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:26.198-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f9458d6c-28b1-4ed0-8c37-8c1574511e4d"}}}}
{"t":{"$date":"2021-01-15T23:03:26.200-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fccec3f1-4d9d-4667-a93c-48b2502fd8c6"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:26.207-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:03:26.298-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.298-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.300-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b049bff2-89d7-4253-ba71-c20b32842f39"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:03:26.402-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.403-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.403-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"b46caeef-8f15-4c0b-9834-dbe8c44964ab"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:03:26.405-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a90294f2-2111-495e-bd7f-642a3612f6cd"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b049bff2-89d7-4253-ba71-c20b32842f39"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:03:26.442-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.442-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a90294f2-2111-495e-bd7f-642a3612f6cd"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:26.442-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a90294f2-2111-495e-bd7f-642a3612f6cd"}}}}
{"t":{"$date":"2021-01-15T23:03:26.445-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"821baf12-b501-4341-97c0-9adbfef84c85"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b049bff2-89d7-4253-ba71-c20b32842f39"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:26.476-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.476-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"821baf12-b501-4341-97c0-9adbfef84c85"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:26.476-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"821baf12-b501-4341-97c0-9adbfef84c85"}}}}
{"t":{"$date":"2021-01-15T23:03:26.479-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4d06cfb9-dca1-4d36-920e-cf44e22504bb"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"b049bff2-89d7-4253-ba71-c20b32842f39"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:03:26.514-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:03:26.514-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4d06cfb9-dca1-4d36-920e-cf44e22504bb"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:03:26.514-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4d06cfb9-dca1-4d36-920e-cf44e22504bb"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:03:22,383 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:22,383 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:22,384 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpir534yri
2021-01-15 23:03:22,384 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:03:22,385 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:22,385 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:22,386 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:03:22,409 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=3877 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpir534yri
2021-01-15 23:03:22,412 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:03:22,414 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:03:22,415 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:23,034 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:03:23,035 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:23,659 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:03:23,660 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:24,270 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:03:24,271 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:24,981 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:03:24,981 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:25,693 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:03:25,694 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:3877
2021-01-15 23:03:25,720 DEBUG pytest_server_fixtures.base2 waited 0:00:03.305745 for server to start successfully
2021-01-15 23:03:25,720 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:03:25,724 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:03:26,537 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:03:26,542 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpir534yri
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=3877 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpir534yri
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:3877
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.305745 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.223.246.167:3877', '-f')
{"t":{"$date":"2021-01-15T23:03:26.659-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:34982","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:26.664-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:34984","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:03:26.666-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:34986","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:03:26,605 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-15 23:03:26,628 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-15 23:03:26,649 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.223.246.167:3877
2021-01-15 23:03:26,650 INFO arctic.arctic Connecting to mongo: 127.223.246.167:3877 (127.223.246.167:3877)
2021-01-15 23:03:26,669 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.223.246.167:3877', or admin credentials
2021-01-15 23:03:26,723 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:26,724 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-15 23:03:26,727 DEBUG arctic.store.version_store Checking symbol
2021-01-15 23:03:26,739 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-15 23:03:26,747 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-15 23:03:26,751 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-15 23:03:26,757 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:26,798 INFO arctic.scripts.arctic_fsck Stats:
2021-01-15 23:03:26,798 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-15 23:03:26,802 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-15 23:03:26,802 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:26,803 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-15 23:03:26,803 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-15 23:03:26,804 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-15 23:03:26,804 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-15 23:03:26,804 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.223.246.167:3877
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.223.246.167:3877 (127.223.246.167:3877)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.223.246.167:3877', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:03:27,005 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 7925 (total_procs_to_kill=1)
2021-01-15 23:03:27,006 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:03:27,008 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:03:27,035 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:03:27,036 DEBUG pytest_shutil.workspace 
2021-01-15 23:03:27,036 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:27,037 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpir534yri
2021-01-15 23:03:27,037 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:03:27,037 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 7925 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpir534yri
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____________________ test_fix_broken_snapshot_references ______________________

library = <VersionStore at 0x7efe395b9400>
    <ArcticLibrary at 0x7efe395b92e8, arctic_test.TEST>
        <Arctic at 0x7efe395b9828, connected to MongoClient(host=['127.223.246.167:5407'], document_class=dict, tz_aware=False, connect=True)>

    def test_fix_broken_snapshot_references(library):
        library.write("cherry", "blob")
        one_day_ago = time.time() - (3600 * 24.) - 10  # make sure we are a few seconds before 24 hours
        with patch('time.time', return_value=one_day_ago):
            library.snapshot("snappy")
        library._snapshots.delete_one({"name": "snappy"})
    
        mpv.prune_versions(library, ["cherry"], 10)
    
>       assert library._versions.find_one({"symbol": "cherry"}).get("parent", []) == []
E       AssertionError: assert [ObjectId('60...f11cbddc3ee')] == []
E         Left contains one more item: ObjectId('60013103a67c9f11cbddc3ee')
E         Use -v to get the full diff

tests/integration/scripts/test_prune_versions.py:63: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:07:04.982-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:07:04.986-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:07:04.986-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:07:04.988-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11118,"port":5407,"dbPath":"/tmp/tmpppzf7c4x","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:07:04.988-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:07:04.988-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:07:04.988-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":5407,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpppzf7c4x","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:07:04.990-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:07:04.990-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:07:07.437-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777227:437949][11118:0x7fbaa2baca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:07:07.438-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777227:438103][11118:0x7fbaa2baca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:07:07.486-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2495}}
{"t":{"$date":"2021-01-15T23:07:07.486-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:07.549-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:07:07.549-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:07:07.567-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:07:07.569-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"f30ccd8a-6572-49b7-a920-d7d75328a8e3"}},"options":{"uuid":{"$uuid":"f30ccd8a-6572-49b7-a920-d7d75328a8e3"}}}}
{"t":{"$date":"2021-01-15T23:07:07.639-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:07.639-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:07:07.640-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:07:07.643-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a27759ce-5a6e-49fc-938e-307171161ac8"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:07:07.707-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:07.708-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpppzf7c4x/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:07:07.714-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:07:07.714-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4fa45ac0-49bf-4bd0-b10f-db0156504b39"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:07.714-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:07:07.714-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":5407,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:07:07.815-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:07.815-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:07.815-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:07:07.970-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:55804","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:07.974-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:55806","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.182-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:55808","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.187-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:55810","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.187-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:55812","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.199-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:55814","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.208-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:55816","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.210-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:55818","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:08.222-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b87dd7a4-22db-4db8-ac43-1f4a3de2dbe9"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.292-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.295-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b19b3c47-56e1-4a96-ad00-1375973a8f74"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"b87dd7a4-22db-4db8-ac43-1f4a3de2dbe9"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:07:08.321-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.322-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b19b3c47-56e1-4a96-ad00-1375973a8f74"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:08.322-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b19b3c47-56e1-4a96-ad00-1375973a8f74"}}}}
{"t":{"$date":"2021-01-15T23:07:08.328-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6116ce37-85a4-4b62-ad83-bfc5324deedb"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.398-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.402-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"00793b4b-7bf5-4d2b-bd39-baee88fdda22"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.474-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:07:08.551-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.551-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.552-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.snapshots","command":{"createIndexes":"TEST.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"545e6116-b69d-444a-984d-3beca0a30e6a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":149}}
{"t":{"$date":"2021-01-15T23:07:08.554-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"90c7f855-006a-4852-b995-caba184d510a"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.652-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.653-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.656-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0630706b-4fe4-4910-87d5-b83793dcef09"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"90c7f855-006a-4852-b995-caba184d510a"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:07:08.687-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:07:08.689-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.689-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0630706b-4fe4-4910-87d5-b83793dcef09"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:08.689-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0630706b-4fe4-4910-87d5-b83793dcef09"}}}}
{"t":{"$date":"2021-01-15T23:07:08.692-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9d7dd282-975a-4f3e-ab71-a92c12ea0a4d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.790-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.790-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.793-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ff60ee67-29f7-4f4a-8083-ec79e5a9e4c3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:08.893-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.893-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.893-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST","command":{"createIndexes":"TEST","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"545e6116-b69d-444a-984d-3beca0a30e6a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-15T23:07:08.896-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6d6872f9-4045-4a09-a992-ab29b25bf9cd"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"ff60ee67-29f7-4f4a-8083-ec79e5a9e4c3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:07:08.930-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.930-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6d6872f9-4045-4a09-a992-ab29b25bf9cd"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:08.930-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6d6872f9-4045-4a09-a992-ab29b25bf9cd"}}}}
{"t":{"$date":"2021-01-15T23:07:08.933-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e8adfd7b-f50c-478d-b460-1686cd6e07cc"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"ff60ee67-29f7-4f4a-8083-ec79e5a9e4c3"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:07:08.964-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:08.964-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e8adfd7b-f50c-478d-b460-1686cd6e07cc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:08.964-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e8adfd7b-f50c-478d-b460-1686cd6e07cc"}}}}
{"t":{"$date":"2021-01-15T23:07:08.966-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b04889d5-78de-4111-b28f-b00b0d0e2c3a"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"ff60ee67-29f7-4f4a-8083-ec79e5a9e4c3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:07:09.003-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:09.003-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b04889d5-78de-4111-b28f-b00b0d0e2c3a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:09.003-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b04889d5-78de-4111-b28f-b00b0d0e2c3a"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:07:04,873 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:04,873 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:04,874 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpppzf7c4x
2021-01-15 23:07:04,875 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:07:04,875 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:04,876 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:04,877 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:07:04,903 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=5407 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpppzf7c4x
2021-01-15 23:07:04,904 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:07:04,906 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:07:04,906 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:05,520 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:07:05,522 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:06,134 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:07:06,135 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:06,747 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:07:06,748 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:07,458 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:07:07,459 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:08,169 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:07:08,169 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5407
2021-01-15 23:07:08,200 DEBUG pytest_server_fixtures.base2 waited 0:00:03.293918 for server to start successfully
2021-01-15 23:07:08,201 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:07:08,203 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:07:09,028 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:07:09,034 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpppzf7c4x
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=5407 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpppzf7c4x
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5407
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.293918 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:07:09,104 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-15 23:07:09,118 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-15 23:07:09,137 INFO arctic.scripts.arctic_prune_versions Fixing snapshot pointers
2021-01-15 23:07:09,138 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_test.TEST
2021-01-15 23:07:09,144 INFO arctic.scripts.arctic_prune_versions Pruning cherry
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:16 Fixing snapshot pointers
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_test.TEST
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:19 Pruning cherry
--------------------------- Captured stdout teardown ---------------------------
{"t":{"$date":"2021-01-15T23:07:09.209-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn6","msg":"Interrupted operation as its client disconnected","attr":{"opId":23}}
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:07:09,218 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11118 (total_procs_to_kill=1)
2021-01-15 23:07:09,219 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:07:09,221 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:07:09,235 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:07:09,237 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:09,237 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:09,239 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpppzf7c4x
2021-01-15 23:07:09,239 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:09,240 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11118 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpppzf7c4x
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
__________________________ test_keep_only_one_version __________________________

library = <VersionStore at 0x7efe396caac8>
    <ArcticLibrary at 0x7efe396ca860, arctic_test.TEST>
        <Arctic at 0x7efe395b9518, connected to MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True)>

    def test_keep_only_one_version(library):
        library.write("cherry", "blob")
        library.write("cherry", "blob")
        one_day_ago = time.time() - (3600 * 24.) - 10  # make sure we are a few seconds before 24 hours
        with patch('time.time', return_value=one_day_ago):
            library.snapshot("snappy")
        library._snapshots.delete_one({"name": "snappy"})
    
        mpv.prune_versions(library, ["cherry"], 0)
    
>       assert len(list(library._versions.find({"symbol": "cherry"}))) == 1
E       AssertionError: assert 2 == 1
E        +  where 2 = len([{'_id': ObjectId('60028291a67c9f11cbddc3f7'), 'arctic_version': 1080000, 'data': 'blob', 'metadata': None, ...}, {'_id': ObjectId('60028291a67c9f11cbddc3f6'), 'arctic_version': 1080000, 'data': 'blob', 'metadata': None, ...}])
E        +    where [{'_id': ObjectId('60028291a67c9f11cbddc3f7'), 'arctic_version': 1080000, 'data': 'blob', 'metadata': None, ...}, {'_id': ObjectId('60028291a67c9f11cbddc3f6'), 'arctic_version': 1080000, 'data': 'blob', 'metadata': None, ...}] = list(<pymongo.cursor.Cursor object at 0x7efe395e3f98>)
E        +      where <pymongo.cursor.Cursor object at 0x7efe395e3f98> = <bound method Collection.find of Collection(Database(MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True), 'arctic_test'), 'TEST.versions')>({'symbol': 'cherry'})
E        +        where <bound method Collection.find of Collection(Database(MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True), 'arctic_test'), 'TEST.versions')> = Collection(Database(MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True), 'arctic_test'), 'TEST.versions').find
E        +          where Collection(Database(MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True), 'arctic_test'), 'TEST.versions') = <VersionStore at 0x7efe396caac8>\n    <ArcticLibrary at 0x7efe396ca860, arctic_test.TEST>\n        <Arctic at 0x7efe395b9518, connected to MongoClient(host=['127.223.246.167:20342'], document_class=dict, tz_aware=False, connect=True)>._versions

tests/integration/scripts/test_prune_versions.py:76: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:07:09.359-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:07:09.366-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:07:09.366-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:07:09.367-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11180,"port":20342,"dbPath":"/tmp/tmpqd54xc5_","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:07:09.367-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:07:09.367-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:07:09.367-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":20342,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpqd54xc5_","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:07:09.369-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:07:09.370-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:07:11.791-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777231:791781][11180:0x7f734c05aa80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:07:11.791-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777231:791924][11180:0x7f734c05aa80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:07:11.840-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2470}}
{"t":{"$date":"2021-01-15T23:07:11.840-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:11.901-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:07:11.902-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:07:11.920-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:07:11.922-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"8f4dc0c0-8280-448d-910a-36c56bcade61"}},"options":{"uuid":{"$uuid":"8f4dc0c0-8280-448d-910a-36c56bcade61"}}}}
{"t":{"$date":"2021-01-15T23:07:11.991-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:11.991-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:07:11.992-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:07:11.993-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"57e5a3b9-5f49-41f8-8843-358ac9ac0e4f"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:07:12.064-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.065-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpqd54xc5_/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:07:12.070-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:07:12.070-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:07:12.071-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"96498c3b-3bda-4bf5-8549-20b48781f486"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:12.071-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":20342,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:07:12.170-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.170-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.351-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:48554","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.356-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:48556","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.562-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:48566","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.566-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:48568","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.569-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:48570","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.579-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:48572","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.587-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:48574","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.588-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:48576","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:07:12.599-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"85b60c3d-31a7-4450-83be-d61b3ade32ac"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:12.668-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.671-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ef181a40-dbb6-46ff-9db5-6502f1a231d6"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"85b60c3d-31a7-4450-83be-d61b3ade32ac"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:07:12.703-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.703-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ef181a40-dbb6-46ff-9db5-6502f1a231d6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:12.703-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ef181a40-dbb6-46ff-9db5-6502f1a231d6"}}}}
{"t":{"$date":"2021-01-15T23:07:12.709-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cae1bd30-a2b0-441b-9d75-0dd1afbd1e4c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:12.780-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.784-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1b2d6a7b-ed6a-4577-a476-59e89662340c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:12.856-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:07:12.900-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.900-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:12.900-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.snapshots","command":{"createIndexes":"TEST.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"daf7dc74-9d87-4183-9409-103bf774582e"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":115}}
{"t":{"$date":"2021-01-15T23:07:12.903-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4afe4d8a-7ecf-47d9-9ae7-bb7d9b1a214a"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:13.002-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.002-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.006-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"40621438-7cd5-46e9-85af-59658e3cf7a9"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"4afe4d8a-7ecf-47d9-9ae7-bb7d9b1a214a"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:07:13.040-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.040-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"40621438-7cd5-46e9-85af-59658e3cf7a9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:13.040-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"40621438-7cd5-46e9-85af-59658e3cf7a9"}}}}
{"t":{"$date":"2021-01-15T23:07:13.042-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9998696a-6076-42a8-a719-e774a4e92ab7"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:13.070-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-15T23:07:13.147-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.147-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.147-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.version_nums","command":{"createIndexes":"TEST.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"daf7dc74-9d87-4183-9409-103bf774582e"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":105}}
{"t":{"$date":"2021-01-15T23:07:13.150-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9f771547-4840-47d6-a984-3224c1fe9ced"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:07:13.251-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.251-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.251-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST","command":{"createIndexes":"TEST","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"daf7dc74-9d87-4183-9409-103bf774582e"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:07:13.254-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"5888b09b-f3f6-41cd-9cfe-d40436b57aa3"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"9f771547-4840-47d6-a984-3224c1fe9ced"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:07:13.290-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.290-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"5888b09b-f3f6-41cd-9cfe-d40436b57aa3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:13.290-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"5888b09b-f3f6-41cd-9cfe-d40436b57aa3"}}}}
{"t":{"$date":"2021-01-15T23:07:13.292-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"01e70cd9-b8fe-4e21-9158-5c9d2fc0ade2"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"9f771547-4840-47d6-a984-3224c1fe9ced"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:07:13.323-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.323-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"01e70cd9-b8fe-4e21-9158-5c9d2fc0ade2"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:13.323-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"01e70cd9-b8fe-4e21-9158-5c9d2fc0ade2"}}}}
{"t":{"$date":"2021-01-15T23:07:13.325-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e662d35e-bdcd-492b-8f8d-9ac0c064a8a0"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"9f771547-4840-47d6-a984-3224c1fe9ced"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:07:13.359-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:07:13.359-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e662d35e-bdcd-492b-8f8d-9ac0c064a8a0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:07:13.360-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e662d35e-bdcd-492b-8f8d-9ac0c064a8a0"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:07:09,250 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:09,250 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:09,251 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpqd54xc5_
2021-01-15 23:07:09,252 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:07:09,252 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:09,253 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:09,254 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:07:09,279 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=20342 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpqd54xc5_
2021-01-15 23:07:09,281 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:07:09,282 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:07:09,283 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:09,903 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:07:09,904 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:10,517 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:07:10,518 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:11,128 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:07:11,128 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:11,839 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:07:11,840 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:12,550 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:07:12,551 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:20342
2021-01-15 23:07:12,579 DEBUG pytest_server_fixtures.base2 waited 0:00:03.296954 for server to start successfully
2021-01-15 23:07:12,581 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:07:12,584 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:07:13,381 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:07:13,388 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpqd54xc5_
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=20342 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpqd54xc5_
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:20342
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.296954 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:07:13,451 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-15 23:07:13,464 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-15 23:07:13,475 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-15 23:07:13,493 INFO arctic.scripts.arctic_prune_versions Fixing snapshot pointers
2021-01-15 23:07:13,494 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_test.TEST
2021-01-15 23:07:13,502 INFO arctic.scripts.arctic_prune_versions Pruning cherry
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:16 Fixing snapshot pointers
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_test.TEST
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:19 Pruning cherry
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:07:13,571 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11180 (total_procs_to_kill=1)
2021-01-15 23:07:13,572 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:07:13,573 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:07:13,588 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:07:13,588 DEBUG pytest_shutil.workspace 
2021-01-15 23:07:13,589 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:13,589 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpqd54xc5_
2021-01-15 23:07:13,590 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:07:13,590 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11180 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpqd54xc5_
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____________ test_save_read_pandas_series_with_unicode_index_name _____________

library = <VersionStore at 0x7efe38f8d358>
    <ArcticLibrary at 0x7efe38f8d470, arctic_test.TEST>
        <Arctic at 0x7efe38f18a20, connected to MongoClient(host=['127.223.246.167:9228'], document_class=dict, tz_aware=False, connect=True)>

    def test_save_read_pandas_series_with_unicode_index_name(library):
        df = Series(data=['A', 'BC', 'DEF'],
                    index=MultiIndex.from_tuples([(np.datetime64(dt(2013, 1, 1)),),
                                                  (np.datetime64(dt(2013, 1, 2)),),
                                                  (np.datetime64(dt(2013, 1, 3)),)], names=[u'DATETIME']))
        library.write('pandas', df)
>       saved_df = library.read('pandas').data

tests/integration/store/test_pandas_store.py:75: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
arctic/store/version_store.py:369: in read
    date_range=date_range, read_preference=read_preference, **kwargs)
arctic/store/version_store.py:453: in _do_read
    data = handler.read(self._arctic_lib, version, symbol, from_version=from_version, **kwargs)
arctic/store/_pandas_ndarray_store.py:175: in read
    return self.SERIALIZER.deserialize(item, force_bytes_to_unicode=force_bytes_to_unicode)
arctic/serialization/numpy_records.py:233: in deserialize
    index = self._index_from_records(item)
arctic/serialization/numpy_records.py:99: in _index_from_records
    rtn = rtn.tz_localize('UTC').tz_convert(recarr.dtype.metadata['index_tz'])
.tox/dev36/lib/python3.6/site-packages/pandas/core/indexes/extension.py:78: in method
    result = attr(self._data, *args, **kwargs)
.tox/dev36/lib/python3.6/site-packages/pandas/core/arrays/datetimes.py:798: in tz_convert
    tz = timezones.maybe_get_tz(tz)
pandas/_libs/tslibs/timezones.pyx:91: in pandas._libs.tslibs.timezones.maybe_get_tz
    ???
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

>   ???
E   TypeError: <class 'list'>

pandas/_libs/tslibs/timezones.pyx:114: TypeError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:16:07.970-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:16:07.977-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:16:07.978-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:16:07.979-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":17402,"port":9228,"dbPath":"/tmp/tmpkoc6q7fb","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:16:07.979-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:16:07.979-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:16:07.979-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":9228,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpkoc6q7fb","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:16:07.981-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:16:07.981-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:16:10.426-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777770:426825][17402:0x7feb6731da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:16:10.426-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777770:426954][17402:0x7feb6731da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:16:10.475-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2494}}
{"t":{"$date":"2021-01-15T23:16:10.475-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:10.535-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:16:10.536-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:16:10.557-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:16:10.558-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"2ae28e84-443d-4a5a-b37e-96595d0284c5"}},"options":{"uuid":{"$uuid":"2ae28e84-443d-4a5a-b37e-96595d0284c5"}}}}
{"t":{"$date":"2021-01-15T23:16:10.626-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:10.627-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:16:10.627-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:16:10.629-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"72e851bd-5edd-441d-b7ea-8d7af4897ee3"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:16:10.693-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:10.693-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpkoc6q7fb/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:16:10.698-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:16:10.698-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:16:10.698-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":9228,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:16:10.698-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"81fae258-12d3-4ac5-a1e7-95f6fd1ba200"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:10.796-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:10.796-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:10.960-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:45008","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:10.964-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:45010","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.168-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:45012","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.173-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:45014","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.174-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:45016","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.186-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:45018","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.194-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:45020","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.195-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:45022","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:11.206-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d9cb6ff6-85dc-4eb9-960d-5ae2a692e013"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.275-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.278-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"9faefef5-87d1-468d-9ccb-696c449839bf"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"d9cb6ff6-85dc-4eb9-960d-5ae2a692e013"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:16:11.310-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.310-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"9faefef5-87d1-468d-9ccb-696c449839bf"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:11.310-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"9faefef5-87d1-468d-9ccb-696c449839bf"}}}}
{"t":{"$date":"2021-01-15T23:16:11.316-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3aa175f4-03e7-47c1-8afc-91c1c2d1657d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.386-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.390-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"12b3aa8f-323e-4377-bff9-021a3e8e010e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.464-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:16:11.508-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.508-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.508-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.snapshots","command":{"createIndexes":"TEST.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"16937f79-d450-4219-9f78-e19ea0ee344a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":118}}
{"t":{"$date":"2021-01-15T23:16:11.510-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3a6890f8-8d83-46eb-b652-71f7a2b3cadb"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.609-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.609-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.612-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a58e5c92-b2f7-44c6-86f3-379257c17ced"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"3a6890f8-8d83-46eb-b652-71f7a2b3cadb"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:16:11.645-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.645-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a58e5c92-b2f7-44c6-86f3-379257c17ced"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:11.645-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a58e5c92-b2f7-44c6-86f3-379257c17ced"}}}}
{"t":{"$date":"2021-01-15T23:16:11.648-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"72a130a5-0562-484d-b522-590602e6aa93"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.674-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:16:11.749-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.749-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.749-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.version_nums","command":{"createIndexes":"TEST.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"16937f79-d450-4219-9f78-e19ea0ee344a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:16:11.752-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bec4a15c-6286-4f89-9be1-71587b2165a3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:11.853-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.853-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.854-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST","command":{"createIndexes":"TEST","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"16937f79-d450-4219-9f78-e19ea0ee344a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-15T23:16:11.856-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"5377594e-7623-42f1-8239-6133a5123eab"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bec4a15c-6286-4f89-9be1-71587b2165a3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:16:11.891-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.891-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"5377594e-7623-42f1-8239-6133a5123eab"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:11.891-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"5377594e-7623-42f1-8239-6133a5123eab"}}}}
{"t":{"$date":"2021-01-15T23:16:11.894-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"663af03d-81f3-4ebf-88b1-ec2333d0e9f5"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bec4a15c-6286-4f89-9be1-71587b2165a3"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:16:11.924-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.925-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"663af03d-81f3-4ebf-88b1-ec2333d0e9f5"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:11.925-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"663af03d-81f3-4ebf-88b1-ec2333d0e9f5"}}}}
{"t":{"$date":"2021-01-15T23:16:11.927-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"981f3548-8964-4985-8e2e-765c389c9051"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bec4a15c-6286-4f89-9be1-71587b2165a3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:16:11.961-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:11.961-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"981f3548-8964-4985-8e2e-765c389c9051"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:11.961-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"981f3548-8964-4985-8e2e-765c389c9051"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:16:07,867 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:07,868 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:07,869 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpkoc6q7fb
2021-01-15 23:16:07,869 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:16:07,869 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:07,870 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:07,871 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:16:07,897 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=9228 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpkoc6q7fb
2021-01-15 23:16:07,898 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:16:07,900 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:16:07,900 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:08,515 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:16:08,516 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:09,127 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:16:09,128 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:09,738 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:16:09,738 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:10,448 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:16:10,449 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:11,159 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:16:11,159 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:9228
2021-01-15 23:16:11,186 DEBUG pytest_server_fixtures.base2 waited 0:00:03.286661 for server to start successfully
2021-01-15 23:16:11,187 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:16:11,190 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:16:11,985 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:16:11,992 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpkoc6q7fb
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=9228 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpkoc6q7fb
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:9228
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.286661 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:16:12,082 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-15 23:16:12,095 INFO arctic.serialization.numpy_records Series has no name, defaulting to 'values'
2021-01-15 23:16:12,097 INFO arctic.serialization.numpy_records Series has no name, defaulting to 'values'
2021-01-15 23:16:12,109 DEBUG arctic.store.version_store Finished writing versions for pandas
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
INFO     arctic.serialization.numpy_records:numpy_records.py:227 Series has no name, defaulting to 'values'
INFO     arctic.serialization.numpy_records:numpy_records.py:227 Series has no name, defaulting to 'values'
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for pandas
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:16:12,873 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 17402 (total_procs_to_kill=1)
2021-01-15 23:16:12,874 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:16:12,876 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:16:12,905 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:16:12,906 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:12,907 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:12,907 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpkoc6q7fb
2021-01-15 23:16:12,908 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:12,909 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 17402 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpkoc6q7fb
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
___________ test_save_read_pandas_dataframe_with_unicode_index_name ____________

library = <VersionStore at 0x7efdefdb3b70>
    <ArcticLibrary at 0x7efdefdb3940, arctic_test.TEST>
        <Arctic at 0x7efdef6d3c50, connected to MongoClient(host=['127.223.246.167:8028'], document_class=dict, tz_aware=False, connect=True)>

    def test_save_read_pandas_dataframe_with_unicode_index_name(library):
        df = DataFrame(data=['A', 'BC', 'DEF'],
                       index=MultiIndex.from_tuples([(np.datetime64(dt(2013, 1, 1)),),
                                                     (np.datetime64(dt(2013, 1, 2)),),
                                                     (np.datetime64(dt(2013, 1, 3)),)], names=[u'DATETIME']))
        library.write('pandas', df)
>       saved_df = library.read('pandas').data

tests/integration/store/test_pandas_store.py:99: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
arctic/store/version_store.py:369: in read
    date_range=date_range, read_preference=read_preference, **kwargs)
arctic/store/version_store.py:453: in _do_read
    data = handler.read(self._arctic_lib, version, symbol, from_version=from_version, **kwargs)
arctic/store/_pandas_ndarray_store.py:205: in read
    return self.SERIALIZER.deserialize(item, force_bytes_to_unicode=force_bytes_to_unicode)
arctic/serialization/numpy_records.py:286: in deserialize
    index = self._index_from_records(item)
arctic/serialization/numpy_records.py:99: in _index_from_records
    rtn = rtn.tz_localize('UTC').tz_convert(recarr.dtype.metadata['index_tz'])
.tox/dev36/lib/python3.6/site-packages/pandas/core/indexes/extension.py:78: in method
    result = attr(self._data, *args, **kwargs)
.tox/dev36/lib/python3.6/site-packages/pandas/core/arrays/datetimes.py:798: in tz_convert
    tz = timezones.maybe_get_tz(tz)
pandas/_libs/tslibs/timezones.pyx:91: in pandas._libs.tslibs.timezones.maybe_get_tz
    ???
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

>   ???
E   TypeError: <class 'list'>

pandas/_libs/tslibs/timezones.pyx:114: TypeError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:16:21.753-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:16:21.758-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:16:21.759-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:16:21.760-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":17575,"port":8028,"dbPath":"/tmp/tmpns9wkypx","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:16:21.760-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:16:21.760-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:16:21.760-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":8028,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpns9wkypx","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:16:21.762-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:16:21.762-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:16:24.166-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777784:166876][17575:0x7fe2e2734a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:16:24.167-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610777784:167011][17575:0x7fe2e2734a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:16:24.210-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2448}}
{"t":{"$date":"2021-01-15T23:16:24.210-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:24.276-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:16:24.276-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:16:24.294-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:16:24.296-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"711d81ef-0e52-4a87-a72a-30d52306881b"}},"options":{"uuid":{"$uuid":"711d81ef-0e52-4a87-a72a-30d52306881b"}}}}
{"t":{"$date":"2021-01-15T23:16:24.366-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:24.366-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:16:24.367-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:16:24.369-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3a24f1f9-06ef-4112-9210-d7a2643dcfcf"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:16:24.429-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:24.430-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpns9wkypx/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:16:24.434-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:16:24.434-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":8028,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:16:24.434-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:16:24.435-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"aa2f9504-fc0c-4c9a-962d-d32c5aad95e8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:24.534-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:24.534-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:24.735-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:45988","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.739-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:45990","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.943-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:45992","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.947-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:45994","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.957-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:45996","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.964-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:45998","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.972-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:46000","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.973-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:46002","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:16:24.983-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"21c274ef-764c-47dd-9096-00fb202156f9"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.059-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.063-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"95d2d1d8-dc70-48c6-bd7c-0f17efc149dd"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"21c274ef-764c-47dd-9096-00fb202156f9"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:16:25.090-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.090-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"95d2d1d8-dc70-48c6-bd7c-0f17efc149dd"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:25.090-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"95d2d1d8-dc70-48c6-bd7c-0f17efc149dd"}}}}
{"t":{"$date":"2021-01-15T23:16:25.096-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f9110dd6-9ffe-4833-bb46-73036b20bf34"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.168-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.172-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6211ac19-650f-4290-9ac6-91a06a1eeebf"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.240-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:16:25.300-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.300-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.300-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.snapshots","command":{"createIndexes":"TEST.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"f2082884-f734-4f0f-910b-9f2479942af2"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":127}}
{"t":{"$date":"2021-01-15T23:16:25.302-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c104fa88-ba8b-4aba-b00f-0de5b7467e98"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.399-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.399-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.402-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"96bebab6-a335-4f3b-942b-41b0299a77b6"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"c104fa88-ba8b-4aba-b00f-0de5b7467e98"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-15T23:16:25.438-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.438-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"96bebab6-a335-4f3b-942b-41b0299a77b6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:25.438-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"96bebab6-a335-4f3b-942b-41b0299a77b6"}}}}
{"t":{"$date":"2021-01-15T23:16:25.441-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a3127ac2-b30e-4b5d-8189-59237d92a958"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.448-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-15T23:16:25.540-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.540-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.542-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bea2cf72-774c-4933-87b9-71d7f1298feb"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:16:25.642-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.642-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.644-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c530610f-252c-43c1-8996-d22d9c85ff65"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bea2cf72-774c-4933-87b9-71d7f1298feb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-15T23:16:25.678-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.678-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c530610f-252c-43c1-8996-d22d9c85ff65"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:25.678-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c530610f-252c-43c1-8996-d22d9c85ff65"}}}}
{"t":{"$date":"2021-01-15T23:16:25.681-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"514542d3-ed0d-47c2-a1f7-a6dad485699d"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bea2cf72-774c-4933-87b9-71d7f1298feb"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:16:25.707-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.707-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"514542d3-ed0d-47c2-a1f7-a6dad485699d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:25.708-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"514542d3-ed0d-47c2-a1f7-a6dad485699d"}}}}
{"t":{"$date":"2021-01-15T23:16:25.711-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"79159011-252d-446c-9932-42ad719b411c"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"bea2cf72-774c-4933-87b9-71d7f1298feb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-15T23:16:25.748-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:16:25.748-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"79159011-252d-446c-9932-42ad719b411c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:16:25.748-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"79159011-252d-446c-9932-42ad719b411c"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:16:21,636 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:21,637 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:21,638 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpns9wkypx
2021-01-15 23:16:21,639 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:16:21,639 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:21,640 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:21,641 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:16:21,671 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=8028 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpns9wkypx
2021-01-15 23:16:21,673 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:16:21,675 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:16:21,676 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:22,291 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:16:22,292 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:22,902 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:16:22,903 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:23,513 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:16:23,514 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:24,223 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:16:24,224 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:24,934 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:16:24,935 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:8028
2021-01-15 23:16:24,963 DEBUG pytest_server_fixtures.base2 waited 0:00:03.287966 for server to start successfully
2021-01-15 23:16:24,965 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:16:24,970 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:16:25,773 INFO arctic.store.version_store Trying to enable sharding...
2021-01-15 23:16:25,779 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpns9wkypx
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=8028 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpns9wkypx
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:8028
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.287966 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:16:25,852 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-15 23:16:25,861 INFO arctic.serialization.numpy_records Dataframe column names converted to strings
2021-01-15 23:16:25,864 INFO arctic.serialization.numpy_records Dataframe column names converted to strings
2021-01-15 23:16:25,876 DEBUG arctic.store.version_store Finished writing versions for pandas
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
INFO     arctic.serialization.numpy_records:numpy_records.py:272 Dataframe column names converted to strings
INFO     arctic.serialization.numpy_records:numpy_records.py:272 Dataframe column names converted to strings
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for pandas
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:16:26,936 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 17575 (total_procs_to_kill=1)
2021-01-15 23:16:26,936 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:16:26,938 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:16:26,953 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:16:26,954 DEBUG pytest_shutil.workspace 
2021-01-15 23:16:26,954 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:26,955 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpns9wkypx
2021-01-15 23:16:26,955 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:16:26,956 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 17575 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpns9wkypx
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_return_data_when_date_range_falls_in_a_single_underlying_library _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7efdef38e198>
arctic = <Arctic at 0x7efdef30f780, connected to MongoClient(host=['127.223.246.167:30263'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_falls_in_a_single_underlying_library(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        tstore = arctic['FEED_2010.LEVEL1']
        arctic.initialize_library('test_current.toplevel_tickstore', tickstore.TICK_STORE_TYPE)
        tickstore_current = arctic['test_current.toplevel_tickstore']
        toplevel_tickstore._collection.insert_one({'start': dt(2010, 1, 1),
                                               'end': dt(2010, 12, 31, 23, 59, 59),
                                               'library_name': 'FEED_2010.LEVEL1'})
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tstore.write('blah', df)
        tickstore_current.write('blah', df)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 1), end=dt(2010, 1, 6)), list('ABCD'))
    
>       assert_frame_equal(df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (6, 4)
E       [right]: (5, 4)

tests/integration/tickstore/test_toplevel.py:65: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:46:41.243-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:46:41.245-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:46:41.245-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:46:41.246-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":9930,"port":30263,"dbPath":"/tmp/tmp3d8ovw7d","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:46:41.246-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:46:41.246-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:46:41.246-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":30263,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp3d8ovw7d","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:46:41.247-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:41.247-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:46:41.960-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779601:960410][9930:0x7f73b97c2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:41.960-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779601:960464][9930:0x7f73b97c2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:42.006-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-15T23:46:42.006-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.070-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:46:42.070-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:46:42.092-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:42.093-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"797d0be5-6cb8-4daa-8f06-6ccd07454e5c"}},"options":{"uuid":{"$uuid":"797d0be5-6cb8-4daa-8f06-6ccd07454e5c"}}}}
{"t":{"$date":"2021-01-15T23:46:42.158-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.158-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:46:42.159-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:46:42.159-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"df31098f-143d-4c25-bd54-59471d226f2b"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:46:42.220-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.221-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp3d8ovw7d/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:46:42.222-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:46:42.222-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:46:42.222-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":30263,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:46:42.222-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1b8395ba-8710-480f-a875-8bf8895aa205"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.313-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:56246","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.314-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:56248","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.314-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.314-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.417-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:56250","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.418-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:56252","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.418-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:56254","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.422-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:56256","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.423-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:56258","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.423-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:56260","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:42.426-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c66570ac-b032-4f63-8e0f-a87aa8a4fc36"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.489-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.490-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"eb3eea05-7667-41a6-b197-647afd2d5a7e"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"c66570ac-b032-4f63-8e0f-a87aa8a4fc36"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:46:42.520-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.520-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"eb3eea05-7667-41a6-b197-647afd2d5a7e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:42.520-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"eb3eea05-7667-41a6-b197-647afd2d5a7e"}}}}
{"t":{"$date":"2021-01-15T23:46:42.522-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bc7f4f7f-2c16-46fd-811f-fa3decc5c91a"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.587-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.592-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"47f5742e-4fd3-48fb-b921-7a4527539588"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.706-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.706-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.706-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"dc5f7485-3872-4675-9740-65d22492d502"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":113}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp3d8ovw7d
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:41,189 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:41,190 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:46:41,203 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=30263 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3d8ovw7d
2021-01-15 23:46:41,204 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:46:41,204 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:46:41,204 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30263
2021-01-15 23:46:41,809 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:46:41,809 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30263
2021-01-15 23:46:42,412 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:46:42,413 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:30263
2021-01-15 23:46:42,421 DEBUG pytest_server_fixtures.base2 waited 0:00:01.216386 for server to start successfully
2021-01-15 23:46:42,421 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:46:42,421 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:46:42,590 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp3d8ovw7d
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=30263 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3d8ovw7d
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30263
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30263
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:30263
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.216386 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:46:42.712-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f3fe0c7-5780-490d-af87-859befc20935"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.772-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.773-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1f86c01e-2ae6-4c41-989a-d574ac9f5dae"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.814-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:46:42.869-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.869-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.870-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a4e8ee53-575d-4438-97a8-af0930a3f59e"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"1f86c01e-2ae6-4c41-989a-d574ac9f5dae"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:42.897-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.897-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a4e8ee53-575d-4438-97a8-af0930a3f59e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:42.897-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a4e8ee53-575d-4438-97a8-af0930a3f59e"}}}}
{"t":{"$date":"2021-01-15T23:46:42.898-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5c133f80-5616-4772-8015-491936ae7635"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:42.918-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:46:42.991-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.991-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:42.996-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f0bed3a7-060b-4bf4-a600-aab97a9eee76"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:43.060-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:43.061-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f216ccd6-ccaf-46be-9536-2f031c2cb71f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:43.145-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:43.145-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:43.146-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4e35fd0a-b370-4f29-9ab2-a5a732ad9999"}},"namespace":"arctic_test_current.toplevel_tickstore","collectionUUID":{"uuid":{"$uuid":"f216ccd6-ccaf-46be-9536-2f031c2cb71f"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:43.175-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:43.175-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4e35fd0a-b370-4f29-9ab2-a5a732ad9999"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:43.175-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4e35fd0a-b370-4f29-9ab2-a5a732ad9999"}}}}
{"t":{"$date":"2021-01-15T23:46:43.176-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4e13f501-a9ef-45c1-a975-6548e160de09"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:43.262-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:43.262-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:46:43,273 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:43,276 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001143: approx 87489063 ticks/sec
2021-01-15 23:46:43,278 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:43,281 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000991: approx 100908173 ticks/sec
2021-01-15 23:46:43,289 INFO arctic.tickstore.tickstore Got data in 0.005476 secs, creating DataFrame...
2021-01-15 23:46:43,290 INFO arctic.tickstore.tickstore 6 rows in 0.007182 secs: 835 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001143: approx 87489063 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000991: approx 100908173 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.005476 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.007182 secs: 835 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:46:43,340 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 9930 (total_procs_to_kill=1)
2021-01-15 23:46:43,340 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:46:43,341 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:46:43,348 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:46:43,348 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:43,348 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:43,349 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp3d8ovw7d
2021-01-15 23:46:43,349 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:43,349 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 9930 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp3d8ovw7d
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
___________ test_should_return_data_when_date_range_spans_libraries ____________

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7efdef20c208>
arctic = <Arctic at 0x7efdef29c7b8, connected to MongoClient(host=['127.223.246.167:6455'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_spans_libraries(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        tickstore_2010 = arctic['FEED_2010.LEVEL1']
        tickstore_2011 = arctic['FEED_2011.LEVEL1']
        toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')
        toplevel_tickstore.add(DateRange(start=dt(2011, 1, 1), end=dt(2011, 12, 31, 23, 59, 59, 999000)), 'FEED_2011.LEVEL1')
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df_10 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2010.write('blah', df_10)
        dates = pd.date_range('20110101', periods=6, tz=mktz('Europe/London'))
        df_11 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2011.write('blah', df_11)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 2), end=dt(2011, 1, 4)), list('ABCD'))
        expected_df = pd.concat([df_10[1:], df_11[:4]])
>       assert_frame_equal(expected_df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (9, 4)
E       [right]: (7, 4)

tests/integration/tickstore/test_toplevel.py:83: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:46:43.432-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:46:43.436-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:46:43.436-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:46:43.437-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":9987,"port":6455,"dbPath":"/tmp/tmp8tihlnks","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:46:43.437-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:46:43.437-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:46:43.437-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":6455,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp8tihlnks","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:46:43.439-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:43.439-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:46:45.709-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779605:709435][9987:0x7f393fe8ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:45.709-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779605:709518][9987:0x7f393fe8ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:45.752-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":2313}}
{"t":{"$date":"2021-01-15T23:46:45.752-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:45.817-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:46:45.817-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:46:45.835-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:45.835-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"d02ad1ef-118c-4900-84ff-7f9503ec6e73"}},"options":{"uuid":{"$uuid":"d02ad1ef-118c-4900-84ff-7f9503ec6e73"}}}}
{"t":{"$date":"2021-01-15T23:46:45.902-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:45.902-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:46:45.902-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:46:45.903-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3c0a4f43-1dbb-4aa0-88eb-a28a9860d621"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:46:45.960-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:45.960-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp8tihlnks/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:46:45.962-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:46:45.962-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:46:45.962-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":6455,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:46:45.962-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"852b29ad-db9b-4c92-b608-8fdce754650e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:46.056-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.056-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.416-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:54382","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.418-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:54384","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.623-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:54386","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.626-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:54388","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.626-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:54390","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.630-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:54392","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.632-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:54394","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.632-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:54396","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:46.636-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e64e58a6-754e-41b0-b4ca-3f9153607dc8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:46.705-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.706-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0ae21810-7f76-4eb3-b7f4-fcd996979c51"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"e64e58a6-754e-41b0-b4ca-3f9153607dc8"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:46:46.731-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.731-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0ae21810-7f76-4eb3-b7f4-fcd996979c51"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:46.731-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0ae21810-7f76-4eb3-b7f4-fcd996979c51"}}}}
{"t":{"$date":"2021-01-15T23:46:46.733-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d980f5c7-1468-44ce-b40a-8c811e356b45"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:46.800-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.804-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fe55a34e-e870-4854-932f-c8248d0669c8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:46.918-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-15T23:46:46.921-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.921-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.921-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"10985cc8-5f2b-4432-a70d-b400e7bd8885"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":116}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:46:43,354 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:43,355 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:43,355 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp8tihlnks
2021-01-15 23:46:43,355 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:46:43,356 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:43,356 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:43,356 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:46:43,374 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=6455 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp8tihlnks
2021-01-15 23:46:43,375 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:46:43,375 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:46:43,376 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:43,983 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:46:43,983 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:44,592 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:46:44,593 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:45,201 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:46:45,202 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:45,911 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-15 23:46:45,911 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:46,616 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (6 of 28)
2021-01-15 23:46:46,616 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:6455
2021-01-15 23:46:46,630 DEBUG pytest_server_fixtures.base2 waited 0:00:03.254437 for server to start successfully
2021-01-15 23:46:46,630 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:46:46,631 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:46:46,802 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp8tihlnks
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=6455 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp8tihlnks
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (6 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:6455
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:03.254437 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:46:46.926-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9008add0-c91d-4519-800c-0f3e564e8a7e"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:46.983-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:46.984-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ca3f9d31-c174-4fed-88c6-b0ec12959828"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:47.085-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.085-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.085-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"10985cc8-5f2b-4432-a70d-b400e7bd8885"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":101}}
{"t":{"$date":"2021-01-15T23:46:47.086-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a61336ac-d98f-4b0c-9496-5084fbcdf574"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"ca3f9d31-c174-4fed-88c6-b0ec12959828"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:47.112-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.112-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a61336ac-d98f-4b0c-9496-5084fbcdf574"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:47.112-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a61336ac-d98f-4b0c-9496-5084fbcdf574"}}}}
{"t":{"$date":"2021-01-15T23:46:47.113-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"66f85f98-2769-443d-9f32-a9c025e64f1c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:47.126-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:46:47.204-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.204-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.207-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ca1c2a06-897a-43ee-8b74-a0c640daa338"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:47.274-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.275-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7cec2106-0afa-4c88-ae61-0232e0d91eef"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:47.363-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.363-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.364-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f51c45ba-a8f7-4655-a1e2-0ddf5c33d6dc"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"7cec2106-0afa-4c88-ae61-0232e0d91eef"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:47.389-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.389-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f51c45ba-a8f7-4655-a1e2-0ddf5c33d6dc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:47.389-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f51c45ba-a8f7-4655-a1e2-0ddf5c33d6dc"}}}}
{"t":{"$date":"2021-01-15T23:46:47.390-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fd23d2a4-9388-46d5-9bc5-69de7a084582"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:47.474-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:47.474-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:46:47,485 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:47,487 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000831: approx 120336943 ticks/sec
2021-01-15 23:46:47,490 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:47,492 DEBUG arctic.tickstore.tickstore 1 buckets in 0.00071: approx 140845070 ticks/sec
2021-01-15 23:46:47,497 INFO arctic.tickstore.tickstore Got data in 0.003796 secs, creating DataFrame...
2021-01-15 23:46:47,498 INFO arctic.tickstore.tickstore 6 rows in 0.004953 secs: 1211 ticks/sec
2021-01-15 23:46:47,502 INFO arctic.tickstore.tickstore Got data in 0.003528 secs, creating DataFrame...
2021-01-15 23:46:47,504 INFO arctic.tickstore.tickstore 6 rows in 0.004608 secs: 1302 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000831: approx 120336943 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.00071: approx 140845070 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003796 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004953 secs: 1211 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003528 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004608 secs: 1302 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:46:47,537 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 9987 (total_procs_to_kill=1)
2021-01-15 23:46:47,537 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:46:47,538 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:46:47,545 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:46:47,545 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:47,545 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:47,545 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp8tihlnks
2021-01-15 23:46:47,546 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:47,546 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 9987 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp8tihlnks
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7efdef29c908>
arctic = <Arctic at 0x7efdef2ca748, connected to MongoClient(host=['127.223.246.167:26952'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        tickstore_2010 = arctic['FEED_2010.LEVEL1']
        tickstore_2011 = arctic['FEED_2011.LEVEL1']
        toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')
        toplevel_tickstore.add(DateRange(start=dt(2011, 1, 1), end=dt(2011, 12, 31, 23, 59, 59, 999000)), 'FEED_2011.LEVEL1')
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df_10 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2010.write('blah', df_10)
        dates = pd.date_range('20110201', periods=6, tz=mktz('Europe/London'))
        df_11 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2011.write('blah', df_11)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 2), end=dt(2011, 1, 4)), list('ABCD'))
        expected_df = df_10[1:]
>       assert_frame_equal(expected_df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (5, 4)
E       [right]: (4, 4)

tests/integration/tickstore/test_toplevel.py:101: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:46:47.604-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:46:47.609-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:46:47.609-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:46:47.609-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10044,"port":26952,"dbPath":"/tmp/tmpfrkuhlxy","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:46:47.610-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:46:47.610-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:46:47.610-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":26952,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpfrkuhlxy","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:46:47.610-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:47.610-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:46:48.322-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779608:322769][10044:0x7fdffe304a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:48.322-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779608:322825][10044:0x7fdffe304a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:48.370-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":760}}
{"t":{"$date":"2021-01-15T23:46:48.370-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.426-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:46:48.426-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:46:48.448-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:48.448-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"ffe1e75c-442f-4ab4-a7c4-520c116dc705"}},"options":{"uuid":{"$uuid":"ffe1e75c-442f-4ab4-a7c4-520c116dc705"}}}}
{"t":{"$date":"2021-01-15T23:46:48.514-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.514-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:46:48.514-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:46:48.515-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"47d98602-b866-44f9-a31d-98ebdd6af568"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:46:48.576-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.576-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpfrkuhlxy/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:46:48.577-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:46:48.577-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":26952,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:46:48.577-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:46:48.577-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"778d06c9-fc5e-4573-8def-af53878ae78c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:48.669-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.669-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.676-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:36324","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.677-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:36326","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.778-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:36328","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.780-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:36330","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.780-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:36332","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.786-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:36334","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.788-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:36336","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.788-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:36338","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:48.793-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e29d138f-7318-46c0-9e0b-16f4374358ce"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:48.857-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.858-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"be85d8ca-00d6-468b-af1e-57adbf4e201e"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"e29d138f-7318-46c0-9e0b-16f4374358ce"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:46:48.887-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.887-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"be85d8ca-00d6-468b-af1e-57adbf4e201e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:48.887-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"be85d8ca-00d6-468b-af1e-57adbf4e201e"}}}}
{"t":{"$date":"2021-01-15T23:46:48.889-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d503f0e8-d814-473e-8516-70de767184e3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:48.954-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:48.958-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"625b57ed-30f2-44e4-b1c7-9061e26ffcbf"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.076-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.076-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.076-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"e0184c35-5f93-484a-aa54-1574d64b7606"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":117}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:46:47,549 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:47,549 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:47,550 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpfrkuhlxy
2021-01-15 23:46:47,550 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:46:47,550 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:47,550 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:47,550 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:46:47,565 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=26952 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpfrkuhlxy
2021-01-15 23:46:47,566 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:46:47,566 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:46:47,567 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26952
2021-01-15 23:46:48,172 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:46:48,172 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26952
2021-01-15 23:46:48,775 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:46:48,776 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:26952
2021-01-15 23:46:48,785 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218173 for server to start successfully
2021-01-15 23:46:48,785 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:46:48,786 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:46:48,956 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpfrkuhlxy
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=26952 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpfrkuhlxy
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26952
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26952
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:26952
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218173 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:46:49.081-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b4e5bb18-deec-4713-b48d-64a80a7abffd"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.142-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.143-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7f063441-d643-462e-9bdb-5dcd109585ec"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.178-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:46:49.241-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.241-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.242-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"33ab8d69-7ae8-485c-a113-cf87cce3622e"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"7f063441-d643-462e-9bdb-5dcd109585ec"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:49.270-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.270-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"33ab8d69-7ae8-485c-a113-cf87cce3622e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:49.270-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"33ab8d69-7ae8-485c-a113-cf87cce3622e"}}}}
{"t":{"$date":"2021-01-15T23:46:49.270-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"12bf4f3e-cdba-44b0-980c-5e8992d5f71b"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.280-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:46:49.365-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.365-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.368-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e41adeb6-64bb-48e5-8076-789efbf4a348"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.433-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.434-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"693285da-282c-4015-b216-2747740f5e28"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.518-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.518-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.519-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"84ce87ba-1200-4147-84b0-f2a8fa7f1d84"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"693285da-282c-4015-b216-2747740f5e28"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:49.548-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.548-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"84ce87ba-1200-4147-84b0-f2a8fa7f1d84"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:49.548-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"84ce87ba-1200-4147-84b0-f2a8fa7f1d84"}}}}
{"t":{"$date":"2021-01-15T23:46:49.549-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3b868cb5-e3bd-42f1-ac00-7dc4ad0ef8c4"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:49.636-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:49.636-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:46:49,647 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:49,650 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000792: approx 126262626 ticks/sec
2021-01-15 23:46:49,652 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-15 23:46:49,654 DEBUG arctic.tickstore.tickstore 1 buckets in 0.00068: approx 147058823 ticks/sec
2021-01-15 23:46:49,659 INFO arctic.tickstore.tickstore Got data in 0.003765 secs, creating DataFrame...
2021-01-15 23:46:49,661 INFO arctic.tickstore.tickstore 6 rows in 0.004914 secs: 1221 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000792: approx 126262626 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.00068: approx 147058823 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003765 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004914 secs: 1221 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:46:49,694 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10044 (total_procs_to_kill=1)
2021-01-15 23:46:49,694 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:46:49,695 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:46:49,702 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:46:49,702 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:49,702 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:49,703 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpfrkuhlxy
2021-01-15 23:46:49,703 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:49,703 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10044 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpfrkuhlxy
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7efdef3b65f8>
arctic = <Arctic at 0x7efdef3b63c8, connected to MongoClient(host=['127.223.246.167:14302'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange(toplevel_tickstore, arctic):
        toplevel_tickstore._collection.insert_one({'library_name': 'FEED_2011.LEVEL1', 'start': dt(2011, 1, 1), 'end': dt(2011, 12, 31)})
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
>       toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')

tests/integration/tickstore/test_toplevel.py:113: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7efdef3b65f8>
date_range = DateRange(start=datetime.datetime(2010, 1, 1, 0, 0), end=datetime.datetime(2010, 12, 31, 23, 59, 59, 999000))
library_name = 'FEED_2010.LEVEL1'

        def add(self, date_range, library_name):
            """
            Adds the library with the given date range to the underlying collection of libraries used by this store.
            The underlying libraries should not overlap as the date ranges are assumed to be CLOSED_CLOSED by this function
            and the rest of the class.
    
            Arguments:
    
            date_range: A date range provided on the assumption that it is CLOSED_CLOSED. If for example the underlying
            libraries were split by year, the start of the date range would be datetime.datetime(year, 1, 1) and the end
            would be datetime.datetime(year, 12, 31, 23, 59, 59, 999000). The date range must fall on UTC day boundaries,
            that is the start must be add midnight and the end must be 1 millisecond before midnight.
    
            library_name: The name of the underlying library. This must be the name of a valid Arctic library
            """
            # check that the library is valid
            try:
                self._arctic_lib.arctic[library_name]
            except Exception as e:
                logger.error("Could not load library")
                raise e
            assert date_range.start and date_range.end, "Date range should have start and end properties {}".format(date_range)
            start = date_range.start.astimezone(mktz('UTC')) if date_range.start.tzinfo is not None else date_range.start.replace(tzinfo=mktz('UTC'))
            end = date_range.end.astimezone(mktz('UTC')) if date_range.end.tzinfo is not None else date_range.end.replace(tzinfo=mktz('UTC'))
            assert start.time() == time.min and end.time() == end_time_min, "Date range should fall on UTC day boundaries {}".format(date_range)
            # check that the date range does not overlap
            library_metadata = self._get_library_metadata(date_range)
            if len(library_metadata) > 1 or (len(library_metadata) == 1 and library_metadata[0] != library_name):
                raise OverlappingDataException("""There are libraries that overlap with the date range:
    library: {}
>   overlapping libraries: {}""".format(library_name, [lib.library for lib in library_metadata]))
E   arctic.exceptions.OverlappingDataException: There are libraries that overlap with the date range:
E   library: FEED_2010.LEVEL1
E   overlapping libraries: ['FEED_2011.LEVEL1']

arctic/tickstore/toplevel.py:101: OverlappingDataException
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:46:51.601-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:46:51.605-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:46:51.605-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:46:51.606-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10146,"port":14302,"dbPath":"/tmp/tmp7nmgb69k","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:46:51.606-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:46:51.606-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:46:51.606-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":14302,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp7nmgb69k","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:46:51.607-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:51.607-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:46:52.326-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779612:326028][10146:0x7f1fb933da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:52.326-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779612:326081][10146:0x7f1fb933da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:46:52.370-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":763}}
{"t":{"$date":"2021-01-15T23:46:52.370-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.433-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:46:52.433-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:46:52.451-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:46:52.452-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"fc157195-ee07-436b-85cd-a0d17f4aa9d8"}},"options":{"uuid":{"$uuid":"fc157195-ee07-436b-85cd-a0d17f4aa9d8"}}}}
{"t":{"$date":"2021-01-15T23:46:52.518-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.518-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:46:52.518-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:46:52.519-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7ebb9e79-d408-4643-84cd-7e3530fad559"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:46:52.578-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.579-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp7nmgb69k/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:46:52.580-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:46:52.580-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:46:52.580-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":14302,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:46:52.580-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"dc4da8cc-c470-4238-b95a-1068361b8a36"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:52.672-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:32968","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.673-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:32970","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.674-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.674-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.776-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:32972","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.778-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:32974","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.778-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:32976","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.782-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:32978","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.784-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:32980","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.784-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:32982","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:46:52.787-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b2efae74-a64f-40bc-8318-1bd5f2446563"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:52.854-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.855-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"25080250-6ea4-450b-bb01-e66973412643"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"b2efae74-a64f-40bc-8318-1bd5f2446563"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:46:52.880-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.880-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"25080250-6ea4-450b-bb01-e66973412643"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:52.880-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"25080250-6ea4-450b-bb01-e66973412643"}}}}
{"t":{"$date":"2021-01-15T23:46:52.882-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2f032bd6-f56b-49c8-887b-258b17bee9b5"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:52.947-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:52.952-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b663fbf9-9639-4e06-9085-929903a33da1"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:53.057-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.057-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.057-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"665be1e1-cf4e-425a-90cf-e2706294bc50"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":105}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:46:51,547 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:51,548 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:51,548 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp7nmgb69k
2021-01-15 23:46:51,548 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:46:51,548 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:51,548 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:51,549 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:46:51,563 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=14302 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp7nmgb69k
2021-01-15 23:46:51,563 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:46:51,564 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:46:51,564 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:14302
2021-01-15 23:46:52,168 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:46:52,168 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:14302
2021-01-15 23:46:52,772 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:46:52,772 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:14302
2021-01-15 23:46:52,782 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218330 for server to start successfully
2021-01-15 23:46:52,782 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:46:52,783 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-15 23:46:52,949 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp7nmgb69k
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=14302 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp7nmgb69k
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:14302
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:14302
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:14302
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218330 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:46:53.063-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d832ec5a-681d-40fa-83da-74547cf97330"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:53.122-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.123-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ad4da5e2-81f7-4309-ba1c-9b2013d61418"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:53.174-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:46:53.222-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.222-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.223-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"320ae71e-d849-4539-a47b-76747d6d916e"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"ad4da5e2-81f7-4309-ba1c-9b2013d61418"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:46:53.248-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.248-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"320ae71e-d849-4539-a47b-76747d6d916e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:46:53.248-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"320ae71e-d849-4539-a47b-76747d6d916e"}}}}
{"t":{"$date":"2021-01-15T23:46:53.249-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1b8b74f7-f9e1-4d06-8b5d-0654fc06c923"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:46:53.278-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-15T23:46:53.340-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:46:53.340-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:46:53,382 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10146 (total_procs_to_kill=1)
2021-01-15 23:46:53,382 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:46:53,382 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:46:53,390 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:46:53,390 DEBUG pytest_shutil.workspace 
2021-01-15 23:46:53,390 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:53,390 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp7nmgb69k
2021-01-15 23:46:53,390 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:46:53,390 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10146 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp7nmgb69k
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
________________ test_should_write_top_level_with_list_of_dicts ________________

arctic = <Arctic at 0x7efded7360f0, connected to MongoClient(host=['127.223.246.167:25319'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_write_top_level_with_list_of_dicts(arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED.LEVEL1', toplevel.TICK_STORE_TYPE)
        toplevel_tickstore = arctic['FEED.LEVEL1']
        dates = pd.date_range('20101201', periods=57, tz=mktz('Europe/London'))
        data = [{'index': dates[i], 'a': i} for i in range(len(dates))]
        expected = pd.DataFrame(np.arange(57, dtype=np.float64), index=dates, columns=list('a'))
        toplevel_tickstore.write('blah', data)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 12, 1), end=dt(2011, 2, 1)), columns=list('a'))
>       assert_frame_equal(expected, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (57, 1)
E       [right]: (55, 1)

tests/integration/tickstore/test_toplevel.py:197: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:47:10.116-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:47:10.118-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:47:10.119-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:47:10.119-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10561,"port":25319,"dbPath":"/tmp/tmp19e5rft3","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:47:10.119-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:47:10.119-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:47:10.119-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":25319,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp19e5rft3","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:47:10.120-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:10.120-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:47:11.083-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779631:83073][10561:0x7f5bcb488a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:11.083-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779631:83162][10561:0x7f5bcb488a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:11.128-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1008}}
{"t":{"$date":"2021-01-15T23:47:11.128-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.191-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:47:11.191-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:47:11.211-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:11.212-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"4acced16-6821-4a43-9b3c-24ccabec6336"}},"options":{"uuid":{"$uuid":"4acced16-6821-4a43-9b3c-24ccabec6336"}}}}
{"t":{"$date":"2021-01-15T23:47:11.280-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.280-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:47:11.280-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:47:11.281-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"772b98ea-a930-42bc-b4dc-38075d355559"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:47:11.344-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.344-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp19e5rft3/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:47:11.346-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:47:11.346-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:47:11.347-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":25319,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:47:11.347-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"37112b6a-6c63-49ff-9a5b-d474a02b947d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:11.442-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.442-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.799-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:56088","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.802-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:56090","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.906-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:56092","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.909-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:56094","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.909-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:56096","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.914-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:56098","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.915-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:56100","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.916-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:56102","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:11.918-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"957c0152-fe2f-4b25-acb7-469393f0f149"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:11.984-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:11.985-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"dca21714-2414-4cd2-bfb8-432e8346cab6"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"957c0152-fe2f-4b25-acb7-469393f0f149"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:47:12.012-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.012-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"dca21714-2414-4cd2-bfb8-432e8346cab6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:12.012-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"dca21714-2414-4cd2-bfb8-432e8346cab6"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:47:10,065 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:10,065 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:10,066 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp19e5rft3
2021-01-15 23:47:10,066 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:47:10,066 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:10,066 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:10,066 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:47:10,081 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=25319 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp19e5rft3
2021-01-15 23:47:10,081 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:47:10,082 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:47:10,082 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:25319
2021-01-15 23:47:10,686 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:47:10,686 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:25319
2021-01-15 23:47:11,293 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:47:11,293 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:25319
2021-01-15 23:47:11,898 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:47:11,899 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:25319
2021-01-15 23:47:11,912 DEBUG pytest_server_fixtures.base2 waited 0:00:01.830720 for server to start successfully
2021-01-15 23:47:11,913 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:47:11,913 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp19e5rft3
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=25319 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp19e5rft3
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:25319
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:25319
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:25319
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:25319
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.830720 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:47:12.015-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"38bd28ad-9426-46c9-88c1-0355166de356"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.082-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.083-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a4f7be81-c197-445d-833c-b19aff36627d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.200-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.200-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.200-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"85f54aeb-e3f4-460f-b9d1-416e3d0ffdcf"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":117}}
{"t":{"$date":"2021-01-15T23:47:12.201-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"cbef1705-9e21-4471-b0c6-9462714e3713"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"a4f7be81-c197-445d-833c-b19aff36627d"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:12.236-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.236-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"cbef1705-9e21-4471-b0c6-9462714e3713"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:12.236-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"cbef1705-9e21-4471-b0c6-9462714e3713"}}}}
{"t":{"$date":"2021-01-15T23:47:12.236-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0ffd2fdc-b3cf-4cd2-bc94-b520c70b9071"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.302-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:47:12.327-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.327-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.331-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"81d46af0-d72f-43c4-9794-efa78dbf7c8a"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.386-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.387-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3c5b8fce-8a0c-4164-9eb3-2e171e08c194"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.410-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-15T23:47:12.480-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.480-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.481-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c40be0e6-c902-4de7-bdc7-32962fe20dc7"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"3c5b8fce-8a0c-4164-9eb3-2e171e08c194"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:12.516-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.516-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c40be0e6-c902-4de7-bdc7-32962fe20dc7"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:12.516-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c40be0e6-c902-4de7-bdc7-32962fe20dc7"}}}}
{"t":{"$date":"2021-01-15T23:47:12.517-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a1119c6b-e51c-41b4-b598-daad37ad21f8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.608-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.608-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.611-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fc755309-9b17-4429-811b-e287e866c2ad"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.666-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.671-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"511c9e44-3468-46d7-b49d-e2405d057c49"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:12.730-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.733-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}},"namespace":"arctic_FEED.LEVEL1","collectionUUID":{"uuid":{"$uuid":"511c9e44-3468-46d7-b49d-e2405d057c49"}},"indexes":1,"firstIndex":{"name":"start_1"}}}
{"t":{"$date":"2021-01-15T23:47:12.793-07:00"},"s":"I",  "c":"INDEX",    "id":20384,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: starting","attr":{"namespace":"arctic_FEED.LEVEL1","buildUUID":null,"properties":{"v":2,"key":{"start":1},"name":"start_1","background":true},"method":"Hybrid","maxTemporaryMemoryUsageMB":200}}
{"t":{"$date":"2021-01-15T23:47:12.793-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:12.793-07:00"},"s":"I",  "c":"INDEX",    "id":20391,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: collection scan done","attr":{"buildUUID":null,"totalRecords":2,"durationMillis":0}}
{"t":{"$date":"2021-01-15T23:47:12.793-07:00"},"s":"I",  "c":"INDEX",    "id":20685,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: inserted keys from external sorter into index","attr":{"namespace":"arctic_FEED.LEVEL1","index":"start_1","keysInserted":2,"durationMillis":0}}
{"t":{"$date":"2021-01-15T23:47:12.800-07:00"},"s":"I",  "c":"STORAGE",  "id":3856203, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: waiting for next action before completing final phase","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}}}}
{"t":{"$date":"2021-01-15T23:47:12.800-07:00"},"s":"I",  "c":"STORAGE",  "id":3856204, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: received signal","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}},"action":"Single-phase commit"}}
{"t":{"$date":"2021-01-15T23:47:12.801-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:12.813-07:00"},"s":"I",  "c":"STORAGE",  "id":20663,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: completed successfully","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}},"namespace":"arctic_FEED.LEVEL1","uuid":{"uuid":{"$uuid":"511c9e44-3468-46d7-b49d-e2405d057c49"}},"indexesBuilt":1,"numIndexesBefore":1,"numIndexesAfter":2}}
{"t":{"$date":"2021-01-15T23:47:12.814-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"736f951f-ca71-40a5-afb6-0ce5a738af34"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:47:12,827 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001003: approx 99700897 ticks/sec
2021-01-15 23:47:12,833 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000889: approx 112485939 ticks/sec
2021-01-15 23:47:12,839 INFO arctic.tickstore.tickstore Got data in 0.004139 secs, creating DataFrame...
2021-01-15 23:47:12,840 INFO arctic.tickstore.tickstore 31 rows in 0.005135 secs: 6037 ticks/sec
2021-01-15 23:47:12,845 INFO arctic.tickstore.tickstore Got data in 0.003685 secs, creating DataFrame...
2021-01-15 23:47:12,846 INFO arctic.tickstore.tickstore 26 rows in 0.004581 secs: 5675 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001003: approx 99700897 ticks/sec
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000889: approx 112485939 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004139 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 31 rows in 0.005135 secs: 6037 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003685 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 26 rows in 0.004581 secs: 5675 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:47:12,877 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10561 (total_procs_to_kill=1)
2021-01-15 23:47:12,878 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:47:12,878 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:47:12,885 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:47:12,886 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:12,886 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:12,886 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp19e5rft3
2021-01-15 23:47:12,886 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:12,886 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10561 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp19e5rft3
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______________ test_should_write_top_level_with_correct_timezone _______________

arctic = <Arctic at 0x7efded47db38, connected to MongoClient(host=['127.223.246.167:16570'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_write_top_level_with_correct_timezone(arctic):
        # Write timezone aware data and read back in UTC
        utc = mktz('UTC')
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED.LEVEL1', toplevel.TICK_STORE_TYPE)
        toplevel_tickstore = arctic['FEED.LEVEL1']
        dates = pd.date_range('20101230220000', periods=10, tz=mktz('America/New_York'))  # 10pm New York time is 3am next day UTC
        data = [{'index': dates[i], 'a': i} for i in range(len(dates))]
        expected = pd.DataFrame(np.arange(len(dates), dtype=np.float64), index=dates.tz_convert(utc), columns=list('a'))
        toplevel_tickstore.write('blah', data)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 1), end=dt(2011, 12, 31)), columns=list('a')).tz_convert(utc)
>       assert_frame_equal(expected, res)
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (10, 1)
E       [right]: (9, 1)

tests/integration/tickstore/test_toplevel.py:215: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:47:12.945-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10616,"port":16570,"dbPath":"/tmp/tmpil9pepga","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:47:12.949-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":16570,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpil9pepga","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:47:12.950-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:12.950-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:47:13.669-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779633:669716][10616:0x7f47189f3a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:13.669-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779633:669768][10616:0x7f47189f3a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:13.714-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":764}}
{"t":{"$date":"2021-01-15T23:47:13.714-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:13.776-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:47:13.776-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:47:13.795-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:13.796-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"6a707782-b24a-4d9a-9000-2fb2b300749a"}},"options":{"uuid":{"$uuid":"6a707782-b24a-4d9a-9000-2fb2b300749a"}}}}
{"t":{"$date":"2021-01-15T23:47:13.862-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:13.862-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:47:13.862-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:47:13.863-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3a44ac8a-8210-438f-8e85-679d11274fb7"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:47:13.923-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:13.923-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpil9pepga/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:47:13.924-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:47:13.924-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:47:13.924-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":16570,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:47:13.924-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"17e4f4b4-48d3-4c8c-8831-dce923d6d60c"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.016-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:48410","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.017-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.017-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.017-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:48412","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.121-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:48414","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.124-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:48416","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.125-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:48418","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.129-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:48420","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.131-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:48422","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.131-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:48424","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:14.134-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ea01be6b-5c90-4632-b658-9fba1ab3d7a6"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.200-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.201-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"7b88b801-2c56-4a10-985a-2da73c9bc5fe"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"ea01be6b-5c90-4632-b658-9fba1ab3d7a6"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:47:14.228-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.228-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"7b88b801-2c56-4a10-985a-2da73c9bc5fe"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:14.228-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"7b88b801-2c56-4a10-985a-2da73c9bc5fe"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:47:12,889 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:12,889 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:12,890 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpil9pepga
2021-01-15 23:47:12,890 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:47:12,890 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:12,890 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:12,890 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:47:12,905 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=16570 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpil9pepga
2021-01-15 23:47:12,906 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:47:12,906 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:47:12,907 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:16570
2021-01-15 23:47:13,512 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:47:13,512 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:16570
2021-01-15 23:47:14,115 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:47:14,116 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:16570
2021-01-15 23:47:14,128 DEBUG pytest_server_fixtures.base2 waited 0:00:01.221684 for server to start successfully
2021-01-15 23:47:14,128 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:47:14,129 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpil9pepga
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=16570 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpil9pepga
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:16570
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:16570
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:16570
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.221684 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-15T23:47:14.231-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"aae07598-f89e-4102-ad35-659a44908118"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.296-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.298-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5b76b9a0-eb56-4768-8a7d-6432cb185f3f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.409-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.409-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.410-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"71bb6fd3-0d05-4b80-afcb-cb8c6669a470"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":111}}
{"t":{"$date":"2021-01-15T23:47:14.410-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d9c67a04-dd36-4fb4-85ed-19d802b9d455"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"5b76b9a0-eb56-4768-8a7d-6432cb185f3f"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:14.445-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.445-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d9c67a04-dd36-4fb4-85ed-19d802b9d455"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:14.445-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d9c67a04-dd36-4fb4-85ed-19d802b9d455"}}}}
{"t":{"$date":"2021-01-15T23:47:14.446-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2bb18f58-efbe-428b-ad58-a0e7d067dd21"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.517-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-15T23:47:14.536-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.536-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.539-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ec79efae-b92c-4dc2-ac56-dcc46f93ad50"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.596-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.597-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"89498c20-8c8d-44a9-b23e-5030f88e29f5"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.624-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-15T23:47:14.689-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.689-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.690-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"83ba71d6-fa25-4fbb-8452-5f6e9a0b6dc9"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"89498c20-8c8d-44a9-b23e-5030f88e29f5"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:14.725-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.725-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"83ba71d6-fa25-4fbb-8452-5f6e9a0b6dc9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:14.725-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"83ba71d6-fa25-4fbb-8452-5f6e9a0b6dc9"}}}}
{"t":{"$date":"2021-01-15T23:47:14.726-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0f3b02b0-401e-4d5a-ae69-c996ad5b4db8"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.818-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.818-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.822-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"94fbbcad-baba-48ad-a575-4595cc519f5d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.876-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.881-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d0323b5e-03d4-4a55-a86e-ff8625e7f115"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:14.940-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:14.943-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}},"namespace":"arctic_FEED.LEVEL1","collectionUUID":{"uuid":{"$uuid":"d0323b5e-03d4-4a55-a86e-ff8625e7f115"}},"indexes":1,"firstIndex":{"name":"start_1"}}}
{"t":{"$date":"2021-01-15T23:47:15.002-07:00"},"s":"I",  "c":"INDEX",    "id":20384,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: starting","attr":{"namespace":"arctic_FEED.LEVEL1","buildUUID":null,"properties":{"v":2,"key":{"start":1},"name":"start_1","background":true},"method":"Hybrid","maxTemporaryMemoryUsageMB":200}}
{"t":{"$date":"2021-01-15T23:47:15.002-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:15.002-07:00"},"s":"I",  "c":"INDEX",    "id":20391,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: collection scan done","attr":{"buildUUID":null,"totalRecords":2,"durationMillis":0}}
{"t":{"$date":"2021-01-15T23:47:15.003-07:00"},"s":"I",  "c":"INDEX",    "id":20685,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: inserted keys from external sorter into index","attr":{"namespace":"arctic_FEED.LEVEL1","index":"start_1","keysInserted":2,"durationMillis":0}}
{"t":{"$date":"2021-01-15T23:47:15.010-07:00"},"s":"I",  "c":"STORAGE",  "id":3856203, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: waiting for next action before completing final phase","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}}}}
{"t":{"$date":"2021-01-15T23:47:15.010-07:00"},"s":"I",  "c":"STORAGE",  "id":3856204, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: received signal","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}},"action":"Single-phase commit"}}
{"t":{"$date":"2021-01-15T23:47:15.010-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:15.023-07:00"},"s":"I",  "c":"STORAGE",  "id":20663,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: completed successfully","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}},"namespace":"arctic_FEED.LEVEL1","uuid":{"uuid":{"$uuid":"d0323b5e-03d4-4a55-a86e-ff8625e7f115"}},"indexesBuilt":1,"numIndexesBefore":1,"numIndexesAfter":2}}
{"t":{"$date":"2021-01-15T23:47:15.023-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1c3ec6b0-b79a-4bca-a66b-4e8e742ed48d"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:47:15,033 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001014: approx 98619329 ticks/sec
2021-01-15 23:47:15,036 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000868: approx 115207373 ticks/sec
2021-01-15 23:47:15,041 INFO arctic.tickstore.tickstore Got data in 0.003337 secs, creating DataFrame...
2021-01-15 23:47:15,043 INFO arctic.tickstore.tickstore 1 rows in 0.004512 secs: 221 ticks/sec
2021-01-15 23:47:15,050 INFO arctic.tickstore.tickstore Got data in 0.005584 secs, creating DataFrame...
2021-01-15 23:47:15,051 INFO arctic.tickstore.tickstore 9 rows in 0.006642 secs: 1355 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001014: approx 98619329 ticks/sec
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000868: approx 115207373 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003337 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.004512 secs: 221 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.005584 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 9 rows in 0.006642 secs: 1355 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:47:15,084 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10616 (total_procs_to_kill=1)
2021-01-15 23:47:15,084 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:47:15,084 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:47:15,092 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:47:15,092 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:15,092 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:15,092 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpil9pepga
2021-01-15 23:47:15,092 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:15,093 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10616 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpil9pepga
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
__________________________ test_date_range[tickstore] __________________________

tickstore_lib = <TickStore at 0x7efdef14a2e8>
    <ArcticLibrary at 0x7efdef3f3518, arctic_test.tickstore>
        <Arctic at 0x7efdef5a7898, connected to MongoClient(host=['127.223.246.167:5808'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range(tickstore_lib):
        tickstore_lib.write('SYM', DUMMY_DATA)
        df = tickstore_lib.read('SYM', date_range=DateRange(20130101, 20130103), columns=None)
>       assert_array_equal(df['a'].values, np.array([1, np.nan, np.nan]))
E       AssertionError: 
E       Arrays are not equal
E       
E       (shapes (2,), (3,) mismatch)
E        x: array([nan, nan])
E        y: array([ 1., nan, nan])

tests/integration/tickstore/test_ts_read.py:234: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:47:43.012-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11373,"port":5808,"dbPath":"/tmp/tmpushwe_ll","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:47:43.014-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":5808,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpushwe_ll","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:47:43.015-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:43.015-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:47:43.793-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779663:793528][11373:0x7fa0b4aeea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:43.793-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779663:793593][11373:0x7fa0b4aeea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:43.838-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":823}}
{"t":{"$date":"2021-01-15T23:47:43.838-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:43.902-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:47:43.902-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:47:43.920-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:43.921-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"85744539-be0a-4672-adf3-8263666f42e8"}},"options":{"uuid":{"$uuid":"85744539-be0a-4672-adf3-8263666f42e8"}}}}
{"t":{"$date":"2021-01-15T23:47:43.986-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:43.986-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:47:43.986-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:47:43.987-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f8b7a58-2afc-45e1-8372-8d9e5397964a"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:47:44.047-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.048-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpushwe_ll/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:47:44.051-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0e274463-e54a-4608-b2bd-0a8217871293"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:44.051-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:47:44.051-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:47:44.051-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":5808,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:47:44.087-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:43426","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.088-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:43428","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.146-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.146-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.192-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:43430","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.195-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:43432","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.195-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:43434","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.201-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:43436","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.203-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:43438","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.203-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:43440","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:44.207-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d1272a4d-1468-43a1-ae9a-6cf69f307750"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:44.275-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.276-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"469b0b38-ee66-496e-81e6-5c73b2a1e259"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"d1272a4d-1468-43a1-ae9a-6cf69f307750"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:47:44.302-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.302-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"469b0b38-ee66-496e-81e6-5c73b2a1e259"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:44.302-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"469b0b38-ee66-496e-81e6-5c73b2a1e259"}}}}
{"t":{"$date":"2021-01-15T23:47:44.304-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ca9d1cd8-c30c-4027-89db-34e7015537e4"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:44.371-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.372-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3853f3d3-6dbc-4fc8-af53-a8e846f4e447"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:44.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.482-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore","command":{"createIndexes":"tickstore","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"5889c371-dc9f-4467-91ee-3542eda3663c"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":109}}
{"t":{"$date":"2021-01-15T23:47:44.483-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"aed2ad5c-27eb-4dfd-b72d-c4f4ab0d5e87"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"3853f3d3-6dbc-4fc8-af53-a8e846f4e447"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:44.517-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.517-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"aed2ad5c-27eb-4dfd-b72d-c4f4ab0d5e87"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:44.517-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"aed2ad5c-27eb-4dfd-b72d-c4f4ab0d5e87"}}}}
{"t":{"$date":"2021-01-15T23:47:44.518-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2fa44684-4922-4779-b462-741be6e14b4f"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:44.588-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:47:44.609-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:44.609-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:47:42,960 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:42,960 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:42,960 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpushwe_ll
2021-01-15 23:47:42,960 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:47:42,960 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:42,961 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:42,961 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:47:42,976 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=5808 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpushwe_ll
2021-01-15 23:47:42,977 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:47:42,977 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:47:42,977 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5808
2021-01-15 23:47:43,582 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:47:43,583 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5808
2021-01-15 23:47:44,186 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:47:44,187 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:5808
2021-01-15 23:47:44,200 DEBUG pytest_server_fixtures.base2 waited 0:00:01.222445 for server to start successfully
2021-01-15 23:47:44,200 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:47:44,201 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpushwe_ll
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=5808 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpushwe_ll
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5808
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5808
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:5808
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.222445 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:47:44,617 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000908: approx 110132158 ticks/sec
2021-01-15 23:47:44,623 INFO arctic.tickstore.tickstore Got data in 0.005704 secs, creating DataFrame...
2021-01-15 23:47:44,625 INFO arctic.tickstore.tickstore 5 rows in 0.007078 secs: 706 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000908: approx 110132158 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.005704 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 5 rows in 0.007078 secs: 706 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:47:44,672 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11373 (total_procs_to_kill=1)
2021-01-15 23:47:44,672 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:47:44,672 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:47:44,680 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:47:44,680 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:44,680 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:44,680 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpushwe_ll
2021-01-15 23:47:44,680 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:44,681 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11373 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpushwe_ll
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_________________ test_date_range_end_not_in_range[tickstore] __________________

tickstore_lib = <TickStore at 0x7efdef14acf8>
    <ArcticLibrary at 0x7efdef1ecc50, arctic_test.tickstore>
        <Arctic at 0x7efdef46eba8, connected to MongoClient(host=['127.223.246.167:23782'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range_end_not_in_range(tickstore_lib):
        DUMMY_DATA = [
                      {'a': 1.,
                       'b': 2.,
                       'index': dt(2013, 1, 1, tzinfo=mktz('Europe/London'))
                       },
                      {'b': 3.,
                       'c': 4.,
                       'index': dt(2013, 1, 2, 10, 1, tzinfo=mktz('Europe/London'))
                       },
                      ]
    
        tickstore_lib._chunk_size = 1
        tickstore_lib.write('SYM', DUMMY_DATA)
        with patch.object(tickstore_lib._collection, 'find', side_effect=tickstore_lib._collection.find) as f:
            df = tickstore_lib.read('SYM', date_range=DateRange(20130101, dt(2013, 1, 2, 9, 0)), columns=None)
>           assert_array_equal(df['b'].values, np.array([2.]))
E           AssertionError: 
E           Arrays are not equal
E           
E           Mismatched elements: 1 / 1 (100%)
E           Max absolute difference: 1.
E           Max relative difference: 0.5
E            x: array([3.])
E            y: array([2.])

tests/integration/tickstore/test_ts_read.py:300: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:47:44.743-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:47:44.747-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:47:44.747-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11424,"port":23782,"dbPath":"/tmp/tmpr34huxts","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":23782,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpr34huxts","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:44.748-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:47:45.780-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779665:780065][11424:0x7fc9c5187a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:45.780-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779665:780139][11424:0x7fc9c5187a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:45.827-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1079}}
{"t":{"$date":"2021-01-15T23:47:45.827-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:45.888-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:47:45.888-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:47:45.906-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:45.907-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"e963fd7f-7e19-4aec-bdc0-ca003cebca35"}},"options":{"uuid":{"$uuid":"e963fd7f-7e19-4aec-bdc0-ca003cebca35"}}}}
{"t":{"$date":"2021-01-15T23:47:45.976-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:45.976-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:47:45.976-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:47:45.977-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ae4f7071-93f7-4dac-ba70-f469cc1b4df5"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:47:46.037-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.038-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpr34huxts/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:47:46.040-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:47:46.040-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:47:46.040-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":23782,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:47:46.040-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0c02ed92-5ec1-4ddb-9268-87da24818681"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:46.133-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.133-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.419-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:49920","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.421-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:49922","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.523-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:49924","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.526-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:49926","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.526-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:49928","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.532-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:49930","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.537-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:49932","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.537-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:49934","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:46.542-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"20f563b6-7fd6-465c-b77c-823d5c5d90a9"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:46.609-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.610-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"99feb542-2734-4a6f-985a-08df4a514cfa"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"20f563b6-7fd6-465c-b77c-823d5c5d90a9"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:47:46.634-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.634-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"99feb542-2734-4a6f-985a-08df4a514cfa"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:46.635-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"99feb542-2734-4a6f-985a-08df4a514cfa"}}}}
{"t":{"$date":"2021-01-15T23:47:46.636-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"399ce5e6-9984-4c64-adf1-77f0c59a8a08"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:46.704-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.706-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c72bdd02-14c4-466f-88c7-239d4cd6ff0d"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:46.817-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.817-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.818-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore","command":{"createIndexes":"tickstore","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"979992dd-0a5a-4ca3-815b-eabd4f87fdd5"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":112}}
{"t":{"$date":"2021-01-15T23:47:46.818-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"47deba46-e992-4423-a015-d88587f9bccc"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"c72bdd02-14c4-466f-88c7-239d4cd6ff0d"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:46.850-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.850-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"47deba46-e992-4423-a015-d88587f9bccc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:46.850-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"47deba46-e992-4423-a015-d88587f9bccc"}}}}
{"t":{"$date":"2021-01-15T23:47:46.851-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"81842411-db61-46b8-99e0-e58994647e6b"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:46.921-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:47:46.942-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:46.942-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:47:44,684 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:44,685 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:44,685 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpr34huxts
2021-01-15 23:47:44,685 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:47:44,685 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:44,685 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:44,686 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:47:44,701 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=23782 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpr34huxts
2021-01-15 23:47:44,701 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:47:44,702 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:47:44,702 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:23782
2021-01-15 23:47:45,308 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:47:45,309 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:23782
2021-01-15 23:47:45,913 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:47:45,913 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:23782
2021-01-15 23:47:46,518 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:47:46,518 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:23782
2021-01-15 23:47:46,532 DEBUG pytest_server_fixtures.base2 waited 0:00:01.829979 for server to start successfully
2021-01-15 23:47:46,532 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:47:46,533 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpr34huxts
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=23782 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpr34huxts
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:23782
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:23782
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:23782
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:23782
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.829979 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:47:46,949 DEBUG arctic.tickstore.tickstore 2 buckets in 0.000855: approx 2339 ticks/sec
2021-01-15 23:47:46,956 INFO arctic.tickstore.tickstore Got data in 0.005874 secs, creating DataFrame...
2021-01-15 23:47:46,958 INFO arctic.tickstore.tickstore 1 rows in 0.007349 secs: 136 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 2 buckets in 0.000855: approx 2339 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.005874 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.007349 secs: 136 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:47:47,001 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11424 (total_procs_to_kill=1)
2021-01-15 23:47:47,001 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:47:47,002 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:47:47,009 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:47:47,009 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:47,010 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:47,010 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpr34huxts
2021-01-15 23:47:47,010 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:47,010 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11424 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpr34huxts
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____________________ test_date_range_no_bounds[tickstore] _____________________

tickstore_lib = <TickStore at 0x7efded122f60>
    <ArcticLibrary at 0x7efded122eb8, arctic_test.tickstore>
        <Arctic at 0x7efdf2cb5400, connected to MongoClient(host=['127.223.246.167:1402'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range_no_bounds(tickstore_lib):
        DUMMY_DATA = [
                      {'a': 1.,
                       'b': 2.,
                       'index': dt(2013, 1, 1, tzinfo=mktz('Europe/London'))
                       },
                      {'a': 3.,
                       'b': 4.,
                       'index': dt(2013, 1, 30, tzinfo=mktz('Europe/London'))
                       },
                      {'b': 5.,
                       'c': 6.,
                       'index': dt(2013, 2, 2, 10, 1, tzinfo=mktz('Europe/London'))
                       },
                      ]
    
        tickstore_lib._chunk_size = 1
        tickstore_lib.write('SYM', DUMMY_DATA)
    
        # 1) No start, no end
        df = tickstore_lib.read('SYM', columns=None)
        assert_array_equal(df['b'].values, np.array([2., 4.]))
        # 1.2) Start before the real start
        df = tickstore_lib.read('SYM', date_range=DateRange(20121231), columns=None)
        assert_array_equal(df['b'].values, np.array([2., 4.]))
        # 2.1) Only go one month out
        df = tickstore_lib.read('SYM', date_range=DateRange(20130101), columns=None)
>       assert_array_equal(df['b'].values, np.array([2., 4.]))
E       AssertionError: 
E       Arrays are not equal
E       
E       (shapes (1,), (2,) mismatch)
E        x: array([4.])
E        y: array([2., 4.])

tests/integration/tickstore/test_ts_read.py:369: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-15T23:47:52.843-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-15T23:47:52.846-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-15T23:47:52.847-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-15T23:47:52.847-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11630,"port":1402,"dbPath":"/tmp/tmp6dehvkhh","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-15T23:47:52.847-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-15T23:47:52.847-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-15T23:47:52.847-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.223.246.167","port":1402,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp6dehvkhh","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-15T23:47:52.848-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:52.848-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-15T23:47:53.872-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779673:872922][11630:0x7fe69e7e8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:53.872-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610779673:872994][11630:0x7fe69e7e8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-15T23:47:53.920-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1072}}
{"t":{"$date":"2021-01-15T23:47:53.920-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:53.980-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-15T23:47:53.981-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-15T23:47:53.999-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-15T23:47:54.000-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"5f213ed4-4bbd-4d54-b16c-b398522749af"}},"options":{"uuid":{"$uuid":"5f213ed4-4bbd-4d54-b16c-b398522749af"}}}}
{"t":{"$date":"2021-01-15T23:47:54.070-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.070-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-15T23:47:54.071-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-15T23:47:54.072-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"896eb9ba-3f3e-4fe1-be79-109fef81ad8a"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-15T23:47:54.132-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.133-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp6dehvkhh/diagnostic.data"}}
{"t":{"$date":"2021-01-15T23:47:54.135-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-15T23:47:54.135-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"513bd9cf-2af3-45dc-80c1-6fa5f2841ae9"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:54.135-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.223.246.167"}}
{"t":{"$date":"2021-01-15T23:47:54.135-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":1402,"ssl":"off"}}
{"t":{"$date":"2021-01-15T23:47:54.229-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.229-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.518-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:37790","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.521-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:37792","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.625-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:37794","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.628-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:37796","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.628-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:37798","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.634-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:37800","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.638-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:37802","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.638-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:37804","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-15T23:47:54.643-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6c862f2c-e12b-4e35-81f5-513644685fa4"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:54.710-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.710-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"25a6faba-ef4b-47be-bff5-36a869339bb8"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"6c862f2c-e12b-4e35-81f5-513644685fa4"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-15T23:47:54.735-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.735-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"25a6faba-ef4b-47be-bff5-36a869339bb8"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:54.735-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"25a6faba-ef4b-47be-bff5-36a869339bb8"}}}}
{"t":{"$date":"2021-01-15T23:47:54.737-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"322ad5d3-0900-44a2-8ea4-91d4ce2398b3"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:54.805-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.806-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9abc7613-3537-4410-ac00-65a74b8826fa"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:54.925-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.925-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.925-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore","command":{"createIndexes":"tickstore","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"9ed3bbd5-b204-4d4a-8de7-74a37cef6695"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":119}}
{"t":{"$date":"2021-01-15T23:47:54.926-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e29d419b-8532-4573-9110-e25245ad27d4"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"9abc7613-3537-4410-ac00-65a74b8826fa"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-15T23:47:54.958-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:54.958-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e29d419b-8532-4573-9110-e25245ad27d4"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-15T23:47:54.958-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e29d419b-8532-4573-9110-e25245ad27d4"}}}}
{"t":{"$date":"2021-01-15T23:47:54.958-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6fe8e056-bc09-4ad9-8ca7-2b80ff9fdae5"}},"options":{}}}
{"t":{"$date":"2021-01-15T23:47:55.021-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-15T23:47:55.051-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-15T23:47:55.052-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-15 23:47:52,785 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:52,785 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:52,785 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp6dehvkhh
2021-01-15 23:47:52,786 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-15 23:47:52,786 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:52,786 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:52,786 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-15 23:47:52,801 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.223.246.167 --port=1402 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp6dehvkhh
2021-01-15 23:47:52,802 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-15 23:47:52,802 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-15 23:47:52,803 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:1402
2021-01-15 23:47:53,408 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-15 23:47:53,408 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:1402
2021-01-15 23:47:54,013 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-15 23:47:54,013 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:1402
2021-01-15 23:47:54,618 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-15 23:47:54,618 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.223.246.167:1402
2021-01-15 23:47:54,634 DEBUG pytest_server_fixtures.base2 waited 0:00:01.831395 for server to start successfully
2021-01-15 23:47:54,634 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-15 23:47:54,636 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp6dehvkhh
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.223.246.167 --port=1402 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp6dehvkhh
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:1402
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:1402
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:1402
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.223.246.167:1402
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.831395 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:47:55,068 DEBUG arctic.tickstore.tickstore 3 buckets in 0.0013: approx 2307 ticks/sec
2021-01-15 23:47:55,069 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-15 23:47:55,073 INFO arctic.tickstore.tickstore Got data in 0.003979 secs, creating DataFrame...
2021-01-15 23:47:55,074 INFO arctic.tickstore.tickstore 2 rows in 0.005173 secs: 386 ticks/sec
2021-01-15 23:47:55,076 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-15 23:47:55,079 INFO arctic.tickstore.tickstore Got data in 0.004003 secs, creating DataFrame...
2021-01-15 23:47:55,080 INFO arctic.tickstore.tickstore 2 rows in 0.004976 secs: 401 ticks/sec
2021-01-15 23:47:55,083 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-15 23:47:55,085 INFO arctic.tickstore.tickstore Got data in 0.004222 secs, creating DataFrame...
2021-01-15 23:47:55,086 INFO arctic.tickstore.tickstore 1 rows in 0.005152 secs: 194 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 3 buckets in 0.0013: approx 2307 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003979 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 2 rows in 0.005173 secs: 386 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004003 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 2 rows in 0.004976 secs: 401 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004222 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.005152 secs: 194 ticks/sec
--------------------------- Captured stdout teardown ---------------------------
{"t":{"$date":"2021-01-15T23:47:55.128-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
--------------------------- Captured stderr teardown ---------------------------
2021-01-15 23:47:55,128 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11630 (total_procs_to_kill=1)
2021-01-15 23:47:55,128 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-15 23:47:55,129 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-15 23:47:55,136 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-15 23:47:55,136 DEBUG pytest_shutil.workspace 
2021-01-15 23:47:55,136 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:55,136 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp6dehvkhh
2021-01-15 23:47:55,137 DEBUG pytest_shutil.workspace =======================================================
2021-01-15 23:47:55,137 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11630 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp6dehvkhh
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______________ test_ArcticTransaction_detects_concurrent_writes _______________

    def test_ArcticTransaction_detects_concurrent_writes():
        vs = Mock(spec=VersionStore)
        ts1 = pd.DataFrame(index=[1, 2], data={'a': [1.0, 2.0]})
        vs.read.return_value = VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=1, metadata=None,
                                             data=ts1, host=sentinel.host)
        vs.write.side_effect = [VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=2, metadata=None,
                                              data=None, host=sentinel.host),
                                VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=3, metadata=None,
                                              data=None, host=sentinel.host)]
        # note that we return some extra version 5, it is possible that we have a write coming in after our own write that gets picked up
        vs.list_versions.side_effect = [[{'version': 5}, {'version': 2}, {'version': 1}, ],
                                       [{'version': 5}, {'version': 3}, {'version': 2}, {'version': 1}, ]]
        from threading import Event, Thread
        e1 = Event()
        e2 = Event()
    
        def losing_writer():
            # will attempt to write version 2, should find that version 2 is there and it ends up writing version 3
            with pytest.raises(ArcticTransaction):
                with ArcticTransaction(vs, sentinel.symbol, sentinel.user, sentinel.log) as cwb:
                    cwb.write(sentinel.symbol, pd.DataFrame([1.0, 2.0], [3, 4]))
                    e1.wait()
    
        def winning_writer():
            # will attempt to write version 2 as well
            with ArcticTransaction(vs, sentinel.symbol, sentinel.user, sentinel.log) as cwb:
                cwb.write(sentinel.symbol, pd.DataFrame([1.0, 2.0], [5, 6]))
                e2.wait()
    
        t1 = Thread(target=losing_writer)
        t2 = Thread(target=winning_writer)
        t1.start()
        t2.start()
    
        # both read the same timeseries and are locked doing some 'work'
        e2.set()
        # t2  should now be able to finish
        t2.join()
        e1.set()
        t1.join()
    
        # we're expecting the losing_writer to undo its write once it realises that it wrote v3 instead of v2
>       vs._delete_version.assert_called_once_with(sentinel.symbol, 3)

tests/unit/store/test_version_store_audit.py:221: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

_mock_self = <Mock name='mock._delete_version' id='139627902415872'>
args = (sentinel.symbol, 3), kwargs = {}
self = <Mock name='mock._delete_version' id='139627902415872'>
msg = "Expected '_delete_version' to be called once. Called 0 times."

    def assert_called_once_with(_mock_self, *args, **kwargs):
        """assert that the mock was called exactly once and that that call was
        with the specified arguments."""
        self = _mock_self
        if not self.call_count == 1:
            msg = ("Expected '%s' to be called once. Called %s times.%s"
                   % (self._mock_name or 'mock',
                      self.call_count,
                      self._calls_repr()))
>           raise AssertionError(msg)
E           AssertionError: Expected '_delete_version' to be called once. Called 0 times.

.eggs/mock-4.0.3-py3.6.egg/mock/mock.py:925: AssertionError
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:55:05,381 INFO arctic.store.audit MT: None@None: [sentinel.user] sentinel.log: sentinel.symbol
Exception in thread Thread-773:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.6/threading.py", line 864, in run
    self._target(*self._args, **self._kwargs)
  File "/home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_version_store_audit.py", line 197, in losing_writer
    with pytest.raises(ArcticTransaction):
  File "/home/cwm/git/bb.FLXSA/quant/arctic_878/.eggs/pytest-6.2.1-py3.6.egg/_pytest/python_api.py", line 719, in raises
    raise TypeError(msg.format(not_a))
TypeError: expected exception must be a BaseException type, not ArcticTransaction

------------------------------ Captured log call -------------------------------
INFO     arctic.store.audit:audit.py:87 MT: None@None: [sentinel.user] sentinel.log: sentinel.symbol
_________________________ test_mongo_date_range_query __________________________

    def test_mongo_date_range_query():
        self = create_autospec(TickStore)
        self._collection = create_autospec(Collection)
        self._symbol_query.return_value = {"sy": {"$in" : ["s1" , "s2"]}}
        self._collection.aggregate.return_value = iter([{"_id": "s1", "start": dt(2014, 1, 1, 0, 0, tzinfo=mktz())},
                                                        {"_id": "s2", "start": dt(2014, 1, 1, 12, 0, tzinfo=mktz())}])
    
        self._collection.find_one.side_effect = [
            {'e': dt(2014, 1, 1, 15, 0, tzinfo=mktz())},
            {'e': dt(2014, 1, 2, 12, 0, tzinfo=mktz())}]
    
        query = TickStore._mongo_date_range_query(self, 'sym', DateRange(dt(2014, 1, 2, 0, 0, tzinfo=mktz()),
                                                                         dt(2014, 1, 3, 0, 0, tzinfo=mktz())))
    
        assert self._collection.aggregate.call_args_list == [call([
         {"$match": {"s": {"$lte": dt(2014, 1, 2, 0, 0, tzinfo=mktz())}, "sy": {"$in" : ["s1" , "s2"]}}},
         {"$project": {"_id": 0, "s": 1, "sy": 1}},
         {"$group": {"_id": "$sy", "start": {"$max": "$s"}}},
         {"$sort": {"start": 1}}])]
    
        assert self._collection.find_one.call_args_list == [
            call({'sy': 's1', 's': dt(2014, 1, 1, 0, 0, tzinfo=mktz())}, {'e': 1}),
            call({'sy': 's2', 's': dt(2014, 1, 1, 12, 0, tzinfo=mktz())}, {'e': 1})]
    
>       assert query == {'s': {'$gte': dt(2014, 1, 1, 12, 0, tzinfo=mktz()), '$lte': dt(2014, 1, 3, 0, 0, tzinfo=mktz())}}
E       AssertionError: assert {'s': {'$gte'...ca/Denver'))}} == {'s': {'$gte'...ca/Denver'))}}
E         Differing items:
E         {'s': {'$gte': datetime.datetime(2014, 1, 1, 12, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')), '$lte': datetime.datetime(2014, 1, 3, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver'))}} != {'s': {'$gte': datetime.datetime(2014, 1, 1, 12, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver')), '$lte': datetime.datetime(2014, 1, 3, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver'))}}
E         Use -v to get the full diff

tests/unit/tickstore/test_tickstore.py:43: AssertionError
_____________________ test_tickstore_to_bucket_with_image ______________________

    def test_tickstore_to_bucket_with_image():
        symbol = 'SYM'
        tz = 'UTC'
        initial_image = {'index': dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz)), 'A': 123, 'B': 54.4, 'C': 'DESC'}
        data = [{'index': dt(2014, 1, 1, 0, 1, tzinfo=mktz(tz)), 'A': 124, 'D': 0},
                {'index': dt(2014, 1, 1, 0, 2, tzinfo=mktz(tz)), 'A': 125, 'B': 27.2}]
        bucket, final_image = TickStore._to_bucket(data, symbol, initial_image)
        assert bucket[COUNT] == 2
        assert bucket[END] == dt(2014, 1, 1, 0, 2, tzinfo=mktz(tz))
        assert set(bucket[COLUMNS]) == set(('A', 'B', 'D'))
        assert set(bucket[COLUMNS]['A']) == set((ROWMASK, DTYPE, DATA))
        assert get_coldata(bucket[COLUMNS]['A']) == ([124, 125], [1, 1, 0, 0, 0, 0, 0, 0])
        assert get_coldata(bucket[COLUMNS]['B']) == ([27.2], [0, 1, 0, 0, 0, 0, 0, 0])
        assert get_coldata(bucket[COLUMNS]['D']) == ([0], [1, 0, 0, 0, 0, 0, 0, 0])
        index = [dt.fromtimestamp(int(i/1000)).replace(tzinfo=mktz(tz)) for i in
                 list(np.cumsum(np.frombuffer(decompress(bucket[INDEX]), dtype='uint64')))]
>       assert index == [i['index'] for i in data]
E       AssertionError: assert [datetime.dat...neinfo/UTC'))] == [datetime.dat...neinfo/UTC'))]
E         At index 0 diff: datetime.datetime(2013, 12, 31, 17, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC')) != datetime.datetime(2014, 1, 1, 0, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC'))
E         Use -v to get the full diff

tests/unit/tickstore/test_tickstore.py:97: AssertionError
____________________ test_tickstore_pandas_to_bucket_image _____________________

    def test_tickstore_pandas_to_bucket_image():
        symbol = 'SYM'
        tz = 'UTC'
        initial_image = {'index': dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz)), 'A': 123, 'B': 54.4, 'C': 'DESC'}
        data = [{'A': 120, 'D': 1}, {'A': 122, 'B': 2.0}, {'A': 3, 'B': 3.0, 'D': 1}]
        tick_index = [dt(2014, 1, 2, 0, 0, tzinfo=mktz(tz)),
                      dt(2014, 1, 3, 0, 0, tzinfo=mktz(tz)),
                      dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz))]
        data = pd.DataFrame(data, index=tick_index)
        bucket, final_image = TickStore._pandas_to_bucket(data, symbol, initial_image)
        assert final_image == {'index': dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz)), 'A': 3, 'B': 3.0, 'C': 'DESC', 'D': 1}
        assert IMAGE_DOC in bucket
        assert bucket[COUNT] == 3
        assert bucket[START] == dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz))
        assert bucket[END] == dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz))
        assert set(bucket[COLUMNS]) == set(('A', 'B', 'D'))
        assert set(bucket[COLUMNS]['A']) == set((ROWMASK, DTYPE, DATA))
        assert get_coldata(bucket[COLUMNS]['A']) == ([120, 122, 3], [1, 1, 1, 0, 0, 0, 0, 0])
        values, rowmask = get_coldata(bucket[COLUMNS]['B'])
        assert np.isnan(values[0]) and values[1:] == [2.0, 3.0]
        assert rowmask == [1, 1, 1, 0, 0, 0, 0, 0]
        values, rowmask = get_coldata(bucket[COLUMNS]['D'])
        assert np.isnan(values[1])
        assert values[0] == 1 and values[2] == 1
        assert rowmask == [1, 1, 1, 0, 0, 0, 0, 0]
        index = [dt.fromtimestamp(int(i/1000)).replace(tzinfo=mktz(tz)) for i in
                 list(np.cumsum(np.frombuffer(decompress(bucket[INDEX]), dtype='uint64')))]
>       assert index == tick_index
E       AssertionError: assert [datetime.dat...neinfo/UTC'))] == [datetime.dat...neinfo/UTC'))]
E         At index 0 diff: datetime.datetime(2014, 1, 1, 17, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')) != datetime.datetime(2014, 1, 2, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC'))
E         Use -v to get the full diff

tests/unit/tickstore/test_tickstore.py:162: AssertionError
----------------------------- Captured stderr call -----------------------------
2021-01-15 23:55:06,386 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
=============================== warnings summary ===============================
arctic/_util.py:6
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/_util.py:6: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.
    from pandas.util.testing import assert_frame_equal

tests/integration/test_arctic.py: 4 warnings
tests/integration/test_concurrent_append.py: 1 warning
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 45 warnings
tests/integration/scripts/test_copy_data.py: 23 warnings
tests/integration/store/test_bitemporal_store.py: 43 warnings
tests/integration/store/test_ndarray_store.py: 37 warnings
tests/integration/store/test_ndarray_store_append.py: 69 warnings
tests/integration/store/test_pandas_store.py: 378 warnings
tests/integration/store/test_version_store.py: 653 warnings
tests/integration/store/test_version_store_audit.py: 29 warnings
tests/integration/store/test_version_store_corruption.py: 14 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:600: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    sha.update(item.tostring())

tests/integration/test_arctic.py: 3 warnings
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 42 warnings
tests/integration/scripts/test_copy_data.py: 21 warnings
tests/integration/store/test_bitemporal_store.py: 29 warnings
tests/integration/store/test_ndarray_store.py: 828 warnings
tests/integration/store/test_ndarray_store_append.py: 314 warnings
tests/integration/store/test_pandas_store.py: 285 warnings
tests/integration/store/test_version_store.py: 573 warnings
tests/integration/store/test_version_store_audit.py: 21 warnings
tests/integration/store/test_version_store_corruption.py: 18 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:657: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    chunks = [(item[i * rows_per_chunk: (i + 1) * rows_per_chunk]).tostring() for i in idxs]

tests/integration/test_arctic.py: 3 warnings
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 42 warnings
tests/integration/scripts/test_copy_data.py: 21 warnings
tests/integration/store/test_bitemporal_store.py: 29 warnings
tests/integration/store/test_pandas_store.py: 39 warnings
tests/integration/store/test_version_store.py: 1979 warnings
tests/integration/store/test_version_store_audit.py: 21 warnings
tests/integration/store/test_version_store_corruption.py: 138 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_pandas_ndarray_store.py:58: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    return Binary(compress(index.tostring()))

tests/integration/test_arctic.py: 5 warnings
tests/integration/scripts/test_delete_library.py: 5 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/_cache.py:120: DeprecationWarning: update is deprecated. Use replace_one, update_one or update_many instead.
    {"$pull": {"data": item}}

tests/integration/test_arctic.py::test_list_libraries_cached
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/test_arctic.py:250: DeprecationWarning: remove is deprecated. Use delete_one or delete_many instead.
    arctic._conn.meta_db.cache.remove({})

tests/integration/chunkstore/test_chunkstore.py: 9982 warnings
tests/integration/chunkstore/test_fixes.py: 107 warnings
tests/integration/chunkstore/test_utils.py: 2 warnings
tests/integration/chunkstore/tools/test_tools.py: 52 warnings
tests/unit/serialization/test_numpy_arrays.py: 26 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/numpy_arrays.py:119: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    arrays.append(arr.tostring())

tests/integration/store/test_ndarray_store.py: 3 warnings
tests/integration/store/test_ndarray_store_append.py: 583 warnings
tests/integration/store/test_pandas_store.py: 21 warnings
tests/integration/store/test_version_store.py: 1546 warnings
tests/integration/store/test_version_store_corruption.py: 124 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:449: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    data = item.tostring()

tests/integration/store/test_ndarray_store.py::test_save_read_large_ndarray
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/store/test_ndarray_store.py:146: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    assert len(ndarr.tostring()) > 16 * 1024 * 1024                         # FIXME: deprecated tostring

tests/integration/store/test_pandas_store.py::test_save_read_pandas_empty_series_with_datetime_multiindex_with_timezone
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/store/test_pandas_store.py:147: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    df = Series(data=[], index=empty_index)

tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
  /home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/lib/python3.6/site-packages/numpy/core/numeric.py:2378: DeprecationWarning: elementwise comparison failed; this will raise an error in the future.
    return bool(asarray(a1 == a2).all())

tests/integration/store/test_pickle_store.py::test_bson_large_object
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/store/test_pickle_store.py:53: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    'large_thing': np.random.rand(int(2.1 * 1024 * 1024)).tostring()}       # FIXME: deprecated tostring

tests/integration/tickstore/test_toplevel.py: 44 warnings
tests/integration/tickstore/test_ts_read.py: 5 warnings
tests/integration/tickstore/test_ts_write.py: 2 warnings
tests/unit/tickstore/test_tickstore.py: 1 warning
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:707: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rowmask = Binary(lz4_compressHC(np.packbits(np.ones(len(df), dtype='uint8')).tostring()))

tests/integration/tickstore/test_toplevel.py: 176 warnings
tests/integration/tickstore/test_ts_read.py: 6 warnings
tests/integration/tickstore/test_ts_write.py: 6 warnings
tests/unit/tickstore/test_tickstore.py: 3 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:718: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    DATA: Binary(lz4_compressHC(array.tostring())),

tests/integration/tickstore/test_toplevel.py: 44 warnings
tests/integration/tickstore/test_ts_read.py: 4 warnings
tests/integration/tickstore/test_ts_write.py: 2 warnings
tests/unit/tickstore/test_tickstore.py: 1 warning
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:727: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    recs[index_name].astype('datetime64[ms]').view('uint64')))).tostring()))

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 12 warnings
tests/integration/tickstore/test_ts_read.py: 136 warnings
tests/integration/tickstore/test_ts_write.py: 18 warnings
tests/unit/tickstore/test_tickstore.py: 8 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:758: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    for k, v in iteritems(rowmask)])

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 12 warnings
tests/integration/tickstore/test_ts_read.py: 136 warnings
tests/integration/tickstore/test_ts_write.py: 18 warnings
tests/unit/tickstore/test_tickstore.py: 8 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:763: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rtn[COLUMNS][k] = {DATA: Binary(lz4_compressHC(v.tostring())),

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 6 warnings
tests/integration/tickstore/test_ts_read.py: 38 warnings
tests/integration/tickstore/test_ts_write.py: 7 warnings
tests/unit/tickstore/test_tickstore.py: 2 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:776: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rtn[INDEX] = Binary(lz4_compressHC(np.concatenate(([data['index'][0]], np.diff(data['index']))).tostring()))

tests/unit/chunkstore/test_passthrough_chunker.py::test_pass_thru
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/chunkstore/passthrough_chunker.py:75: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    return Series()

tests/unit/chunkstore/test_passthrough_chunker.py::test_pass_thru
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/chunkstore/test_passthrough_chunker.py:18: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    assert(p.exclude(Series([1, 2, 3]), None).equals(Series()))

tests/unit/serialization/test_incremental.py: 41846 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/incremental.py:223: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    chunk = chunk.tostring() if chunk is not None and get_bytes else chunk

tests/unit/serialization/test_numpy_arrays.py::test_string_cols_with_nans
tests/unit/serialization/test_numpy_arrays.py::test_objify_with_missing_columns
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/numpy_arrays.py:118: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    masks[str(c)] = Binary(compress(mask.tostring()))

tests/unit/store/test_pickle_store.py::test_unpickle_highest_protocol
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_pickle_store.py:121: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    'blob': compressHC(cPickle.dumps(pd.Series(), protocol=cPickle.HIGHEST_PROTOCOL)),

tests/unit/store/test_pickle_store.py::test_unpickle_highest_protocol
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_pickle_store.py:127: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    expected = pd.Series()

-- Docs: https://docs.pytest.org/en/stable/warnings.html
---- generated xml file: /home/cwm/git/bb.FLXSA/quant/arctic_878/junit.xml -----

---------- coverage: platform linux, python 3.6.12-final-0 -----------
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED tests/integration/test_arctic.py::test_indexes - AssertionError: asser...
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data6-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data7-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data8-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data9-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data10-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data11-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_prune_versions.py::test_fix_broken_snapshot_references
FAILED tests/integration/scripts/test_prune_versions.py::test_keep_only_one_version
FAILED tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_unicode_index_name
FAILED tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_unicode_index_name
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_falls_in_a_single_underlying_library
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing
FAILED tests/integration/tickstore/test_toplevel.py::test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange
FAILED tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_list_of_dicts
FAILED tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_correct_timezone
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range[tickstore]
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range_end_not_in_range[tickstore]
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range_no_bounds[tickstore]
FAILED tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_detects_concurrent_writes
FAILED tests/unit/tickstore/test_tickstore.py::test_mongo_date_range_query - ...
FAILED tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_with_image
FAILED tests/unit/tickstore/test_tickstore.py::test_tickstore_pandas_to_bucket_image
= 30 failed, 1286 passed, 3 skipped, 19 xfailed, 1 xpassed, 60735 warnings in 4606.72s (1:16:46) =
ERROR: InvocationError for command /home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/bin/python setup.py test (exited with code 1)

commands failed
