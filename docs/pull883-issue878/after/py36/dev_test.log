===============================================================================
=========================== short test summary info ============================


===============================================================================

dev36 run-test-pre: PYTHONHASHSEED='318544600'
dev36 run-test: commands[0] | python -c 'print((80*"~")+"\ntestenv:dev-python3.6\n"+(80*"~"))'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
testenv:dev-python3.6
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
dev36 run-test: commands[1] | python -c 'print(r'"'"'/home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/bin/python'"'"')'
/home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/bin/python
dev36 run-test: commands[2] | python setup.py test --pytest-args=-v
running test
WARNING: Testing via this command is deprecated and will be removed in a future version. Users looking for a generic test entry point independent of test runner are encouraged to use tox.
running egg_info
writing arctic.egg-info/PKG-INFO
writing dependency_links to arctic.egg-info/dependency_links.txt
writing entry points to arctic.egg-info/entry_points.txt
writing requirements to arctic.egg-info/requires.txt
writing top-level names to arctic.egg-info/top_level.txt
writing manifest file 'arctic.egg-info/SOURCES.txt'
running build_ext
============================= test session starts ==============================
platform linux -- Python 3.6.12, pytest-6.2.1, py-1.10.0, pluggy-0.13.1 -- /home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/bin/python
cachedir: .tox/dev36/.pytest_cache
rootdir: /home/cwm/git/bb.FLXSA/quant/arctic_878
plugins: xdist-1.26.0, shutil-1.7.0, server-fixtures-1.7.0, forked-1.3.0, cov-2.10.1, timeout-1.4.2
collecting ... collected 1339 items

tests/integration/test_arctic.py::test_connect_to_Arctic_string PASSED   [  0%]2021-01-17 12:51:30,136 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_connect_to_Arctic_connection PASSED [  0%]2021-01-17 12:51:32,121 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_reset_Arctic PASSED               [  0%]2021-01-17 12:51:34,380 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_re_authenticate_on_arctic_reset PASSED [  0%]2021-01-17 12:51:36,348 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_simple PASSED                     [  0%]2021-01-17 12:51:39,505 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_indexes FAILED                    [  0%]
tests/integration/test_arctic.py::test_delete_library PASSED             [  0%]2021-01-17 12:51:44,394 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_quota PASSED                      [  0%]2021-01-17 12:51:46,402 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_check_quota PASSED                [  0%]2021-01-17 12:51:48,579 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_default_mongo_retry_timout PASSED [  0%]
tests/integration/test_arctic.py::test_lib_rename PASSED                 [  0%]
tests/integration/test_arctic.py::test_lib_rename_namespace PASSED       [  0%]
tests/integration/test_arctic.py::test_lib_type PASSED                   [  0%]2021-01-17 12:51:55,311 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_library_exists PASSED             [  1%]2021-01-17 12:51:57,265 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_library_exists_no_auth PASSED     [  1%]
tests/integration/test_arctic.py::test_list_libraries_cached PASSED      [  1%]2021-01-17 12:52:01,765 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_initialize_library_adds_to_cache PASSED [  1%]2021-01-17 12:52:04,839 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_cache_does_not_return_stale_data PASSED [  1%]2021-01-17 12:52:07,573 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_renaming_returns_new_name_in_cache PASSED [  1%]2021-01-17 12:52:10,065 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_deleting_library_removes_it_from_cache PASSED [  1%]2021-01-17 12:52:13,269 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic.py::test_disable_cache_by_settings PASSED  [  1%]2021-01-17 12:52:15,287 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic_multithreading.py::test_multiprocessing_safety PASSED [  1%]2021-01-17 12:52:34,016 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_arctic_multithreading.py::test_multiprocessing_safety_parent_children_race PASSED [  1%]2021-01-17 12:52:56,256 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_async_arctic.py::test_async_arctic PASSED         [  1%]
tests/integration/test_compress_integration.py::test_roundtrip[arctic/lz4] PASSED [  1%]
tests/integration/test_compress_integration.py::test_roundtrip[arcticHC/lz4] PASSED [  1%]
tests/integration/test_compress_integration.py::test_roundtrip[lz4/arctic] PASSED [  2%]
tests/integration/test_compress_integration.py::test_roundtrip[lz4HC/arctic] PASSED [  2%]
tests/integration/test_compress_integration.py::test_performance_sequential[300-50000.0] PASSED [  2%]
tests/integration/test_compress_integration.py::test_performance_sequential[5-2000000.0] PASSED [  2%]
tests/integration/test_compress_integration.py::test_performance_sequential[10-2000000.0] PASSED [  2%]
tests/integration/test_compress_integration.py::test_performance_sequential[100-2000000.0] PASSED [  2%]
tests/integration/test_compress_integration.py::test_performance_sequential[250-2000000.0] PASSED [  2%]
tests/integration/test_compress_integration.py::test_exceptions PASSED   [  2%]
tests/integration/test_concurrent_append.py::test_append_kill PASSED     [  2%]2021-01-17 12:57:56,303 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_decorators.py::test_get_host_VersionStore PASSED  [  2%]2021-01-17 12:57:58,874 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_howtos.py::test_howto[how_to_custom_arctic_library.py] PASSED [  2%]2021-01-17 12:58:00,421 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/test_howtos.py::test_howto[how_to_use_arctic.py] PASSED [  2%]2021-01-17 12:58:02,447 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_dataframe PASSED [  2%]2021-01-17 12:58:04,496 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_upsert_dataframe PASSED [  2%]2021-01-17 12:58:07,043 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_dataframe_noindex PASSED [  3%]2021-01-17 12:58:08,956 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_overwrite_dataframe PASSED [  3%]2021-01-17 12:58:10,880 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_overwrite_dataframe_noindex PASSED [  3%]2021-01-17 12:58:12,814 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_overwrite_dataframe_monthly PASSED [  3%]2021-01-17 12:58:14,843 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_read_with_daterange PASSED [  3%]2021-01-17 12:58:16,777 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_read_with_daterange_noindex PASSED [  3%]2021-01-17 12:58:18,679 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_store_single_index_df PASSED [  3%]2021-01-17 12:58:20,581 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_no_range PASSED    [  3%]2021-01-17 12:58:22,525 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_closed_open PASSED [  3%]2021-01-17 12:58:24,466 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_open_closed PASSED [  3%]2021-01-17 12:58:26,390 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_closed_open_no_index PASSED [  3%]2021-01-17 12:58:28,522 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_open_open_no_index PASSED [  3%]2021-01-17 12:58:30,478 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_monthly_df PASSED  [  3%]2021-01-17 12:58:32,408 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_yearly_df PASSED   [  4%]2021-01-17 12:58:34,348 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_daily PASSED [  4%]2021-01-17 12:58:36,486 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_monthly PASSED [  4%]2021-01-17 12:58:39,082 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_yearly PASSED [  4%]2021-01-17 12:58:41,004 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_existing_chunk PASSED [  4%]2021-01-17 12:58:42,908 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_store_objects_df PASSED [  4%]2021-01-17 12:58:44,816 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_empty_range PASSED [  4%]2021-01-17 12:58:46,783 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update PASSED      [  4%]2021-01-17 12:58:48,734 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_no_overlap PASSED [  4%]2021-01-17 12:58:52,990 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_chunk_range PASSED [  4%]2021-01-17 12:58:55,120 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_chunk_range_overlap PASSED [  4%]2021-01-17 12:58:57,040 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_before PASSED [  4%]2021-01-17 12:58:58,980 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_and_update PASSED [  4%]2021-01-17 12:59:00,931 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_same_df PASSED [  5%]2021-01-17 12:59:02,856 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_df_with_multiindex PASSED [  5%]2021-01-17 12:59:04,773 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_with_strings PASSED [  5%]2021-01-17 12:59:06,909 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_with_strings_multiindex_append PASSED [  5%]2021-01-17 12:59:09,485 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_multiple_actions PASSED [  5%]2021-01-17 12:59:27,498 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_multiple_actions_monthly_data PASSED [  5%]2021-01-17 12:59:36,991 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_delete PASSED      [  5%]2021-01-17 12:59:39,617 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_delete_empty_df_on_range PASSED [  5%]2021-01-17 12:59:41,620 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_get_info PASSED    [  5%]2021-01-17 12:59:43,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_get_info_after_append PASSED [  5%]2021-01-17 12:59:46,114 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_get_info_after_update PASSED [  5%]2021-01-17 12:59:48,057 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_delete_range PASSED [  5%]2021-01-17 12:59:50,056 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_delete_range_noindex PASSED [  5%]2021-01-17 12:59:52,591 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_read_chunk_range PASSED [  5%]2021-01-17 12:59:54,536 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_read_data_doesnt_exist PASSED [  6%]
tests/integration/chunkstore/test_chunkstore.py::test_invalid_type PASSED [  6%]
tests/integration/chunkstore/test_chunkstore.py::test_append_no_data PASSED [  6%]
tests/integration/chunkstore/test_chunkstore.py::test_append_upsert PASSED [  6%]2021-01-17 13:00:02,738 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_append_no_new_data PASSED [  6%]2021-01-17 13:00:04,966 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_overwrite_series PASSED [  6%]2021-01-17 13:00:06,881 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_overwrite_series_monthly PASSED [  6%]2021-01-17 13:00:08,833 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_pandas_datetime_index_store_series PASSED [  6%]2021-01-17 13:00:10,805 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_yearly_series PASSED [  6%]2021-01-17 13:00:13,344 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_store_objects_series PASSED [  6%]2021-01-17 13:00:15,252 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_series PASSED [  6%]2021-01-17 13:00:17,180 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_update_same_series PASSED [  6%]2021-01-17 13:00:19,101 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_dtype_mismatch PASSED [  6%]2021-01-17 13:00:21,033 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_read_column_subset PASSED [  7%]2021-01-17 13:00:23,026 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_rename PASSED      [  7%]
tests/integration/chunkstore/test_chunkstore.py::test_pass_thru_chunker PASSED [  7%]2021-01-17 13:00:27,719 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_pass_thru_chunker_append PASSED [  7%]2021-01-17 13:00:29,610 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_pass_thru_chunker_update PASSED [  7%]2021-01-17 13:00:31,520 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_pass_thru_chunker_update_range PASSED [  7%]2021-01-17 13:00:33,428 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_size_chunking PASSED [  7%]2021-01-17 13:00:39,949 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_size_chunk_append PASSED [  7%]2021-01-17 13:00:53,112 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_delete_range_segment PASSED [  7%]2021-01-17 13:01:03,963 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_size_chunk_update PASSED [  7%]2021-01-17 13:01:17,083 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_size_chunk_multiple_update PASSED [  7%]2021-01-17 13:01:24,409 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_get_chunk_range PASSED [  7%]2021-01-17 13:01:26,919 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_iterators PASSED   [  7%]2021-01-17 13:01:28,939 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_unnamed_colums PASSED [  7%]
tests/integration/chunkstore/test_chunkstore.py::test_quarterly_data PASSED [  8%]2021-01-17 13:01:33,075 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_list_symbols PASSED [  8%]2021-01-17 13:01:42,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_stats PASSED       [  8%]2021-01-17 13:01:52,363 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_metadata PASSED    [  8%]2021-01-17 13:01:55,207 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_metadata_update PASSED [  8%]2021-01-17 13:01:57,112 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_metadata_nosymbol PASSED [  8%]2021-01-17 13:01:58,972 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_metadata_none PASSED [  8%]2021-01-17 13:02:00,861 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_metadata_invalid PASSED [  8%]2021-01-17 13:02:02,745 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_metadata PASSED [  8%]2021-01-17 13:02:04,659 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_metadata_nosymbol PASSED [  8%]2021-01-17 13:02:06,547 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_audit PASSED       [  8%]2021-01-17 13:02:08,682 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_chunkstore_misc PASSED [  8%]2021-01-17 13:02:10,571 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_unsorted_index PASSED [  8%]2021-01-17 13:02:12,581 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_unsorted_date_col PASSED [  9%]2021-01-17 13:02:14,513 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_chunk_range_with_dti PASSED [  9%]2021-01-17 13:02:16,418 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_chunkstore_multiread PASSED [  9%]2021-01-17 13:02:18,436 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_chunkstore_multiread_samedate PASSED [  9%]2021-01-17 13:02:20,492 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_chunkstore.py::test_write_dataframe_with_func PASSED [  9%]2021-01-17 13:02:22,506 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_write_dataframe PASSED  [  9%]2021-01-17 13:02:24,405 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_compression PASSED      [  9%]2021-01-17 13:02:28,591 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_date_interval PASSED    [  9%]2021-01-17 13:02:31,349 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_rewrite PASSED          [  9%]2021-01-17 13:02:33,326 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_iterator PASSED         [  9%]2021-01-17 13:02:35,688 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_missing_cols PASSED     [  9%]2021-01-17 13:02:37,706 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_column_copy PASSED      [  9%]2021-01-17 13:02:40,208 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_fixes.py::test_get_info_empty PASSED   [  9%]2021-01-17 13:02:42,088 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/test_utils.py::test_read_apply PASSED       [ 10%]2021-01-17 13:02:43,980 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/chunkstore/tools/test_tools.py::test_segment_repair_tool PASSED [ 10%]2021-01-17 13:02:50,118 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/fixtures/test_arctic.py::test_arctic PASSED            [ 10%]2021-01-17 13:02:52,094 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/fixtures/test_arctic.py::test_library PASSED           [ 10%]2021-01-17 13:02:54,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/fixtures/test_arctic.py::test_ms_lib PASSED            [ 10%]2021-01-17 13:02:55,680 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data0-FwPointersCfg.DISABLED] PASSED [ 10%]2021-01-17 13:02:57,724 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data1-FwPointersCfg.HYBRID] PASSED [ 10%]2021-01-17 13:02:59,749 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data2-FwPointersCfg.ENABLED] PASSED [ 10%]2021-01-17 13:03:01,980 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data3-FwPointersCfg.DISABLED] PASSED [ 10%]2021-01-17 13:03:04,629 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data4-FwPointersCfg.HYBRID] PASSED [ 10%]2021-01-17 13:03:06,646 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[True-data5-FwPointersCfg.ENABLED] PASSED [ 10%]2021-01-17 13:03:08,673 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data6-FwPointersCfg.DISABLED] FAILED [ 10%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data7-FwPointersCfg.HYBRID] FAILED [ 10%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data8-FwPointersCfg.ENABLED] 2021-01-17 13:03:14,808 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FAILED [ 10%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data9-FwPointersCfg.DISABLED] FAILED [ 11%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data10-FwPointersCfg.HYBRID] 2021-01-17 13:03:18,897 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FAILED [ 11%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data11-FwPointersCfg.ENABLED] FAILED [ 11%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data0-FwPointersCfg.DISABLED] PASSED [ 11%]2021-01-17 13:03:23,733 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data1-FwPointersCfg.HYBRID] PASSED [ 11%]2021-01-17 13:03:25,801 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data2-FwPointersCfg.ENABLED] PASSED [ 11%]2021-01-17 13:03:27,826 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data3-FwPointersCfg.DISABLED] PASSED [ 11%]2021-01-17 13:03:29,875 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data4-FwPointersCfg.HYBRID] PASSED [ 11%]2021-01-17 13:03:31,950 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[True-data5-FwPointersCfg.ENABLED] PASSED [ 11%]2021-01-17 13:03:34,002 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data6-FwPointersCfg.DISABLED] PASSED [ 11%]2021-01-17 13:03:36,027 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data7-FwPointersCfg.HYBRID] PASSED [ 11%]2021-01-17 13:03:38,045 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data8-FwPointersCfg.ENABLED] PASSED [ 11%]2021-01-17 13:03:40,083 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data9-FwPointersCfg.DISABLED] PASSED [ 11%]2021-01-17 13:03:42,123 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data10-FwPointersCfg.HYBRID] PASSED [ 12%]2021-01-17 13:03:44,175 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_noop[False-data11-FwPointersCfg.ENABLED] PASSED [ 12%]2021-01-17 13:03:46,527 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data0-FwPointersCfg.DISABLED] PASSED [ 12%]2021-01-17 13:03:48,608 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data1-FwPointersCfg.HYBRID] PASSED [ 12%]2021-01-17 13:03:51,250 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data2-FwPointersCfg.ENABLED] PASSED [ 12%]2021-01-17 13:03:53,270 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data3-FwPointersCfg.DISABLED] PASSED [ 12%]2021-01-17 13:03:55,297 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data4-FwPointersCfg.HYBRID] PASSED [ 12%]2021-01-17 13:03:57,320 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[True-data5-FwPointersCfg.ENABLED] PASSED [ 12%]2021-01-17 13:03:59,387 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data6-FwPointersCfg.DISABLED] PASSED [ 12%]2021-01-17 13:04:01,465 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data7-FwPointersCfg.HYBRID] PASSED [ 12%]2021-01-17 13:04:03,509 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data8-FwPointersCfg.ENABLED] PASSED [ 12%]2021-01-17 13:04:05,531 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data9-FwPointersCfg.DISABLED] PASSED [ 12%]2021-01-17 13:04:07,761 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data10-FwPointersCfg.HYBRID] PASSED [ 12%]2021-01-17 13:04:09,804 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks_ignores_recent[False-data11-FwPointersCfg.ENABLED] PASSED [ 12%]2021-01-17 13:04:11,848 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data0-FwPointersCfg.DISABLED] PASSED [ 13%]2021-01-17 13:04:13,884 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data1-FwPointersCfg.HYBRID] PASSED [ 13%]2021-01-17 13:04:15,958 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data2-FwPointersCfg.ENABLED] PASSED [ 13%]2021-01-17 13:04:18,003 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data3-FwPointersCfg.DISABLED] PASSED [ 13%]2021-01-17 13:04:20,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data4-FwPointersCfg.HYBRID] PASSED [ 13%]2021-01-17 13:04:22,191 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunk_doesnt_break_versions[data5-FwPointersCfg.ENABLED] PASSED [ 13%]2021-01-17 13:04:24,280 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data0-FwPointersCfg.DISABLED] PASSED [ 13%]2021-01-17 13:04:26,306 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data1-FwPointersCfg.HYBRID] PASSED [ 13%]2021-01-17 13:04:28,505 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data2-FwPointersCfg.ENABLED] PASSED [ 13%]2021-01-17 13:04:30,521 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data3-FwPointersCfg.DISABLED] PASSED [ 13%]2021-01-17 13:04:32,589 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data4-FwPointersCfg.HYBRID] PASSED [ 13%]2021-01-17 13:04:34,656 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[True-data5-FwPointersCfg.ENABLED] PASSED [ 13%]2021-01-17 13:04:36,695 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED] FAILED [ 13%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID] FAILED [ 14%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED] FAILED [ 14%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED] FAILED [ 14%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID] FAILED [ 14%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED] FAILED [ 14%]
tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data0-FwPointersCfg.DISABLED] PASSED [ 14%]2021-01-17 13:04:52,964 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data1-FwPointersCfg.HYBRID] PASSED [ 14%]2021-01-17 13:04:55,010 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data2-FwPointersCfg.ENABLED] PASSED [ 14%]2021-01-17 13:04:57,132 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data3-FwPointersCfg.DISABLED] PASSED [ 14%]2021-01-17 13:04:59,175 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data4-FwPointersCfg.HYBRID] PASSED [ 14%]2021-01-17 13:05:01,226 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[True-data5-FwPointersCfg.ENABLED] PASSED [ 14%]2021-01-17 13:05:03,294 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data6-FwPointersCfg.DISABLED] PASSED [ 14%]2021-01-17 13:05:05,330 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data7-FwPointersCfg.HYBRID] PASSED [ 14%]2021-01-17 13:05:07,360 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data8-FwPointersCfg.ENABLED] PASSED [ 15%]2021-01-17 13:05:09,390 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data9-FwPointersCfg.DISABLED] PASSED [ 15%]2021-01-17 13:05:11,462 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data10-FwPointersCfg.HYBRID] PASSED [ 15%]2021-01-17 13:05:14,112 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots_nop[False-data11-FwPointersCfg.ENABLED] PASSED [ 15%]2021-01-17 13:05:16,175 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data0-FwPointersCfg.DISABLED] PASSED [ 15%]2021-01-17 13:05:18,226 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data1-FwPointersCfg.HYBRID] PASSED [ 15%]2021-01-17 13:05:20,260 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data2-FwPointersCfg.ENABLED] PASSED [ 15%]2021-01-17 13:05:22,311 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data3-FwPointersCfg.DISABLED] PASSED [ 15%]2021-01-17 13:05:24,413 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data4-FwPointersCfg.HYBRID] PASSED [ 15%]2021-01-17 13:05:26,457 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[True-data5-FwPointersCfg.ENABLED] PASSED [ 15%]2021-01-17 13:05:28,509 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED] PASSED [ 15%]2021-01-17 13:05:30,534 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID] PASSED [ 15%]2021-01-17 13:05:32,576 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED] PASSED [ 15%]2021-01-17 13:05:35,206 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED] PASSED [ 15%]2021-01-17 13:05:37,250 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID] PASSED [ 16%]2021-01-17 13:05:39,302 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_arctic_fsck.py::test_dont_cleanup_recent_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED] PASSED [ 16%]2021-01-17 13:05:41,347 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_copy_data.py::test_copy_data_no_force PASSED [ 16%]2021-01-17 13:05:44,074 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_copy_data.py::test_copy_data_force PASSED [ 16%]2021-01-17 13:05:46,826 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_copy_data.py::test_copy_data_splice PASSED [ 16%]2021-01-17 13:05:50,857 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_copy_data.py::test_copy_data_wild PASSED  [ 16%]2021-01-17 13:05:53,559 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_copy_data.py::test_copy_data_doesnt_exist PASSED [ 16%]2021-01-17 13:05:56,094 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_delete_library.py::test_delete_library PASSED [ 16%]2021-01-17 13:05:59,392 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_delete_library.py::test_delete_library1 PASSED [ 16%]2021-01-17 13:06:02,237 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_delete_library.py::test_delete_library2 PASSED [ 16%]2021-01-17 13:06:05,069 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_delete_library.py::test_delete_library3 PASSED [ 16%]2021-01-17 13:06:07,883 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_delete_library.py::test_delete_library_doesnt_exist PASSED [ 16%]2021-01-17 13:06:10,408 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_enable_sharding.py::test_enable_sharding PASSED [ 16%]2021-01-17 13:06:12,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_enable_sharding.py::test_enable_sharding_already_on_db PASSED [ 17%]2021-01-17 13:06:14,372 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_enable_sharding.py::test_enable_sharding_on_db_other_failure PASSED [ 17%]
tests/integration/scripts/test_initialize_library.py::test_init_library PASSED [ 17%]2021-01-17 13:06:18,470 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_initialize_library.py::test_init_library_no_arctic_prefix PASSED [ 17%]2021-01-17 13:06:20,462 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_initialize_library.py::test_init_library_quota PASSED [ 17%]2021-01-17 13:06:22,424 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_initialize_library.py::test_init_library_bad_library PASSED [ 17%]2021-01-17 13:06:23,677 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_list_libraries.py::test_list_library PASSED [ 17%]2021-01-17 13:06:25,639 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_list_libraries.py::test_list_library_args PASSED [ 17%]2021-01-17 13:06:27,629 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_list_libraries.py::test_list_library_args_not_found PASSED [ 17%]2021-01-17 13:06:30,201 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_prune_versions.py::test_prune_versions_symbol PASSED [ 17%]2021-01-17 13:06:32,164 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_prune_versions.py::test_prune_versions_full PASSED [ 17%]2021-01-17 13:06:34,204 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_prune_versions.py::test_keep_recent_snapshots PASSED [ 17%]2021-01-17 13:06:36,298 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/scripts/test_prune_versions.py::test_fix_broken_snapshot_references FAILED [ 17%]
tests/integration/scripts/test_prune_versions.py::test_keep_only_one_version FAILED [ 17%]
tests/integration/store/test_bitemporal_store.py::test_new_ts_read_write PASSED [ 18%]2021-01-17 13:06:42,612 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_read_ts_raw PASSED [ 18%]2021-01-17 13:06:44,635 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_write_ts_with_column_name_same_as_observed_dt_ok PASSED [ 18%]2021-01-17 13:06:47,301 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_last_update PASSED [ 18%]2021-01-17 13:06:49,314 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_existing_ts_update_and_read PASSED [ 18%]2021-01-17 13:06:51,324 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_existing_ts_update_existing_data_and_read PASSED [ 18%]2021-01-17 13:06:53,358 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_read_ts_with_historical_update PASSED [ 18%]2021-01-17 13:06:56,046 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_read_ts_with_historical_update_and_new_row PASSED [ 18%]2021-01-17 13:06:58,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_insert_new_rows_in_middle_remains_sorted PASSED [ 18%]2021-01-17 13:07:00,351 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_insert_versions_inbetween_works_ok PASSED [ 18%]2021-01-17 13:07:02,429 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_read_ts_raw_all_version_ok PASSED [ 18%]2021-01-17 13:07:04,623 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_bitemporal_store_saves_as_of_with_timezone PASSED [ 18%]2021-01-17 13:07:06,646 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_bitemporal_store_read_as_of_timezone PASSED [ 18%]2021-01-17 13:07:08,683 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_multi_index_ts_read_write PASSED [ 19%]2021-01-17 13:07:10,688 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_multi_index_ts_read_raw PASSED [ 19%]2021-01-17 13:07:12,713 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_bitemporal_store.py::test_multi_index_update PASSED [ 19%]2021-01-17 13:07:14,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_pickle PASSED       [ 19%]2021-01-17 13:07:16,380 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_has_symbol PASSED   [ 19%]2021-01-17 13:07:18,601 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_list_symbols PASSED [ 19%]2021-01-17 13:07:20,187 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_read_history PASSED [ 19%]2021-01-17 13:07:21,893 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_read PASSED         [ 19%]2021-01-17 13:07:23,656 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_write_history PASSED [ 19%]2021-01-17 13:07:25,294 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_append PASSED       [ 19%]2021-01-17 13:07:26,961 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_prepend PASSED      [ 19%]2021-01-17 13:07:28,624 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_pop PASSED          [ 19%]2021-01-17 13:07:30,299 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_metadata_store.py::test_purge PASSED        [ 19%]2021-01-17 13:07:31,899 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_write_new_column_name_to_arctic_1_40_data PASSED [ 20%]2021-01-17 13:07:34,163 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_simple_ndarray PASSED [ 20%]2021-01-17 13:07:36,146 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_read_simple_ndarray_from_secondary XFAIL [ 20%]
tests/integration/store/test_ndarray_store.py::test_save_read_big_1darray[FwPointersCfg.DISABLED] PASSED [ 20%]2021-01-17 13:07:46,503 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_big_1darray[FwPointersCfg.HYBRID] PASSED [ 20%]2021-01-17 13:07:56,105 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_big_1darray[FwPointersCfg.ENABLED] PASSED [ 20%]2021-01-17 13:08:05,039 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_and_resave_reuses_chunks[FwPointersCfg.DISABLED] PASSED [ 20%]2021-01-17 13:08:07,673 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_and_resave_reuses_chunks[FwPointersCfg.HYBRID] PASSED [ 20%]2021-01-17 13:08:09,672 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_and_resave_reuses_chunks[FwPointersCfg.ENABLED] PASSED [ 20%]2021-01-17 13:08:11,677 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_big_2darray[FwPointersCfg.DISABLED] PASSED [ 20%]2021-01-17 13:08:19,945 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_big_2darray[FwPointersCfg.HYBRID] PASSED [ 20%]2021-01-17 13:08:28,723 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_big_2darray[FwPointersCfg.ENABLED] PASSED [ 20%]2021-01-17 13:08:37,554 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_get_info_bson_object PASSED [ 20%]2021-01-17 13:08:40,156 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_ndarray_with_array_field PASSED [ 20%]2021-01-17 13:08:42,135 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_save_read_ndarray PASSED [ 21%]2021-01-17 13:08:44,132 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_multiple_write[FwPointersCfg.DISABLED] PASSED [ 21%]2021-01-17 13:08:46,198 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_multiple_write[FwPointersCfg.HYBRID] PASSED [ 21%]2021-01-17 13:08:48,377 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_multiple_write[FwPointersCfg.ENABLED] PASSED [ 21%]2021-01-17 13:08:50,379 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_cant_write_objects PASSED [ 21%]
tests/integration/store/test_ndarray_store.py::test_save_read_large_ndarray PASSED [ 21%]2021-01-17 13:08:52,754 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_mutable_ndarray PASSED [ 21%]2021-01-17 13:08:56,054 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store.py::test_delete_version_shouldnt_break_read XPASS [ 21%]2021-01-17 13:08:58,036 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray[FwPointersCfg.DISABLED] PASSED [ 21%]2021-01-17 13:09:00,032 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray[FwPointersCfg.HYBRID] PASSED [ 21%]2021-01-17 13:09:02,022 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray[FwPointersCfg.ENABLED] PASSED [ 21%]2021-01-17 13:09:04,000 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray_promoting_types[FwPointersCfg.DISABLED] PASSED [ 21%]2021-01-17 13:09:05,994 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray_promoting_types[FwPointersCfg.HYBRID] PASSED [ 21%]2021-01-17 13:09:07,985 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_simple_ndarray_promoting_types[FwPointersCfg.ENABLED] PASSED [ 22%]2021-01-17 13:09:10,149 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_types PASSED [ 22%]2021-01-17 13:09:12,131 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_types2 PASSED [ 22%]2021-01-17 13:09:14,112 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_types_smaller_sizes PASSED [ 22%]2021-01-17 13:09:16,097 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_types_larger_sizes PASSED [ 22%]2021-01-17 13:09:18,078 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_field_types_smaller_sizes PASSED [ 22%]2021-01-17 13:09:20,059 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_promote_field_types_larger_sizes PASSED [ 22%]2021-01-17 13:09:22,046 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_ndarray_with_field_shape[FwPointersCfg.DISABLED] PASSED [ 22%]2021-01-17 13:09:24,039 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_ndarray_with_field_shape[FwPointersCfg.HYBRID] PASSED [ 22%]2021-01-17 13:09:26,035 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_ndarray_with_field_shape[FwPointersCfg.ENABLED] PASSED [ 22%]2021-01-17 13:09:28,008 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_read_large_ndarray[FwPointersCfg.DISABLED] PASSED [ 22%]2021-01-17 13:09:32,896 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_read_large_ndarray[FwPointersCfg.HYBRID] PASSED [ 22%]2021-01-17 13:09:37,505 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_read_large_ndarray[FwPointersCfg.ENABLED] PASSED [ 22%]2021-01-17 13:09:42,781 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_read_ndarray[FwPointersCfg.DISABLED] PASSED [ 23%]2021-01-17 13:09:47,333 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_read_ndarray[FwPointersCfg.HYBRID] PASSED [ 23%]2021-01-17 13:09:50,678 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_read_ndarray[FwPointersCfg.ENABLED] PASSED [ 23%]2021-01-17 13:09:53,737 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_read_1row_ndarray PASSED [ 23%]2021-01-17 13:09:56,281 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_too_large_ndarray PASSED [ 23%]2021-01-17 13:10:00,344 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_field_append_keeps_all_columns PASSED [ 23%]2021-01-17 13:10:02,339 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_promotes_dtype[FwPointersCfg.DISABLED] PASSED [ 23%]2021-01-17 13:10:04,401 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_promotes_dtype[FwPointersCfg.HYBRID] PASSED [ 23%]2021-01-17 13:10:06,383 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_promotes_dtype[FwPointersCfg.ENABLED] PASSED [ 23%]2021-01-17 13:10:08,358 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_promotes_dtype2 PASSED [ 23%]2021-01-17 13:10:10,514 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_promotes_dtype3 PASSED [ 23%]2021-01-17 13:10:13,137 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_convert_to_structured_array PASSED [ 23%]2021-01-17 13:10:15,119 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite[FwPointersCfg.DISABLED] PASSED [ 23%]2021-01-17 13:10:17,151 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite[FwPointersCfg.HYBRID] PASSED [ 23%]2021-01-17 13:10:19,178 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite[FwPointersCfg.ENABLED] PASSED [ 24%]2021-01-17 13:10:21,217 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_2[FwPointersCfg.DISABLED] PASSED [ 24%]2021-01-17 13:10:24,037 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_2[FwPointersCfg.HYBRID] PASSED [ 24%]2021-01-17 13:10:26,259 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_2[FwPointersCfg.ENABLED] PASSED [ 24%]2021-01-17 13:10:28,488 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_3[FwPointersCfg.DISABLED] PASSED [ 24%]2021-01-17 13:10:31,129 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_3[FwPointersCfg.HYBRID] PASSED [ 24%]2021-01-17 13:10:33,239 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_empty_append_concat_and_rewrite_3[FwPointersCfg.ENABLED] PASSED [ 24%]2021-01-17 13:10:35,290 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_with_extra_columns PASSED [ 24%]2021-01-17 13:10:37,291 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_delete_append[FwPointersCfg.DISABLED] PASSED [ 24%]2021-01-17 13:10:39,281 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_delete_append[FwPointersCfg.HYBRID] PASSED [ 24%]2021-01-17 13:10:41,307 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_save_append_delete_append[FwPointersCfg.ENABLED] PASSED [ 24%]2021-01-17 13:10:43,301 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_after_failed_append[FwPointersCfg.DISABLED] PASSED [ 24%]2021-01-17 13:10:45,297 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_after_failed_append[FwPointersCfg.HYBRID] PASSED [ 24%]2021-01-17 13:10:47,297 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_after_failed_append[FwPointersCfg.ENABLED] PASSED [ 25%]2021-01-17 13:10:49,285 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_ndarray_store_append.py::test_append_reorder_columns PASSED [ 25%]2021-01-17 13:10:51,287 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_write_multi_column_to_arctic_1_40_data PASSED [ 25%]2021-01-17 13:10:53,298 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series PASSED [ 25%]2021-01-17 13:10:55,413 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_maintains_name PASSED [ 25%]2021-01-17 13:10:57,393 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_multiindex PASSED [ 25%]2021-01-17 13:10:59,374 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_multiindex_and_name PASSED [ 25%]2021-01-17 13:11:01,354 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_unicode_index_name PASSED [ 25%]2021-01-17 13:11:03,338 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_multiindex PASSED [ 25%]2021-01-17 13:11:05,327 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_none_values PASSED [ 25%]2021-01-17 13:11:07,330 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_unicode_index_name PASSED [ 25%]2021-01-17 13:11:09,312 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_cant_write_pandas_series_with_tuple_values PASSED [ 25%]2021-01-17 13:11:11,281 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_datetimeindex_with_timezone PASSED [ 25%]2021-01-17 13:11:13,268 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_series_with_datetimeindex PASSED [ 25%]2021-01-17 13:11:15,423 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_datetimeindex_with_timezone PASSED [ 26%]2021-01-17 13:11:17,392 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_empty_series_with_datetime_multiindex_with_timezone PASSED [ 26%]2021-01-17 13:11:19,390 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_datetimeindex PASSED [ 26%]2021-01-17 13:11:21,373 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_with_strings PASSED [ 26%]2021-01-17 13:11:23,363 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe PASSED [ 26%]2021-01-17 13:11:25,349 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_empty_dataframe PASSED [ 26%]2021-01-17 13:11:27,330 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe2 PASSED [ 26%]2021-01-17 13:11:29,314 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_strings PASSED [ 26%]2021-01-17 13:11:31,304 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_empty_multiindex PASSED [ 26%]2021-01-17 13:11:33,333 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_empty_multiindex_and_no_columns PASSED [ 26%]2021-01-17 13:11:35,493 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_dataframe_multiindex_and_no_columns PASSED [ 26%]2021-01-17 13:11:38,099 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_append_pandas_multi_columns_dataframe PASSED [ 26%]2021-01-17 13:11:40,091 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_append_pandas_multi_columns_dataframe_new_column PASSED [ 26%]2021-01-17 13:11:42,120 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_multi_columns_empty_dataframe PASSED [ 27%]2021-01-17 13:11:44,105 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_multi_columns_dataframe PASSED [ 27%]2021-01-17 13:11:46,102 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_multi_columns_no_names_dataframe PASSED [ 27%]2021-01-17 13:11:48,297 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_pandas_multi_columns_dataframe_with_int_levels PASSED [ 27%]2021-01-17 13:11:50,995 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_multi_index_and_multi_columns_dataframe PASSED [ 27%]2021-01-17 13:11:52,988 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_append_pandas_dataframe PASSED [ 27%]2021-01-17 13:11:54,976 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_empty_dataframe_multindex PASSED [ 27%]2021-01-17 13:11:57,137 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_append_empty PASSED [ 27%]2021-01-17 13:11:59,745 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_empy_dataframe_append PASSED [ 27%]2021-01-17 13:12:01,751 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_append_empty_multiindex PASSED [ 27%]2021-01-17 13:12:03,767 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_empty_dataframe_append_multiindex PASSED [ 27%]2021-01-17 13:12:05,773 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_empty_dataframe_should_ignore_dtype PASSED [ 27%]2021-01-17 13:12:07,769 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_empty_dataframe_should_ignore_dtype2 PASSED [ 27%]2021-01-17 13:12:09,781 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_append_should_promote_string_column PASSED [ 28%]2021-01-17 13:12:11,782 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_append_should_add_new_column PASSED [ 28%]2021-01-17 13:12:13,790 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_append_should_add_new_columns_and_reorder PASSED [ 28%]2021-01-17 13:12:15,805 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size0] PASSED [ 28%]2021-01-17 13:12:17,934 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size1] PASSED [ 28%]2021-01-17 13:12:19,921 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size2] PASSED [ 28%]2021-01-17 13:12:21,906 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size3] PASSED [ 28%]2021-01-17 13:12:23,890 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size4] PASSED [ 28%]2021-01-17 13:12:25,882 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size5] PASSED [ 28%]2021-01-17 13:12:27,862 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size6] PASSED [ 28%]2021-01-17 13:12:29,842 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size7] PASSED [ 28%]2021-01-17 13:12:31,833 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size8] PASSED [ 28%]2021-01-17 13:12:33,824 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size9] PASSED [ 28%]2021-01-17 13:12:35,817 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size10] PASSED [ 28%]2021-01-17 13:12:37,916 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size11] PASSED [ 29%]2021-01-17 13:12:39,956 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size12] PASSED [ 29%]2021-01-17 13:12:41,944 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size13] PASSED [ 29%]2021-01-17 13:12:43,919 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size14] PASSED [ 29%]2021-01-17 13:12:45,916 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size15] PASSED [ 29%]2021-01-17 13:12:47,914 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size16] PASSED [ 29%]2021-01-17 13:12:49,902 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size17] PASSED [ 29%]2021-01-17 13:12:51,897 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size18] PASSED [ 29%]2021-01-17 13:12:53,894 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_read[df_size19] PASSED [ 29%]2021-01-17 13:12:55,884 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size0] PASSED [ 29%]2021-01-17 13:12:57,917 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size1] PASSED [ 29%]2021-01-17 13:12:59,941 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size2] PASSED [ 29%]2021-01-17 13:13:01,950 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size3] PASSED [ 29%]2021-01-17 13:13:03,937 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size4] PASSED [ 30%]2021-01-17 13:13:05,926 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size5] PASSED [ 30%]2021-01-17 13:13:07,908 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size6] PASSED [ 30%]2021-01-17 13:13:09,904 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size7] PASSED [ 30%]2021-01-17 13:13:11,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size8] PASSED [ 30%]2021-01-17 13:13:13,876 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size9] PASSED [ 30%]2021-01-17 13:13:15,870 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size10] PASSED [ 30%]2021-01-17 13:13:17,860 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size11] PASSED [ 30%]2021-01-17 13:13:19,858 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size12] PASSED [ 30%]2021-01-17 13:13:22,009 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size13] PASSED [ 30%]2021-01-17 13:13:23,988 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size14] PASSED [ 30%]2021-01-17 13:13:25,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size15] PASSED [ 30%]2021-01-17 13:13:27,969 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size16] PASSED [ 30%]2021-01-17 13:13:29,961 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size17] PASSED [ 30%]2021-01-17 13:13:31,954 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size18] PASSED [ 31%]2021-01-17 13:13:33,994 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_dataframe_save_append_read[df_size19] PASSED [ 31%]2021-01-17 13:13:36,006 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_large_dataframe_append_rewrite_same_item PASSED [ 31%]2021-01-17 13:13:38,437 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_large_dataframe_rewrite_same_item PASSED [ 31%]2021-01-17 13:13:42,906 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_append_after_truncate_after_append PASSED [ 31%]2021-01-17 13:13:45,655 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_can_write_pandas_df_with_object_columns PASSED [ 31%]2021-01-17 13:13:48,065 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size0] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size1] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size2] 2021-01-17 13:13:54,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:13:54,888 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size3] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size4] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size5] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size6] XFAIL [ 31%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size7] 2021-01-17 13:14:06,040 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:14:06,040 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:14:06,040 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:14:06,040 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:14:06,041 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
XFAIL [ 32%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size8] XFAIL [ 32%]
tests/integration/store/test_pandas_store.py::test_panel_save_read[df_size9] XFAIL [ 32%]
tests/integration/store/test_pandas_store.py::test_panel_save_read_with_nans XFAIL [ 32%]
tests/integration/store/test_pandas_store.py::test_save_read_ints PASSED [ 32%]2021-01-17 13:14:15,082 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_save_read_datetimes PASSED [ 32%]2021-01-17 13:14:17,102 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_labels PASSED         [ 32%]2021-01-17 13:14:19,100 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_duplicate_labels PASSED [ 32%]2021-01-17 13:14:21,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_no_labels PASSED      [ 32%]2021-01-17 13:14:23,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_no_index_labels XFAIL [ 32%]
tests/integration/store/test_pandas_store.py::test_not_unique PASSED     [ 32%]2021-01-17 13:14:27,143 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_end PASSED  [ 32%]2021-01-17 13:14:29,492 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_start PASSED [ 32%]2021-01-17 13:14:32,667 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_with_zero_index PASSED [ 33%]2021-01-17 13:14:34,681 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_large_DataFrame PASSED [ 33%]2021-01-17 13:14:37,290 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_large_DataFrame_middle PASSED [ 33%]2021-01-17 13:14:49,213 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange[df0-assert_frame_equal] PASSED [ 33%]2021-01-17 13:14:51,954 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange[df1-assert_series_equal] PASSED [ 33%]2021-01-17 13:14:54,049 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_append PASSED [ 33%]2021-01-17 13:14:57,410 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_single_chunk PASSED [ 33%]2021-01-17 13:15:00,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_when_end_beyond_chunk_index PASSED [ 33%]2021-01-17 13:15:02,767 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_when_end_beyond_chunk_index_no_start PASSED [ 33%]2021-01-17 13:15:04,778 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_daterange_fails_with_timezone_start PASSED [ 33%]2021-01-17 13:15:06,931 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_data_info_series PASSED [ 33%]2021-01-17 13:15:09,520 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_data_info_df PASSED   [ 33%]2021-01-17 13:15:11,501 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_data_info_cols PASSED [ 33%]2021-01-17 13:15:13,489 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_read_write_multiindex_store_keeps_timezone PASSED [ 33%]2021-01-17 13:15:15,516 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_mutable_df PASSED     [ 34%]2021-01-17 13:15:17,525 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_forced_encodings_with_df_mixed_types SKIPPED [ 34%]
tests/integration/store/test_pandas_store.py::test_forced_encodings_with_df SKIPPED [ 34%]
tests/integration/store/test_pandas_store.py::test_forced_encodings_with_df_py3 PASSED [ 34%]2021-01-17 13:15:19,557 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pandas_store.py::test_forced_encodings_with_df_py3_multi_index PASSED [ 34%]2021-01-17 13:15:21,572 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_save_read_bson PASSED [ 34%]2021-01-17 13:15:23,592 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_save_read_big_encodable PASSED [ 34%]2021-01-17 13:15:25,686 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_save_read_bson_object PASSED [ 34%]2021-01-17 13:15:27,800 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_get_info_bson_object PASSED [ 34%]2021-01-17 13:15:29,876 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_bson_large_object PASSED [ 34%]2021-01-17 13:15:32,129 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_bson_leak_objects_delete PASSED [ 34%]2021-01-17 13:15:34,353 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_bson_leak_objects_prune_previous PASSED [ 34%]2021-01-17 13:15:36,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_prune_previous_doesnt_kill_other_objects PASSED [ 34%]2021-01-17 13:15:38,976 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_pickle_store.py::test_write_metadata PASSED [ 35%]2021-01-17 13:15:40,972 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_new_version PASSED [ 35%]2021-01-17 13:15:42,952 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_read_preference 2021-01-17 13:15:45,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:15:45,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:15:45,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:15:45,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:15:45,066 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
XFAIL [ 35%]
tests/integration/store/test_version_store.py::test_read_item_read_preference_SECONDARY XFAIL [ 35%]
tests/integration/store/test_version_store.py::test_store_item_metadata[FwPointersCfg.DISABLED] PASSED [ 35%]2021-01-17 13:15:50,395 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_metadata[FwPointersCfg.HYBRID] PASSED [ 35%]2021-01-17 13:15:52,382 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_metadata[FwPointersCfg.ENABLED] PASSED [ 35%]2021-01-17 13:15:54,366 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata[FwPointersCfg.DISABLED] PASSED [ 35%]2021-01-17 13:15:56,345 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata[FwPointersCfg.HYBRID] PASSED [ 35%]2021-01-17 13:15:58,342 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata[FwPointersCfg.ENABLED] PASSED [ 35%]2021-01-17 13:16:00,319 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_newer_version_with_lower_id[FwPointersCfg.DISABLED] PASSED [ 35%]2021-01-17 13:16:02,324 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_newer_version_with_lower_id[FwPointersCfg.HYBRID] PASSED [ 35%]2021-01-17 13:16:04,315 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_newer_version_with_lower_id[FwPointersCfg.ENABLED] PASSED [ 35%]2021-01-17 13:16:06,306 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_throws_on_deleted_symbol[FwPointersCfg.DISABLED] PASSED [ 35%]2021-01-17 13:16:08,298 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_throws_on_deleted_symbol[FwPointersCfg.HYBRID] PASSED [ 36%]2021-01-17 13:16:10,366 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_metadata_throws_on_deleted_symbol[FwPointersCfg.ENABLED] PASSED [ 36%]2021-01-17 13:16:12,476 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_and_update[FwPointersCfg.DISABLED] PASSED [ 36%]2021-01-17 13:16:17,539 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_and_update[FwPointersCfg.HYBRID] PASSED [ 36%]2021-01-17 13:16:22,602 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_store_item_and_update[FwPointersCfg.ENABLED] PASSED [ 36%]2021-01-17 13:16:27,691 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_update[FwPointersCfg.DISABLED] PASSED [ 36%]2021-01-17 13:16:31,123 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_update[FwPointersCfg.HYBRID] PASSED [ 36%]2021-01-17 13:16:33,192 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_update[FwPointersCfg.ENABLED] PASSED [ 36%]2021-01-17 13:16:35,253 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append[FwPointersCfg.DISABLED] PASSED [ 36%]2021-01-17 13:16:37,346 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append[FwPointersCfg.HYBRID] PASSED [ 36%]2021-01-17 13:16:40,690 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append[FwPointersCfg.ENABLED] PASSED [ 36%]2021-01-17 13:16:42,756 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_should_overwrite_after_delete[FwPointersCfg.DISABLED] PASSED [ 36%]2021-01-17 13:16:44,775 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_should_overwrite_after_delete[FwPointersCfg.HYBRID] PASSED [ 36%]2021-01-17 13:16:46,790 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_should_overwrite_after_delete[FwPointersCfg.ENABLED] PASSED [ 37%]2021-01-17 13:16:48,810 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_empty_ts[FwPointersCfg.DISABLED] PASSED [ 37%]2021-01-17 13:16:50,800 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_empty_ts[FwPointersCfg.HYBRID] PASSED [ 37%]2021-01-17 13:16:52,781 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_empty_ts[FwPointersCfg.ENABLED] PASSED [ 37%]2021-01-17 13:16:54,777 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_corrupted_new_version[FwPointersCfg.DISABLED] PASSED [ 37%]2021-01-17 13:16:56,834 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_corrupted_new_version[FwPointersCfg.HYBRID] PASSED [ 37%]2021-01-17 13:16:58,869 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_corrupted_new_version[FwPointersCfg.ENABLED] PASSED [ 37%]2021-01-17 13:17:00,876 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_query_version_as_of_int PASSED [ 37%]2021-01-17 13:17:02,874 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version[FwPointersCfg.DISABLED] PASSED [ 37%]2021-01-17 13:17:04,897 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version[FwPointersCfg.HYBRID] PASSED [ 37%]2021-01-17 13:17:07,094 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version[FwPointersCfg.ENABLED] PASSED [ 37%]2021-01-17 13:17:09,101 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version_deleted PASSED [ 37%]2021-01-17 13:17:11,096 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version_latest_only PASSED [ 37%]2021-01-17 13:17:13,111 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_version_snapshot PASSED [ 38%]2021-01-17 13:17:15,148 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_versions[FwPointersCfg.DISABLED] PASSED [ 38%]2021-01-17 13:17:17,186 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_versions[FwPointersCfg.HYBRID] PASSED [ 38%]2021-01-17 13:17:19,229 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_versions[FwPointersCfg.ENABLED] PASSED [ 38%]2021-01-17 13:17:21,254 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_bson_versions[FwPointersCfg.DISABLED] PASSED [ 38%]2021-01-17 13:17:23,284 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_bson_versions[FwPointersCfg.HYBRID] PASSED [ 38%]2021-01-17 13:17:25,289 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_bson_versions[FwPointersCfg.ENABLED] PASSED [ 38%]2021-01-17 13:17:27,478 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_none_does_not_exception[FwPointersCfg.DISABLED] PASSED [ 38%]2021-01-17 13:17:29,463 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_none_does_not_exception[FwPointersCfg.HYBRID] PASSED [ 38%]2021-01-17 13:17:31,445 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_read_none_does_not_exception[FwPointersCfg.ENABLED] PASSED [ 38%]2021-01-17 13:17:33,437 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_has_symbol[FwPointersCfg.DISABLED] PASSED [ 38%]2021-01-17 13:17:35,473 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_has_symbol[FwPointersCfg.HYBRID] PASSED [ 38%]2021-01-17 13:17:37,502 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_has_symbol[FwPointersCfg.ENABLED] PASSED [ 38%]2021-01-17 13:17:39,528 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_snapshot[FwPointersCfg.DISABLED] PASSED [ 38%]2021-01-17 13:17:41,563 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_snapshot[FwPointersCfg.HYBRID] PASSED [ 39%]2021-01-17 13:17:43,590 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_item_snapshot[FwPointersCfg.ENABLED] PASSED [ 39%]2021-01-17 13:17:45,610 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_has_symbol PASSED    [ 39%]2021-01-17 13:17:47,945 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot[FwPointersCfg.DISABLED] PASSED [ 39%]2021-01-17 13:17:50,611 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot[FwPointersCfg.HYBRID] PASSED [ 39%]2021-01-17 13:17:52,672 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot[FwPointersCfg.ENABLED] PASSED [ 39%]2021-01-17 13:17:54,711 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_with_versions[FwPointersCfg.DISABLED] PASSED [ 39%]2021-01-17 13:17:56,748 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_with_versions[FwPointersCfg.HYBRID] PASSED [ 39%]2021-01-17 13:17:58,780 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_with_versions[FwPointersCfg.ENABLED] PASSED [ 39%]2021-01-17 13:18:00,873 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_exclusion[FwPointersCfg.DISABLED] PASSED [ 39%]2021-01-17 13:18:02,849 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_exclusion[FwPointersCfg.HYBRID] PASSED [ 39%]2021-01-17 13:18:04,848 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_exclusion[FwPointersCfg.ENABLED] PASSED [ 39%]2021-01-17 13:18:06,838 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_delete[FwPointersCfg.DISABLED] PASSED [ 39%]2021-01-17 13:18:08,949 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_delete[FwPointersCfg.HYBRID] PASSED [ 40%]2021-01-17 13:18:11,575 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_delete[FwPointersCfg.ENABLED] PASSED [ 40%]2021-01-17 13:18:13,589 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_multiple_snapshots[FwPointersCfg.DISABLED] PASSED [ 40%]2021-01-17 13:18:15,598 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_multiple_snapshots[FwPointersCfg.HYBRID] PASSED [ 40%]2021-01-17 13:18:17,619 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_multiple_snapshots[FwPointersCfg.ENABLED] PASSED [ 40%]2021-01-17 13:18:20,277 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_delete_identical_snapshots PASSED [ 40%]2021-01-17 13:18:22,293 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_snapshots PASSED [ 40%]2021-01-17 13:18:24,276 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_duplicate_snapshots PASSED [ 40%]2021-01-17 13:18:26,260 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions[FwPointersCfg.DISABLED] PASSED [ 40%]2021-01-17 13:18:28,260 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions[FwPointersCfg.HYBRID] PASSED [ 40%]2021-01-17 13:18:30,304 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions[FwPointersCfg.ENABLED] PASSED [ 40%]2021-01-17 13:18:32,584 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots[FwPointersCfg.DISABLED] PASSED [ 40%]2021-01-17 13:18:34,620 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots[FwPointersCfg.HYBRID] PASSED [ 40%]2021-01-17 13:18:36,639 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots[FwPointersCfg.ENABLED] PASSED [ 41%]2021-01-17 13:18:38,652 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_ts[FwPointersCfg.DISABLED] PASSED [ 41%]2021-01-17 13:18:40,684 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_ts[FwPointersCfg.HYBRID] PASSED [ 41%]2021-01-17 13:18:42,735 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_ts[FwPointersCfg.ENABLED] PASSED [ 41%]2021-01-17 13:18:44,751 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_ts[FwPointersCfg.DISABLED] PASSED [ 41%]2021-01-17 13:18:46,810 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_ts[FwPointersCfg.HYBRID] PASSED [ 41%]2021-01-17 13:18:48,871 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_ts[FwPointersCfg.ENABLED] PASSED [ 41%]2021-01-17 13:18:50,925 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_fully_different_tss[FwPointersCfg.DISABLED] PASSED [ 41%]2021-01-17 13:18:53,214 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_fully_different_tss[FwPointersCfg.HYBRID] PASSED [ 41%]2021-01-17 13:18:55,250 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_multiple_versions_fully_different_tss[FwPointersCfg.ENABLED] PASSED [ 41%]2021-01-17 13:18:57,280 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_fully_different_tss[FwPointersCfg.DISABLED] PASSED [ 41%]2021-01-17 13:18:59,352 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_fully_different_tss[FwPointersCfg.HYBRID] PASSED [ 41%]2021-01-17 13:19:01,509 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_doesnt_prune_snapshots_fully_different_tss[FwPointersCfg.ENABLED] PASSED [ 41%]2021-01-17 13:19:03,581 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_previous_version_append_interaction[FwPointersCfg.DISABLED] PASSED [ 41%]2021-01-17 13:19:05,711 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_previous_version_append_interaction[FwPointersCfg.HYBRID] PASSED [ 42%]2021-01-17 13:19:07,817 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prunes_previous_version_append_interaction[FwPointersCfg.ENABLED] PASSED [ 42%]2021-01-17 13:19:09,925 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols[FwPointersCfg.DISABLED] PASSED [ 42%]2021-01-17 13:19:11,973 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols[FwPointersCfg.HYBRID] PASSED [ 42%]2021-01-17 13:19:14,129 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols[FwPointersCfg.ENABLED] PASSED [ 42%]2021-01-17 13:19:16,738 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_regex[FwPointersCfg.DISABLED] PASSED [ 42%]2021-01-17 13:19:18,737 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_regex[FwPointersCfg.HYBRID] PASSED [ 42%]2021-01-17 13:19:20,730 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_regex[FwPointersCfg.ENABLED] PASSED [ 42%]2021-01-17 13:19:22,725 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_newer_version_with_lower_id[FwPointersCfg.DISABLED] PASSED [ 42%]2021-01-17 13:19:24,726 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_newer_version_with_lower_id[FwPointersCfg.HYBRID] PASSED [ 42%]2021-01-17 13:19:26,724 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_newer_version_with_lower_id[FwPointersCfg.ENABLED] PASSED [ 42%]2021-01-17 13:19:28,714 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_write_snapshot_write_delete[FwPointersCfg.DISABLED] PASSED [ 42%]2021-01-17 13:19:30,734 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_write_snapshot_write_delete[FwPointersCfg.HYBRID] PASSED [ 42%]2021-01-17 13:19:32,727 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_write_snapshot_write_delete[FwPointersCfg.ENABLED] PASSED [ 43%]2021-01-17 13:19:34,842 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_delete_write[FwPointersCfg.DISABLED] PASSED [ 43%]2021-01-17 13:19:36,991 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_delete_write[FwPointersCfg.HYBRID] PASSED [ 43%]2021-01-17 13:19:38,977 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_list_symbols_delete_write[FwPointersCfg.ENABLED] PASSED [ 43%]2021-01-17 13:19:40,978 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_date_range_large[FwPointersCfg.DISABLED] PASSED [ 43%]2021-01-17 13:19:43,582 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_date_range_large[FwPointersCfg.HYBRID] PASSED [ 43%]2021-01-17 13:19:46,334 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_date_range_large[FwPointersCfg.ENABLED] PASSED [ 43%]2021-01-17 13:19:48,934 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_after_empty[FwPointersCfg.DISABLED] PASSED [ 43%]2021-01-17 13:19:56,183 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_after_empty[FwPointersCfg.HYBRID] PASSED [ 43%]2021-01-17 13:20:04,945 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_after_empty[FwPointersCfg.ENABLED] PASSED [ 43%]2021-01-17 13:20:12,291 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata[FwPointersCfg.DISABLED] PASSED [ 43%]2021-01-17 13:20:15,029 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata[FwPointersCfg.HYBRID] PASSED [ 43%]2021-01-17 13:20:17,041 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata[FwPointersCfg.ENABLED] PASSED [ 43%]2021-01-17 13:20:19,054 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_followed_by_append[FwPointersCfg.DISABLED] PASSED [ 43%]2021-01-17 13:20:23,074 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_followed_by_append[FwPointersCfg.HYBRID] PASSED [ 44%]2021-01-17 13:20:27,109 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_followed_by_append[FwPointersCfg.ENABLED] PASSED [ 44%]2021-01-17 13:20:31,126 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_new_symbol[FwPointersCfg.DISABLED] PASSED [ 44%]2021-01-17 13:20:33,104 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_new_symbol[FwPointersCfg.HYBRID] PASSED [ 44%]2021-01-17 13:20:35,090 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_new_symbol[FwPointersCfg.ENABLED] PASSED [ 44%]2021-01-17 13:20:37,072 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_after_append[FwPointersCfg.DISABLED] PASSED [ 44%]2021-01-17 13:20:39,087 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_after_append[FwPointersCfg.HYBRID] PASSED [ 44%]2021-01-17 13:20:41,104 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_after_append[FwPointersCfg.ENABLED] PASSED [ 44%]2021-01-17 13:20:43,253 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_purge_previous_versions[FwPointersCfg.DISABLED] PASSED [ 44%]2021-01-17 13:20:47,890 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_purge_previous_versions[FwPointersCfg.HYBRID] PASSED [ 44%]2021-01-17 13:20:51,924 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_purge_previous_versions[FwPointersCfg.ENABLED] PASSED [ 44%]2021-01-17 13:20:55,952 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_delete_symbol[FwPointersCfg.DISABLED] PASSED [ 44%]2021-01-17 13:20:57,973 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_delete_symbol[FwPointersCfg.HYBRID] PASSED [ 44%]2021-01-17 13:20:59,995 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_delete_symbol[FwPointersCfg.ENABLED] PASSED [ 45%]2021-01-17 13:21:02,005 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_snapshots[FwPointersCfg.DISABLED] PASSED [ 45%]2021-01-17 13:21:04,022 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_snapshots[FwPointersCfg.HYBRID] PASSED [ 45%]2021-01-17 13:21:06,048 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_metadata_snapshots[FwPointersCfg.ENABLED] PASSED [ 45%]2021-01-17 13:21:08,061 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version[FwPointersCfg.DISABLED] PASSED [ 45%]2021-01-17 13:21:10,083 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version[FwPointersCfg.HYBRID] PASSED [ 45%]2021-01-17 13:21:12,391 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version[FwPointersCfg.ENABLED] PASSED [ 45%]2021-01-17 13:21:14,401 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_followed_by_append[FwPointersCfg.DISABLED] PASSED [ 45%]2021-01-17 13:21:18,433 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_followed_by_append[FwPointersCfg.HYBRID] PASSED [ 45%]2021-01-17 13:21:22,462 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_followed_by_append[FwPointersCfg.ENABLED] PASSED [ 45%]2021-01-17 13:21:26,484 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_purging_previous_versions[FwPointersCfg.DISABLED] PASSED [ 45%]2021-01-17 13:21:30,527 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_purging_previous_versions[FwPointersCfg.HYBRID] PASSED [ 45%]2021-01-17 13:21:34,546 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_purging_previous_versions[FwPointersCfg.ENABLED] PASSED [ 45%]2021-01-17 13:21:38,556 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_non_existent_version[FwPointersCfg.DISABLED] PASSED [ 46%]2021-01-17 13:21:40,556 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_non_existent_version[FwPointersCfg.HYBRID] PASSED [ 46%]2021-01-17 13:21:42,544 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_non_existent_version[FwPointersCfg.ENABLED] PASSED [ 46%]2021-01-17 13:21:44,701 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_which_updated_only_metadata[FwPointersCfg.DISABLED] PASSED [ 46%]2021-01-17 13:21:46,711 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_which_updated_only_metadata[FwPointersCfg.HYBRID] PASSED [ 46%]2021-01-17 13:21:48,723 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_which_updated_only_metadata[FwPointersCfg.ENABLED] PASSED [ 46%]2021-01-17 13:21:50,854 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_then_snapshot[FwPointersCfg.DISABLED] PASSED [ 46%]2021-01-17 13:21:52,879 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_then_snapshot[FwPointersCfg.HYBRID] PASSED [ 46%]2021-01-17 13:21:54,906 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_then_snapshot[FwPointersCfg.ENABLED] PASSED [ 46%]2021-01-17 13:21:56,920 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_snapshot_noop[FwPointersCfg.DISABLED] PASSED [ 46%]2021-01-17 13:21:58,925 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_snapshot_noop[FwPointersCfg.HYBRID] PASSED [ 46%]2021-01-17 13:22:00,929 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_snapshot_noop[FwPointersCfg.ENABLED] PASSED [ 46%]2021-01-17 13:22:02,927 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_version_noop[FwPointersCfg.DISABLED] PASSED [ 46%]2021-01-17 13:22:05,094 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_version_noop[FwPointersCfg.HYBRID] PASSED [ 46%]2021-01-17 13:22:07,141 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_latest_version_noop[FwPointersCfg.ENABLED] PASSED [ 47%]2021-01-17 13:22:09,138 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_snap_delete_symbol_restore[FwPointersCfg.DISABLED] PASSED [ 47%]2021-01-17 13:22:11,181 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_snap_delete_symbol_restore[FwPointersCfg.HYBRID] PASSED [ 47%]2021-01-17 13:22:13,210 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_version_snap_delete_symbol_restore[FwPointersCfg.ENABLED] PASSED [ 47%]2021-01-17 13:22:15,233 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_from_version_with_deleted_symbol[FwPointersCfg.DISABLED] PASSED [ 47%]2021-01-17 13:22:17,222 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_from_version_with_deleted_symbol[FwPointersCfg.HYBRID] PASSED [ 47%]2021-01-17 13:22:19,213 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_restore_from_version_with_deleted_symbol[FwPointersCfg.ENABLED] PASSED [ 47%]2021-01-17 13:22:21,225 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_on_cleanup_error[FwPointersCfg.DISABLED] PASSED [ 47%]2021-01-17 13:22:23,247 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_on_cleanup_error[FwPointersCfg.HYBRID] PASSED [ 47%]2021-01-17 13:22:25,375 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_on_cleanup_error[FwPointersCfg.ENABLED] PASSED [ 47%]2021-01-17 13:22:27,599 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_find_calls[FwPointersCfg.DISABLED] PASSED [ 47%]2021-01-17 13:22:29,605 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_find_calls[FwPointersCfg.HYBRID] PASSED [ 47%]2021-01-17 13:22:31,608 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_previous_versions_retries_find_calls[FwPointersCfg.ENABLED] PASSED [ 47%]2021-01-17 13:22:33,614 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_append_does_not_duplicate_data_when_prune_fails[FwPointersCfg.DISABLED] PASSED [ 48%]
tests/integration/store/test_version_store.py::test_append_does_not_duplicate_data_when_prune_fails[FwPointersCfg.HYBRID] PASSED [ 48%]
tests/integration/store/test_version_store.py::test_append_does_not_duplicate_data_when_prune_fails[FwPointersCfg.ENABLED] PASSED [ 48%]
tests/integration/store/test_version_store.py::test_write_does_not_succeed_with_a_prune_error[FwPointersCfg.DISABLED] PASSED [ 48%]2021-01-17 13:22:42,348 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_does_not_succeed_with_a_prune_error[FwPointersCfg.HYBRID] PASSED [ 48%]2021-01-17 13:22:44,330 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_does_not_succeed_with_a_prune_error[FwPointersCfg.ENABLED] PASSED [ 48%]2021-01-17 13:22:46,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_keeps_version[FwPointersCfg.DISABLED] PASSED [ 48%]2021-01-17 13:22:48,568 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_keeps_version[FwPointersCfg.HYBRID] PASSED [ 48%]2021-01-17 13:22:50,548 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_keeps_version[FwPointersCfg.ENABLED] PASSED [ 48%]2021-01-17 13:22:52,537 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_empty_string_column_name PASSED [ 48%]2021-01-17 13:22:54,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_list_versions_after_delete[FwPointersCfg.DISABLED] PASSED [ 48%]2021-01-17 13:22:56,530 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_list_versions_after_delete[FwPointersCfg.HYBRID] PASSED [ 48%]2021-01-17 13:22:58,529 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_snapshot_list_versions_after_delete[FwPointersCfg.ENABLED] PASSED [ 48%]2021-01-17 13:23:00,529 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_non_serializable_throws PASSED [ 48%]2021-01-17 13:23:02,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_non_serializable_pickling_default[FwPointersCfg.DISABLED] PASSED [ 49%]2021-01-17 13:23:04,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_non_serializable_pickling_default[FwPointersCfg.HYBRID] PASSED [ 49%]2021-01-17 13:23:06,601 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_non_serializable_pickling_default[FwPointersCfg.ENABLED] PASSED [ 49%]2021-01-17 13:23:08,816 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_strict_no_daterange[FwPointersCfg.DISABLED] PASSED [ 49%]2021-01-17 13:23:10,801 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_strict_no_daterange[FwPointersCfg.HYBRID] PASSED [ 49%]2021-01-17 13:23:12,781 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_strict_no_daterange[FwPointersCfg.ENABLED] PASSED [ 49%]2021-01-17 13:23:14,765 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_handler_check_default_false PASSED [ 49%]2021-01-17 13:23:16,738 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_handler_check_default_osenviron PASSED [ 49%]2021-01-17 13:23:18,701 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_handler_check_set_false PASSED [ 49%]2021-01-17 13:23:20,670 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_handler_check_set_true PASSED [ 49%]2021-01-17 13:23:22,625 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_df_with_objects_in_index PASSED [ 49%]2021-01-17 13:23:24,630 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_series_with_objects_in_index PASSED [ 49%]2021-01-17 13:23:26,636 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_series_with_some_objects[input_series0] PASSED [ 49%]2021-01-17 13:23:28,811 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_write_series_with_some_objects[input_series1] PASSED [ 50%]2021-01-17 13:23:31,405 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_df[FwPointersCfg.DISABLED] PASSED [ 50%]2021-01-17 13:23:33,394 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_df[FwPointersCfg.HYBRID] PASSED [ 50%]2021-01-17 13:23:35,390 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_df[FwPointersCfg.ENABLED] PASSED [ 50%]2021-01-17 13:23:37,385 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_series[FwPointersCfg.DISABLED] PASSED [ 50%]2021-01-17 13:23:39,377 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_series[FwPointersCfg.HYBRID] PASSED [ 50%]2021-01-17 13:23:41,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_can_write_tz_aware_data_series[FwPointersCfg.ENABLED] PASSED [ 50%]2021-01-17 13:23:43,375 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.DISABLED-FwPointersCfg.DISABLED-FwPointersCfg.DISABLED-FwPointersCfg.DISABLED] PASSED [ 50%]2021-01-17 13:23:45,424 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.ENABLED-FwPointersCfg.ENABLED-FwPointersCfg.ENABLED] PASSED [ 50%]2021-01-17 13:23:47,587 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.HYBRID-FwPointersCfg.HYBRID-FwPointersCfg.HYBRID-FwPointersCfg.HYBRID] PASSED [ 50%]2021-01-17 13:23:51,099 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.HYBRID-FwPointersCfg.DISABLED-FwPointersCfg.HYBRID-FwPointersCfg.DISABLED] PASSED [ 50%]2021-01-17 13:23:53,157 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.HYBRID-FwPointersCfg.ENABLED-FwPointersCfg.HYBRID-FwPointersCfg.ENABLED] PASSED [ 50%]2021-01-17 13:23:55,208 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.HYBRID-FwPointersCfg.ENABLED-FwPointersCfg.HYBRID] PASSED [ 50%]2021-01-17 13:23:57,252 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.DISABLED-FwPointersCfg.HYBRID-FwPointersCfg.DISABLED-FwPointersCfg.HYBRID] PASSED [ 51%]2021-01-17 13:23:59,314 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.DISABLED-FwPointersCfg.ENABLED-FwPointersCfg.DISABLED-FwPointersCfg.ENABLED] PASSED [ 51%]2021-01-17 13:24:01,372 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.DISABLED-FwPointersCfg.ENABLED-FwPointersCfg.DISABLED] PASSED [ 51%]2021-01-17 13:24:03,442 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.ENABLED-FwPointersCfg.DISABLED-FwPointersCfg.DISABLED] PASSED [ 51%]2021-01-17 13:24:05,542 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.ENABLED-FwPointersCfg.HYBRID-FwPointersCfg.DISABLED] PASSED [ 51%]2021-01-17 13:24:07,628 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_mixed_scenarios[FwPointersCfg.ENABLED-FwPointersCfg.ENABLED-FwPointersCfg.HYBRID-FwPointersCfg.ENABLED] PASSED [ 51%]2021-01-17 13:24:09,730 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointers_writemetadata_enabled_disabled PASSED [ 51%]2021-01-17 13:24:11,999 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_fwpointer_enabled_write_delete_keep_version_append PASSED [ 51%]2021-01-17 13:24:14,030 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_version_arctic_version PASSED [ 51%]2021-01-17 13:24:16,016 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_mixed_fwpointer_configs PASSED [ 51%]2021-01-17 13:24:29,167 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.DISABLED-FwPointersCfg.HYBRID] PASSED [ 51%]2021-01-17 13:24:37,980 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.DISABLED-FwPointersCfg.ENABLED] PASSED [ 51%]2021-01-17 13:24:46,755 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.HYBRID-FwPointersCfg.DISABLED] PASSED [ 51%]2021-01-17 13:24:55,144 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.HYBRID-FwPointersCfg.ENABLED] PASSED [ 51%]2021-01-17 13:25:03,707 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.ENABLED-FwPointersCfg.HYBRID] PASSED [ 52%]2021-01-17 13:25:12,047 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store.py::test_prune_crossref_fwpointer_configs[FwPointersCfg.ENABLED-FwPointersCfg.DISABLED] PASSED [ 52%]2021-01-17 13:25:20,472 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_ArcticTransaction_can_do_first_writes PASSED [ 52%]2021-01-17 13:25:23,162 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_ArcticTransaction_detects_concurrent_writes PASSED [ 52%]2021-01-17 13:25:25,428 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_audit_writes PASSED [ 52%]2021-01-17 13:25:27,507 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_metadata_changes_writes PASSED [ 52%]2021-01-17 13:25:29,572 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_audit_read PASSED [ 52%]2021-01-17 13:25:31,662 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_cleanup_orphaned_versions_integration PASSED [ 52%]2021-01-17 13:25:33,712 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_corrupted_read_writes_new PASSED [ 52%]
tests/integration/store/test_version_store_audit.py::test_write_after_delete PASSED [ 52%]2021-01-17 13:25:37,880 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_ArcticTransaction_write_skips_for_exact_match PASSED [ 52%]2021-01-17 13:25:39,958 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_audit.py::test_ArcticTransaction_write_doesnt_skip_for_close_ts PASSED [ 52%]2021-01-17 13:25:42,016 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_no_corruption_restore_append_overlapping PASSED [ 52%]2021-01-17 13:25:46,996 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_no_corruption_restore_writemeta_append PASSED [ 53%]2021-01-17 13:25:51,036 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_no_corruption_restore_append_non_overlapping_tstamps PASSED [ 53%]2021-01-17 13:25:58,739 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_restore_append_overlapping_corrupts_old PASSED [ 53%]2021-01-17 13:26:02,012 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_restore_append_overlapping_corrupts_last PASSED [ 53%]2021-01-17 13:26:05,464 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_append_fail_after_delete_noupsert SKIPPED [ 53%]
tests/integration/store/test_version_store_corruption.py::test_append_without_corrupt_check PASSED [ 53%]2021-01-17 13:26:15,156 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_append_with_corrupt_check PASSED [ 53%]2021-01-17 13:26:17,827 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_fast_check_corruption PASSED [ 53%]2021-01-17 13:26:19,894 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/store/test_version_store_corruption.py::test_fast_is_safe_to_append PASSED [ 53%]2021-01-17 13:26:34,860 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start0-end0-expected0] PASSED [ 53%]2021-01-17 13:26:36,420 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start1-end1-expected1] PASSED [ 53%]2021-01-17 13:26:37,965 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start2-end2-expected2] PASSED [ 53%]2021-01-17 13:26:39,512 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start3-end3-expected3] PASSED [ 53%]2021-01-17 13:26:41,108 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start4-end4-expected4] PASSED [ 53%]2021-01-17 13:26:42,813 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start5-end5-expected5] PASSED [ 54%]2021-01-17 13:26:44,363 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start6-end6-expected6] PASSED [ 54%]2021-01-17 13:26:45,918 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start7-end7-expected7] PASSED [ 54%]2021-01-17 13:26:47,464 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_libraries_for_the_given_daterange[start8-end8-expected8] PASSED [ 54%]2021-01-17 13:26:49,005 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_raise_exceptions_if_no_libraries_are_found_in_the_date_range_when_reading_data PASSED [ 54%]2021-01-17 13:26:50,545 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_falls_in_a_single_underlying_library FAILED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries 2021-01-17 13:26:54,790 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FAILED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing 2021-01-17 13:26:57,087 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
FAILED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_add_underlying_library_where_none_exists PASSED [ 54%]2021-01-17 13:26:58,959 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange FAILED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_raise_exception_if_library_does_not_exist PASSED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_raise_exception_if_date_range_for_library_overlaps_with_existing_libraries PASSED [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_successfully_do_a_roundtrip_write_and_read_spanning_multiple_underlying_libraries XFAIL [ 54%]
tests/integration/tickstore/test_toplevel.py::test_should_list_symbols_from_the_underlying_library[start0-end0-0-10] PASSED [ 55%]2021-01-17 13:27:09,170 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_list_symbols_from_the_underlying_library[start1-end1-0-8] PASSED [ 55%]2021-01-17 13:27:11,347 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_list_symbols_from_the_underlying_library[start2-end2-7-10] PASSED [ 55%]2021-01-17 13:27:13,524 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_add_underlying_libraries_when_intialized PASSED [ 55%]2021-01-17 13:27:15,690 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_list_of_dicts FAILED [ 55%]
tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_correct_timezone FAILED [ 55%]
tests/integration/tickstore/test_toplevel.py::test_min_max_date PASSED   [ 55%]2021-01-17 13:27:21,786 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_no_min_max_date PASSED [ 55%]2021-01-17 13:27:23,505 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_get_libraries_no_data_raises_exception PASSED [ 55%]2021-01-17 13:27:25,657 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_get_libraries_no_data_raises_exception_tzinfo_given PASSED [ 55%]2021-01-17 13:27:27,216 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_toplevel.py::test_get_library_metadata PASSED [ 55%]2021-01-17 13:27:29,393 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_delete.py::test_delete[tickstore] PASSED [ 55%]2021-01-17 13:27:31,072 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_delete.py::test_delete_daterange[tickstore] PASSED [ 55%]2021-01-17 13:27:32,752 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read[tickstore] PASSED [ 56%]2021-01-17 13:27:34,509 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_data_is_modifiable[tickstore] PASSED [ 56%]2021-01-17 13:27:36,190 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_allow_secondary[tickstore] PASSED [ 56%]2021-01-17 13:27:37,953 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_symbol_as_column[tickstore] PASSED [ 56%]2021-01-17 13:27:39,653 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_multiple_symbols[tickstore] PASSED [ 56%]2021-01-17 13:27:41,345 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_all_cols_all_dtypes[tickstore-1] PASSED [ 56%]2021-01-17 13:27:43,048 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_all_cols_all_dtypes[tickstore-100] PASSED [ 56%]2021-01-17 13:27:44,754 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_date_range[tickstore] FAILED [ 56%]
tests/integration/tickstore/test_ts_read.py::test_date_range_end_not_in_range[tickstore] FAILED [ 56%]
tests/integration/tickstore/test_ts_read.py::test_date_range_default_timezone[tickstore-UTC] PASSED [ 56%]2021-01-17 13:27:51,560 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_date_range_default_timezone[tickstore-Europe/London] PASSED [ 56%]2021-01-17 13:27:53,243 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_date_range_default_timezone[tickstore-America/New_York] PASSED [ 56%]2021-01-17 13:27:54,934 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_date_range_no_bounds[tickstore] FAILED [ 56%]
tests/integration/tickstore/test_ts_read.py::test_date_range_BST[tickstore] PASSED [ 56%]2021-01-17 13:27:58,981 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_no_data[tickstore] PASSED [ 57%]2021-01-17 13:28:00,669 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_write_no_tz[tickstore] PASSED [ 57%]2021-01-17 13:28:02,346 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_out_of_order[tickstore] PASSED [ 57%]2021-01-17 13:28:04,058 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_chunk_boundaries[tickstore] PASSED [ 57%]2021-01-17 13:28:06,376 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_spanning_chunks[tickstore] PASSED [ 57%]2021-01-17 13:28:08,048 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_inside_range[tickstore] PASSED [ 57%]2021-01-17 13:28:09,735 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_longs[tickstore] PASSED [ 57%]2021-01-17 13:28:11,433 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_with_image[tickstore] PASSED [ 57%]2021-01-17 13:28:13,753 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_with_metadata[tickstore] PASSED [ 57%]2021-01-17 13:28:15,471 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_strings[tickstore] PASSED [ 57%]2021-01-17 13:28:17,271 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_utf8_strings[tickstore] PASSED [ 57%]2021-01-17 13:28:18,997 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_read_unicode_strings[tickstore] PASSED [ 57%]2021-01-17 13:28:20,760 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_read.py::test_objects_fail[tickstore] PASSED [ 57%]
tests/integration/tickstore/test_ts_write.py::test_ts_write_simple[tickstore] PASSED [ 58%]2021-01-17 13:28:24,139 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_write.py::test_overlapping_load[tickstore] PASSED [ 58%]2021-01-17 13:28:25,824 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_write.py::test_ts_write_pandas[tickstore] PASSED [ 58%]2021-01-17 13:28:27,535 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_write.py::test_ts_write_named_col[tickstore] PASSED [ 58%]2021-01-17 13:28:29,220 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/integration/tickstore/test_ts_write.py::test_millisecond_roundtrip[tickstore] PASSED [ 58%]2021-01-17 13:28:30,913 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping

tests/unit/test_arctic.py::test_arctic_lazy_init PASSED                  [ 58%]
tests/unit/test_arctic.py::test_arctic_lazy_init_ssl_true PASSED         [ 58%]
tests/unit/test_arctic.py::test_connection_passed_warning_raised PASSED  [ 58%]
tests/unit/test_arctic.py::test_arctic_auth PASSED                       [ 58%]
tests/unit/test_arctic.py::test_arctic_auth_custom_app_name PASSED       [ 58%]
tests/unit/test_arctic.py::test_arctic_connect_hostname PASSED           [ 58%]
tests/unit/test_arctic.py::test_arctic_connect_with_environment_name PASSED [ 58%]
tests/unit/test_arctic.py::test_database_library_specifier[library-library-arctic] PASSED [ 58%]
tests/unit/test_arctic.py::test_database_library_specifier[user.library-library-arctic_user] PASSED [ 58%]
tests/unit/test_arctic.py::test_arctic_repr PASSED                       [ 59%]
tests/unit/test_arctic.py::test_lib_repr PASSED                          [ 59%]
tests/unit/test_arctic.py::test_register_library_type PASSED             [ 59%]
tests/unit/test_arctic.py::test_set_quota PASSED                         [ 59%]
tests/unit/test_arctic.py::test_get_quota PASSED                         [ 59%]
tests/unit/test_arctic.py::test_check_quota_Zero PASSED                  [ 59%]
tests/unit/test_arctic.py::test_check_quota_None PASSED                  [ 59%]
tests/unit/test_arctic.py::test_check_quota_Zero2 PASSED                 [ 59%]
tests/unit/test_arctic.py::test_check_quota_countdown PASSED             [ 59%]
tests/unit/test_arctic.py::test_check_quota PASSED                       [ 59%]
tests/unit/test_arctic.py::test_check_quota_90_percent PASSED            [ 59%]
tests/unit/test_arctic.py::test_check_quota_info PASSED                  [ 59%]
tests/unit/test_arctic.py::test_check_quota_exceeded PASSED              [ 59%]
tests/unit/test_arctic.py::test_initialize_library PASSED                [ 60%]
tests/unit/test_arctic.py::test_initialize_library_too_many_ns PASSED    [ 60%]
tests/unit/test_arctic.py::test_initialize_library_with_list_coll_names PASSED [ 60%]
tests/unit/test_arctic.py::test_library_exists PASSED                    [ 60%]
tests/unit/test_arctic.py::test_library_doesnt_exist PASSED              [ 60%]
tests/unit/test_arctic.py::test_get_library PASSED                       [ 60%]
tests/unit/test_arctic.py::test_get_library_not_initialized PASSED       [ 60%]
tests/unit/test_arctic.py::test_get_library_auth_issue PASSED            [ 60%]
tests/unit/test_arctic.py::test_get_library_not_registered PASSED        [ 60%]
tests/unit/test_arctic.py::test_mongo_host_get_set PASSED                [ 60%]
tests/unit/test_arctic.py::test_arctic_set_get_state PASSED              [ 60%]
tests/unit/test_arctic.py::test__conn_auth_issue PASSED                  [ 60%]
tests/unit/test_arctic.py::test_reset PASSED                             [ 60%]
tests/unit/test_arctic.py::test_ArcticLibraryBinding_db PASSED           [ 61%]
tests/unit/test_auth.py::test_authenticate PASSED                        [ 61%]
tests/unit/test_auth.py::test_authenticate_fails PASSED                  [ 61%]
tests/unit/test_auth.py::test_authenticate_fails_exception PASSED        [ 61%]
tests/unit/test_compress.py::test_roundtrip[arctic] PASSED               [ 61%]
tests/unit/test_compress.py::test_roundtrip[arcticHC] PASSED             [ 61%]
tests/unit/test_compress.py::test_roundtrip_multi[1] PASSED              [ 61%]
tests/unit/test_compress.py::test_roundtrip_multi[100.0] PASSED          [ 61%]
tests/unit/test_compress.py::test_roundtrip_multi[1000.0] PASSED         [ 61%]
tests/unit/test_compress.py::test_roundtrip_multi[1000000.0] PASSED      [ 61%]
tests/unit/test_compress.py::test_roundtrip_arr[1-10] PASSED             [ 61%]
tests/unit/test_compress.py::test_roundtrip_arr[100-10] PASSED           [ 61%]
tests/unit/test_compress.py::test_roundtrip_arr[1000-10] PASSED          [ 61%]
tests/unit/test_compress.py::test_roundtrip_arrHC[1-10] PASSED           [ 61%]
tests/unit/test_compress.py::test_roundtrip_arrHC[100-10] PASSED         [ 62%]
tests/unit/test_compress.py::test_roundtrip_arrHC[1000-10] PASSED        [ 62%]
tests/unit/test_compress.py::test_arr_zero PASSED                        [ 62%]
tests/unit/test_compression.py::test_compress PASSED                     [ 62%]
tests/unit/test_compression.py::test_compress_LZ4 PASSED                 [ 62%]
tests/unit/test_compression.py::test_compress_array PASSED               [ 62%]
tests/unit/test_compression.py::test_compress_array_usesLZ4 PASSED       [ 62%]
tests/unit/test_compression.py::test_compress_array_LZ4_sequential PASSED [ 62%]
tests/unit/test_compression.py::test_decompress PASSED                   [ 62%]
tests/unit/test_compression.py::test_decompress_array PASSED             [ 62%]
tests/unit/test_compression.py::test_compression_equal_regardless_parallel_mode PASSED [ 62%]
tests/unit/test_compression.py::test_enable_parallel_lz4 PASSED          [ 62%]
tests/unit/test_compression.py::test_compress_empty_string PASSED        [ 62%]
tests/unit/test_decorators_unit.py::test_mongo_retry PASSED              [ 63%]
tests/unit/test_decorators_unit.py::test_mongo_retry_hook_changes PASSED [ 63%]
tests/unit/test_decorators_unit.py::test_mongo_retry_fails PASSED        [ 63%]
tests/unit/test_decorators_unit.py::test_retry_nested PASSED             [ 63%]
tests/unit/test_decorators_unit.py::test_all_other_exceptions_logged PASSED [ 63%]
tests/unit/test_decorators_unit.py::test_other_exceptions_not_logged_outside_of_arctic PASSED [ 63%]
tests/unit/test_decorators_unit.py::test_auth_failure_no_retry XFAIL     [ 63%]
tests/unit/test_decorators_unit.py::test_duplicate_key_failure_no_retry PASSED [ 63%]
tests/unit/test_decorators_unit.py::test_ServerSelectionTimeoutError_no_retry PASSED [ 63%]
tests/unit/test_decorators_unit.py::test_get_host PASSED                 [ 63%]
tests/unit/test_decorators_unit.py::test_get_host_list PASSED            [ 63%]
tests/unit/test_decorators_unit.py::test_get_host_not_a_vs PASSED        [ 63%]
tests/unit/test_fixtures.py::test_overlay_library_name PASSED            [ 63%]
tests/unit/test_fixtures.py::test_overlay_library PASSED                 [ 64%]
tests/unit/test_fixtures.py::test_tickstore_lib PASSED                   [ 64%]
tests/unit/test_hooks.py::test_log_exception_hook PASSED                 [ 64%]
tests/unit/test_hooks.py::test_get_mongodb_uri_hook PASSED               [ 64%]
tests/unit/test_hooks.py::test_get_auth_hook PASSED                      [ 64%]
tests/unit/test_hosts.py::test_get_arctic_lib_with_known_host PASSED     [ 64%]
tests/unit/test_hosts.py::test_get_arctic_lib_with_unknown_host PASSED   [ 64%]
tests/unit/test_hosts.py::test_get_arctic_connection_strings PASSED      [ 64%]
tests/unit/test_hosts.py::test_get_arctic_malformed_connection_strings[donkey] PASSED [ 64%]
tests/unit/test_hosts.py::test_get_arctic_malformed_connection_strings[donkey:ride@blackpool] PASSED [ 64%]
tests/unit/test_hosts.py::test_get_arctic_malformed_connection_strings[donkey:ride] PASSED [ 64%]
tests/unit/test_multi_index.py::test__can_create_df_with_multiple_index PASSED [ 64%]
tests/unit/test_multi_index.py::test__get_ts__asof_latest PASSED         [ 64%]
tests/unit/test_multi_index.py::test__get_ts__asof_datetime PASSED       [ 64%]
tests/unit/test_multi_index.py::test__get_ts__unsorted_index PASSED      [ 65%]
tests/unit/test_multi_index.py::test_fancy_group_by_multi_index PASSED   [ 65%]
tests/unit/test_multi_index.py::test__minmax_last PASSED                 [ 65%]
tests/unit/test_multi_index.py::test__minmax_first PASSED                [ 65%]
tests/unit/test_multi_index.py::test__within_numeric_first PASSED        [ 65%]
tests/unit/test_multi_index.py::test__within_numeric_last PASSED         [ 65%]
tests/unit/test_multi_index.py::test__first_within_datetime PASSED       [ 65%]
tests/unit/test_multi_index.py::test__last_within_datetime PASSED        [ 65%]
tests/unit/test_multi_index.py::test__can_insert_row PASSED              [ 65%]
tests/unit/test_multi_index.py::test__can_append_row PASSED              [ 65%]
tests/unit/test_multi_index.py::test_fancy_group_by_raises PASSED        [ 65%]
tests/unit/test_util.py::test_are_equals_not_df PASSED                   [ 65%]
tests/unit/test_util.py::test_enable_sharding_hashed PASSED              [ 65%]
tests/unit/chunkstore/test_date_chunker.py::test_date_filter PASSED      [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_date_filter_no_index PASSED [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_date_filter_with_pd_date_range PASSED [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_to_chunks_exceptions PASSED [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_exclude PASSED          [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_exclude_no_index PASSED [ 66%]
tests/unit/chunkstore/test_date_chunker.py::test_with_tuples PASSED      [ 66%]
tests/unit/chunkstore/test_passthrough_chunker.py::test_pass_thru PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[unbounded_left] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[unbounded] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[unbounded_right] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[open_open] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[open_closed] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[closed_open] PASSED [ 66%]
tests/unit/date/test_daterange.py::test_daterange_bounding[closed_by_default] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_bounding[closed_explicitly] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_arg_parsing[date_range0] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_arg_parsing[date_range1] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_arg_parsing[date_range2] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_arg_parsing[date_range3] PASSED [ 67%]
tests/unit/date/test_daterange.py::test_daterange_eq PASSED              [ 67%]
tests/unit/date/test_daterange.py::test_daterange_hash PASSED            [ 67%]
tests/unit/date/test_daterange.py::test_daterange_invalid_start PASSED   [ 67%]
tests/unit/date/test_daterange.py::test_daterange_invalid_end PASSED     [ 67%]
tests/unit/date/test_daterange.py::test_daterange_index PASSED           [ 67%]
tests/unit/date/test_daterange.py::test_daterange_index_error PASSED     [ 67%]
tests/unit/date/test_daterange.py::test_as_dates PASSED                  [ 67%]
tests/unit/date/test_daterange.py::test_string_to_daterange[20110101-expected_ts0-expected_dt0] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[20110101-20110102-expected_ts1-expected_dt1] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[201101011030-expected_ts2-expected_dt2] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[-201101011030-expected_ts3-expected_dt3] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[201101011030--expected_ts4-expected_dt4] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[(20110101-20110102)-expected_ts5-expected_dt5] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[(20110101-20110102]-expected_ts6-expected_dt6] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[[20110101-20110102)-expected_ts7-expected_dt7] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange[[20110101-20110102]-expected_ts8-expected_dt8] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_string_to_daterange_raises PASSED [ 68%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range0-expected0] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range1-expected1] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range2-expected2] PASSED [ 68%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range3-expected3] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range4-expected4] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range5-expected5] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range6-expected6] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_mongo_query[date_range7-expected7] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range0-expected0] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range1-expected1] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range2-expected2] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range3-expected3] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range4-expected4] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range5-expected5] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range6-expected6] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_get_date_bounds[date_range7-expected7] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr0] PASSED [ 69%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr1] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr2] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr3] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr4] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr5] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_with_self[dr6] PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_returns_inner_boundaries PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_preserves_boundaries PASSED [ 70%]
tests/unit/date/test_daterange.py::test_intersection_contains PASSED     [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_UTC_roundtrip PASSED [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_weird_get_tz_local PASSED [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_pytz_London XFAIL [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_mktz_London PASSED [ 70%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_datetime_roundtrip_local_no_tz PASSED [ 71%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_datetime_roundtrip_local_tz PASSED [ 71%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_datetime_roundtrip_est_tz PASSED [ 71%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_millisecond_conversion[807000-1074069004807] PASSED [ 71%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_millisecond_conversion[807243-1074069004807] PASSED [ 71%]
tests/unit/date/test_datetime_to_ms_roundtrip.py::test_millisecond_conversion[807675-1074069004807] PASSED [ 71%]
tests/unit/date/test_mktz.py::test_mktz PASSED                           [ 71%]
tests/unit/date/test_mktz.py::test_mktz_noarg PASSED                     [ 71%]
tests/unit/date/test_mktz.py::test_mktz_zone PASSED                      [ 71%]
tests/unit/date/test_mktz.py::test_mktz_fails_if_invalid_timezone PASSED [ 71%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt0] PASSED [ 71%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt1] PASSED [ 71%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt2] PASSED [ 71%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt3] PASSED [ 71%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt4] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz0-pdt5] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt0] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt1] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt2] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt3] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt4] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz1-pdt5] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt0] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt1] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt2] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt3] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt4] PASSED [ 72%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz2-pdt5] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt0] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt1] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt2] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt3] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt4] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz3-pdt5] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt0] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt1] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt2] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt3] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt4] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz4-pdt5] PASSED [ 73%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt0] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt1] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt2] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt3] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt4] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz5-pdt5] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt0] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt1] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt2] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt3] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt4] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back[local_tz6-pdt5] PASSED [ 74%]
tests/unit/date/test_util.py::test_datetime_to_ms_and_back_microseconds PASSED [ 74%]
tests/unit/date/test_util.py::test_daterange_closedclosed_None PASSED    [ 74%]
tests/unit/date/test_util.py::test_daterange_closedclosed PASSED         [ 75%]
tests/unit/date/test_util.py::test_daterange_closedclosed_no_tz PASSED   [ 75%]
tests/unit/date/test_util.py::test_to_dt_0 PASSED                        [ 75%]
tests/unit/date/test_util.py::test_to_dt_0_default PASSED                [ 75%]
tests/unit/date/test_util.py::test_to_dt_dt_no_tz PASSED                 [ 75%]
tests/unit/date/test_util.py::test_to_dt_dt_no_tz_default PASSED         [ 75%]
tests/unit/date/test_util.py::test_to_dt_dt_tz PASSED                    [ 75%]
tests/unit/date/test_util.py::test_to_dt_dt_tz_default PASSED            [ 75%]
tests/unit/date/test_util.py::test_daterange_raises PASSED               [ 75%]
tests/unit/date/test_util.py::test_daterange_eq PASSED                   [ 75%]
tests/unit/date/test_util.py::test_daterange_lt PASSED                   [ 75%]
tests/unit/date/test_util.py::test_utc_dt_to_local_dt PASSED             [ 75%]
tests/unit/scripts/test_arctic_create_user.py::test_main_minimal PASSED  [ 75%]
tests/unit/scripts/test_arctic_create_user.py::test_main_with_db PASSED  [ 76%]
tests/unit/scripts/test_arctic_create_user.py::test_main_with_db_write PASSED [ 76%]
tests/unit/scripts/test_arctic_create_user.py::test_no_auth PASSED       [ 76%]
tests/unit/scripts/test_arctic_fsck.py::test_main PASSED                 [ 76%]
tests/unit/scripts/test_arctic_fsck.py::test_main_dry_run PASSED         [ 76%]
tests/unit/scripts/test_initialize_library.py::test_init_library PASSED  [ 76%]
tests/unit/scripts/test_initialize_library.py::test_init_library_no_admin PASSED [ 76%]
tests/unit/scripts/test_initialize_library.py::test_init_library_hashed PASSED [ 76%]
tests/unit/scripts/test_initialize_library.py::test_init_library_no_admin_no_user_creds PASSED [ 76%]
tests/unit/scripts/test_initialize_library.py::test_bad_library_name PASSED [ 76%]
tests/unit/scripts/test_utils.py::test_do_db_auth PASSED                 [ 76%]
tests/unit/scripts/test_utils.py::test_do_db_auth_no_admin PASSED        [ 76%]
tests/unit/scripts/test_utils.py::test_do_db_auth_no_user_creds PASSED   [ 76%]
tests/unit/scripts/test_utils.py::test_do_db_auth_no_admin_user_creds_fails PASSED [ 76%]
tests/unit/scripts/test_utils.py::test_do_db_auth_admin_user_creds_fails PASSED [ 77%]
tests/unit/scripts/test_utils.py::test_do_db_auth_role PASSED            [ 77%]
tests/unit/serialization/test_incremental.py::test_incremental_bad_init PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_none_df PASSED        [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[onerow] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[small] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[medium] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[large] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[empty] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[empty_index] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[with_some_objects] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[large_with_some_objects] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[with_string] PASSED [ 77%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[with_unicode] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[with_some_none] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multiindex] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multiindex_with_object] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[empty_multiindex] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[large_multi_index] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[empty_multicolumn] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multi_column_no_multiindex] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[large_multi_column] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multi_column_int_levels] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multi_column_and_multi_index] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[multi_column_with_some_objects] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[n_dimensional_df] PASSED [ 78%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[mixed_dtypes_df] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_pandas_to_recarray[index_tz_aware] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[onerow] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[small] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[medium] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[large] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[empty] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[empty_index] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[with_some_objects] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[large_with_some_objects] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[with_string] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[with_unicode] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[with_some_none] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multiindex] PASSED [ 79%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multiindex_with_object] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[empty_multiindex] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[large_multi_index] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[empty_multicolumn] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multi_column_no_multiindex] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[large_multi_column] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multi_column_int_levels] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multi_column_and_multi_index] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[multi_column_with_some_objects] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[n_dimensional_df] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[mixed_dtypes_df] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_pandas_to_recarray[index_tz_aware] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[onerow] PASSED [ 80%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[small] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[medium] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[large] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[empty] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[empty_index] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[with_some_objects] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[large_with_some_objects] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[with_string] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[with_unicode] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[with_some_none] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multiindex] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multiindex_with_object] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[empty_multiindex] PASSED [ 81%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[large_multi_index] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[empty_multicolumn] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multi_column_no_multiindex] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[large_multi_column] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multi_column_int_levels] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multi_column_and_multi_index] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[multi_column_with_some_objects] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[n_dimensional_df] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[mixed_dtypes_df] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_serialize_incremental_chunk_size_pandas_to_recarray[index_tz_aware] PASSED [ 82%]
tests/unit/serialization/test_incremental.py::test_shape[onerow] PASSED  [ 82%]
tests/unit/serialization/test_incremental.py::test_shape[small] PASSED   [ 82%]
tests/unit/serialization/test_incremental.py::test_shape[medium] PASSED  [ 82%]
tests/unit/serialization/test_incremental.py::test_shape[large] PASSED   [ 82%]
tests/unit/serialization/test_incremental.py::test_shape[empty] PASSED   [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[empty_index] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[with_some_objects] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[large_with_some_objects] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[with_string] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[with_unicode] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[with_some_none] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[multiindex] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[multiindex_with_object] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[empty_multiindex] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[large_multi_index] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[empty_multicolumn] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[multi_column_no_multiindex] PASSED [ 83%]
tests/unit/serialization/test_incremental.py::test_shape[large_multi_column] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[multi_column_int_levels] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[multi_column_and_multi_index] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[multi_column_with_some_objects] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[n_dimensional_df] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[mixed_dtypes_df] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_shape[index_tz_aware] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[-10--10] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[-10-490] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[-10-990] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[-10-1490] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[490-490] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[490-990] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[490-1490] PASSED [ 84%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[990-990] PASSED [ 85%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[990-1490] PASSED [ 85%]
tests/unit/serialization/test_incremental.py::test_generator_bytes_range[1490-1490] PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_frame_converter PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_with_strings PASSED  [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_with_objects_raises PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_without_index PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_with_index PASSED    [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_with_nans PASSED     [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_empty_dataframe PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_empty_columns PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_string_cols_with_nans PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_objify_with_missing_columns PASSED [ 85%]
tests/unit/serialization/test_numpy_arrays.py::test_multi_column_fail PASSED [ 86%]
tests/unit/serialization/test_numpy_arrays.py::test_dataframe_writable_after_objify PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_to_primitive_timestamps PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_to_primitive_fixed_length_strings PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_on_exception_in_to_records[True] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_on_exception_in_to_records[False] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_when_records_have_object_dtype[True] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_when_records_have_object_dtype[False] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_when_records_have_arrays_in_them[True] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_false_when_records_have_arrays_in_them[False] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_true_otherwise[True] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_without_objects_returns_true_otherwise[False] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_mixed_object_column_string_nan[False] PASSED [ 86%]
tests/unit/serialization/test_numpy_records.py::test_can_convert_to_records_mixed_object_column_string_nan[True] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[onerow] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[small] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[medium] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[large] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[empty] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[empty_index] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[with_some_objects] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[large_with_some_objects] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[with_string] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[with_unicode] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[with_some_none] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multiindex] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multiindex_with_object] PASSED [ 87%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[empty_multiindex] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[large_multi_index] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[empty_multicolumn] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multi_column_no_multiindex] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[large_multi_column] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multi_column_int_levels] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multi_column_and_multi_index] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[multi_column_with_some_objects] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[n_dimensional_df] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[mixed_dtypes_df] PASSED [ 88%]
tests/unit/serialization/test_pandas_is_serializable.py::test_dataframe_confirm_fast_check_compatibility[index_tz_aware] PASSED [ 88%]
tests/unit/store/test_bitemporal_store.py::test_add_observe_dt_index PASSED [ 88%]
tests/unit/store/test_bson_store.py::test_enable_sharding PASSED         [ 88%]
tests/unit/store/test_bson_store.py::test_find PASSED                    [ 89%]
tests/unit/store/test_bson_store.py::test_find_one PASSED                [ 89%]
tests/unit/store/test_bson_store.py::test_insert_one PASSED              [ 89%]
tests/unit/store/test_bson_store.py::test_insert_many PASSED             [ 89%]
tests/unit/store/test_bson_store.py::test_replace_one PASSED             [ 89%]
tests/unit/store/test_bson_store.py::test_update_one PASSED              [ 89%]
tests/unit/store/test_bson_store.py::test_update_many PASSED             [ 89%]
tests/unit/store/test_bson_store.py::test_find_one_and_replace PASSED    [ 89%]
tests/unit/store/test_bson_store.py::test_find_one_and_update PASSED     [ 89%]
tests/unit/store/test_bson_store.py::test_find_one_and_delete PASSED     [ 89%]
tests/unit/store/test_bson_store.py::test_bulk_write PASSED              [ 89%]
tests/unit/store/test_bson_store.py::test_delete_one PASSED              [ 89%]
tests/unit/store/test_bson_store.py::test_count PASSED                   [ 89%]
tests/unit/store/test_bson_store.py::test_distinct PASSED                [ 89%]
tests/unit/store/test_bson_store.py::test_delete_many PASSED             [ 90%]
tests/unit/store/test_bson_store.py::test_create_index PASSED            [ 90%]
tests/unit/store/test_bson_store.py::test_drop_index PASSED              [ 90%]
tests/unit/store/test_bson_store.py::test_index_information PASSED       [ 90%]
tests/unit/store/test_metadata_store.py::test_ensure_index PASSED        [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_simple PASSED [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_regex PASSED  [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_as_of PASSED  [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_as_of_regex PASSED [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_metadata_query PASSED [ 90%]
tests/unit/store/test_metadata_store.py::test_list_symbols_all_options PASSED [ 90%]
tests/unit/store/test_ndarray_store.py::test_dtype_parsing PASSED        [ 90%]
tests/unit/store/test_ndarray_store.py::test_promote_dtype_handles_string_increase PASSED [ 90%]
tests/unit/store/test_ndarray_store.py::test_promote_dtype_handles_string_decrease PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_promote_dtype_handles_new_column PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_promote_dtype_handles_rearrangement_of_columns_favouring_dtype1 PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_promote_dtype_throws_if_column_is_removed PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_concat_and_rewrite_checks_chunk_count PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_concat_and_rewrite_checks_written PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_concat_and_rewrite_checks_different_id PASSED [ 91%]
tests/unit/store/test_ndarray_store.py::test_concat_and_rewrite_checks_fewer_updated PASSED [ 91%]
tests/unit/store/test_pandas_ndarray_store.py::test_panel_converted_to_dataframe_and_stacked_to_write PASSED [ 91%]
tests/unit/store/test_pandas_ndarray_store.py::test_panel_append_not_supported PASSED [ 91%]
tests/unit/store/test_pandas_ndarray_store.py::test_panel_converted_from_dataframe_for_reading PASSED [ 91%]
tests/unit/store/test_pandas_ndarray_store.py::test_raises_upon_empty_panel_write PASSED [ 91%]
tests/unit/store/test_pandas_ndarray_store.py::test_read_multi_index_with_no_ts_info PASSED [ 91%]
tests/unit/store/test_pickle_store.py::test_write PASSED                 [ 92%]
tests/unit/store/test_pickle_store.py::test_write_object PASSED          [ 92%]
tests/unit/store/test_pickle_store.py::test_read PASSED                  [ 92%]
tests/unit/store/test_pickle_store.py::test_read_object_backwards_compat PASSED [ 92%]
tests/unit/store/test_pickle_store.py::test_read_object_2 PASSED         [ 92%]
tests/unit/store/test_pickle_store.py::test_read_with_base_version_id PASSED [ 92%]
tests/unit/store/test_pickle_store.py::test_read_backward_compatibility XFAIL [ 92%]
tests/unit/store/test_pickle_store.py::test_unpickle_highest_protocol PASSED [ 92%]
tests/unit/store/test_pickle_store.py::test_pickle_chunk_V1_read PASSED  [ 92%]
tests/unit/store/test_pickle_store.py::test_pickle_store_future_version PASSED [ 92%]
tests/unit/store/test_version_item.py::test_versioned_item_str PASSED    [ 92%]
tests/unit/store/test_version_item.py::test_versioned_item_default_host PASSED [ 92%]
tests/unit/store/test_version_item.py::test_versioned_item_str_handles_none PASSED [ 92%]
tests/unit/store/test_version_item.py::test_versioned_item_metadata_dict PASSED [ 92%]
tests/unit/store/test_version_store.py::test_delete_version_version_not_found PASSED [ 93%]
tests/unit/store/test_version_store.py::test_list_versions_localTime PASSED [ 93%]
tests/unit/store/test_version_store.py::test_list_versions_no_snapshot PASSED [ 93%]
tests/unit/store/test_version_store.py::test__read_preference__allow_secondary_true PASSED [ 93%]
tests/unit/store/test_version_store.py::test__read_preference__allow_secondary_false PASSED [ 93%]
tests/unit/store/test_version_store.py::test__read_preference__default_true PASSED [ 93%]
tests/unit/store/test_version_store.py::test__read_preference__default_false PASSED [ 93%]
tests/unit/store/test_version_store.py::test_get_version_allow_secondary_True PASSED [ 93%]
tests/unit/store/test_version_store.py::test_get_version_allow_secondary_user_override_False PASSED [ 93%]
tests/unit/store/test_version_store.py::test_read_as_of_LondonTime PASSED [ 93%]
tests/unit/store/test_version_store.py::test_read_as_of_NotNaive PASSED  [ 93%]
tests/unit/store/test_version_store.py::test_read_metadata_no_asof PASSED [ 93%]
tests/unit/store/test_version_store.py::test_write_check_quota PASSED    [ 93%]
tests/unit/store/test_version_store.py::test_initialize_library PASSED   [ 94%]
tests/unit/store/test_version_store.py::test_ensure_index PASSED         [ 94%]
tests/unit/store/test_version_store.py::test_prune_previous_versions_0_timeout PASSED [ 94%]
tests/unit/store/test_version_store.py::test_read_handles_operation_failure PASSED [ 94%]
tests/unit/store/test_version_store.py::test_read_reports_random_errors PASSED [ 94%]
tests/unit/store/test_version_store.py::test_snapshot PASSED             [ 94%]
tests/unit/store/test_version_store.py::test_list_symbols_default_pipeline PASSED [ 94%]
tests/unit/store/test_version_store.py::test_snapshot_duplicate_raises_exception PASSED [ 94%]
tests/unit/store/test_version_store.py::test_write_metadata_no_previous_data PASSED [ 94%]
tests/unit/store/test_version_store.py::test_write_metadata_with_previous_data PASSED [ 94%]
tests/unit/store/test_version_store.py::test_write_empty_metadata PASSED [ 94%]
tests/unit/store/test_version_store.py::test_write_metadata_insert_version_dupkeyerror PASSED [ 94%]
tests/unit/store/test_version_store.py::test_write_metadata_insert_version_opfailure PASSED [ 94%]
tests/unit/store/test_version_store.py::test_restore_version PASSED      [ 94%]
tests/unit/store/test_version_store.py::test_restore_version_data_missing_symbol PASSED [ 95%]
tests/unit/store/test_version_store.py::test_restore_last_version PASSED [ 95%]
tests/unit/store/test_version_store.py::test_write_error_clean_retry PASSED [ 95%]
tests/unit/store/test_version_store.py::test_write_insert_version_duplicatekey PASSED [ 95%]
tests/unit/store/test_version_store.py::test_write_insert_version_operror PASSED [ 95%]
tests/unit/store/test_version_store.py::test_append_error_clean_retry PASSED [ 95%]
tests/unit/store/test_version_store.py::test_append_insert_version_duplicatekey PASSED [ 95%]
tests/unit/store/test_version_store.py::test_append_insert_version_operror PASSED [ 95%]
tests/unit/store/test_version_store_audit.py::test_data_change PASSED    [ 95%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_simple PASSED [ 95%]
tests/unit/store/test_version_store_audit.py::test_ArticTransaction_no_audit PASSED [ 95%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_writes_if_metadata_changed PASSED [ 95%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_writes_if_base_data_corrupted PASSED [ 95%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_writes_no_data_found PASSED [ 96%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_writes_no_data_found_deleted PASSED [ 96%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_does_nothing_when_data_not_modified PASSED [ 96%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_does_nothing_when_data_is_None PASSED [ 96%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_guards_against_inconsistent_ts PASSED [ 96%]
tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_detects_concurrent_writes FAILED [ 96%]
tests/unit/store/test_version_store_utils.py::test_split_arrs_empty PASSED [ 96%]
tests/unit/store/test_version_store_utils.py::test_split_arrs PASSED     [ 96%]
tests/unit/store/test_version_store_utils.py::test_checksum PASSED       [ 96%]
tests/unit/store/test_version_store_utils.py::test_checksum_handles_p3strs_and_binary PASSED [ 96%]
tests/unit/store/test_version_store_utils.py::test_version_base_or_id PASSED [ 96%]
tests/unit/tickstore/test_tickstore.py::test_mongo_date_range_query FAILED [ 96%]
tests/unit/tickstore/test_tickstore.py::test_mongo_date_range_query_asserts PASSED [ 96%]
tests/unit/tickstore/test_tickstore.py::test_strify_tickstore PASSED     [ 97%]
tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_no_image PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_with_image FAILED [ 97%]
tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_always_forwards PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_always_forwards_image PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test_tickstore_pandas_to_bucket_image FAILED [ 97%]
tests/unit/tickstore/test_tickstore.py::test__read_preference__allow_secondary_true PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test__read_preference__allow_secondary_false PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test__read_preference__default_true PASSED [ 97%]
tests/unit/tickstore/test_tickstore.py::test__read_preference__default_false PASSED [ 97%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_if_daterange_is_not_provided PASSED [ 97%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_if_date_range_does_not_contain_start_date PASSED [ 97%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_if_date_range_does_not_contain_end_date PASSED [ 97%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_if_date_range_does_not_contain_start_and_end_date PASSED [ 97%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_and_log_an_error_if_an_invalid_library_name_is_added PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_exception_if_date_range_overlaps PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_add_library_to_colllection_if_date_range_is_on_UTC_or_naive_day_boundaries[start0-end0-expected_start0-expected_end0] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_add_library_to_colllection_if_date_range_is_on_UTC_or_naive_day_boundaries[start1-end1-expected_start1-expected_end1] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_add_library_to_colllection_if_date_range_is_on_UTC_or_naive_day_boundaries[start2-end2-expected_start2-expected_end2] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start0-end0] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start1-end1] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start2-end2] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start3-end3] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start4-end4] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start5-end5] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start6-end6] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start7-end7] PASSED [ 98%]
tests/unit/tickstore/test_toplevel.py::test_raise_error_add_library_is_called_with_a_date_range_not_on_day_boundaries[start8-end8] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_pandas_dataframe[start0-end0-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_pandas_dataframe[start1-end1-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_pandas_dataframe[start2-end2-1-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_pandas_dataframe[start3-end3-1-2] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_pandas_dataframe[start4-end4-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_list_of_dicts[start0-end0-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_list_of_dicts[start1-end1-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_list_of_dicts[start2-end2-1-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_list_of_dicts[start3-end3-1-2] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_list_of_dicts[start4-end4-0-3] PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_write_pandas_data_to_right_libraries PASSED [ 99%]
tests/unit/tickstore/test_toplevel.py::test_read PASSED                  [ 99%]
tests/unit/tickstore/test_toplevel.py::test_slice_raises PASSED          [100%]

=================================== FAILURES ===================================
_________________________________ test_indexes _________________________________

arctic = <Arctic at 0x7feffc2f0b38, connected to MongoClient(host=['127.250.227.95:1356'], document_class=dict, tz_aware=False, connect=True)>

    def test_indexes(arctic):
        c = arctic._conn
        arctic.initialize_library("library", VERSION_STORE, segment='month')
        chunk = c.arctic.library.index_information()
        index_version = chunk['_id_']['v']  # Mongo 3.2 has index v1, 3.4 and 3.5 have v2 (3.4 can run in compabitility mode with v1)
>       assert chunk == {u'_id_': {u'key': [(u'_id', 1)], u'ns': u'arctic.library', u'v': index_version},
                         u'symbol_1_parent_1_segment_1': {u'background': True,
                                                          u'key': [(u'symbol', 1),
                                                                   (u'parent', 1),
                                                                   (u'segment', 1)],
                                                          u'ns': u'arctic.library',
                                                          u'unique': True,
                                                          u'v': index_version},
                         u'symbol_1_sha_1': {u'background': True,
                                             u'key': [(u'symbol', 1), (u'sha', 1)],
                                             u'ns': u'arctic.library',
                                             u'unique': True,
                                             u'v': index_version},
                         u'symbol_hashed': {u'background': True,
                                            u'key': [(u'symbol', u'hashed')],
                                            u'ns': u'arctic.library',
                                            u'v': index_version},
                         u'symbol_1_sha_1_segment_1': {u'background': True,
                                                       u'key': [(u'symbol', 1), (u'sha', 1), (u'segment', 1)],
                                                       u'ns': u'arctic.library',
                                                       u'unique': True,
                                                       u'v': index_version}}
E       AssertionError: assert {'_id_': {'ke... 'v': 2}, ...} == {'_id_': {'ke...ue, ...}, ...}
E         Differing items:
E         {'_id_': {'key': [('_id', 1)], 'v': 2}} != {'_id_': {'key': [('_id', 1)], 'ns': 'arctic.library', 'v': 2}}
E         {'symbol_1_sha_1_segment_1': {'background': True, 'key': [('symbol', 1), ('sha', 1), ('segment', 1)], 'unique': True, 'v': 2}} != {'symbol_1_sha_1_segment_1': {'background': True, 'key': [('symbol', 1), ('sha', 1), ('segment', 1)], 'ns': 'arctic.library', 'unique': True, ...}}
E         {'symbol_1_sha_1': {'background': True, 'key': [('symbol', 1), ('sha', 1)], 'unique': True, 'v': 2}} != {'symbol_1_sha_1': {'background': True, 'key': [('symbol', 1), ('sha', 1)...
E         
E         ...Full output truncated (43 lines hidden), use '-vv' to show

tests/integration/test_arctic.py:81: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T12:51:39.551-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T12:51:39.556-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T12:51:39.556-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T12:51:39.557-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":636,"port":1356,"dbPath":"/tmp/tmpe77txx_b","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T12:51:39.557-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T12:51:39.557-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T12:51:39.557-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":1356,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpe77txx_b","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T12:51:39.558-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T12:51:39.558-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T12:51:40.275-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913100:275659][636:0x7f2ebb995a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T12:51:40.275-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913100:275712][636:0x7f2ebb995a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T12:51:40.320-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":762}}
{"t":{"$date":"2021-01-17T12:51:40.320-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.381-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T12:51:40.381-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T12:51:40.401-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T12:51:40.401-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"c6c96fb4-ed3c-48a0-8fcb-752ceececbf9"}},"options":{"uuid":{"$uuid":"c6c96fb4-ed3c-48a0-8fcb-752ceececbf9"}}}}
{"t":{"$date":"2021-01-17T12:51:40.468-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.468-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T12:51:40.468-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T12:51:40.469-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"59eb6a32-9f1e-4496-973a-ae8016da8433"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T12:51:40.529-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.529-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpe77txx_b/diagnostic.data"}}
{"t":{"$date":"2021-01-17T12:51:40.531-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T12:51:40.531-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T12:51:40.531-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"02f7d9b3-f3e9-4003-9b16-18f597307c2f"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:40.531-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":1356,"ssl":"off"}}
{"t":{"$date":"2021-01-17T12:51:40.624-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.624-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.626-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:51370","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.627-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:51372","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.729-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:51374","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.731-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:51376","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.732-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:51378","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.737-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:51380","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.739-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:51382","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.740-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:51384","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T12:51:40.744-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"08f4fd6c-c621-45ee-bab2-ccb3999a9d14"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:40.810-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.811-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"460539c0-52db-4c40-b795-f2d5e3fc0699"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"08f4fd6c-c621-45ee-bab2-ccb3999a9d14"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T12:51:40.839-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.839-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"460539c0-52db-4c40-b795-f2d5e3fc0699"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T12:51:40.839-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"460539c0-52db-4c40-b795-f2d5e3fc0699"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 12:51:39,507 DEBUG pytest_shutil.workspace 
2021-01-17 12:51:39,507 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 12:51:39,508 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpe77txx_b
2021-01-17 12:51:39,508 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 12:51:39,508 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 12:51:39,508 DEBUG pytest_shutil.workspace 
2021-01-17 12:51:39,508 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 12:51:39,516 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=1356 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpe77txx_b
2021-01-17 12:51:39,516 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 12:51:39,517 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 12:51:39,517 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:1356
2021-01-17 12:51:40,122 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 12:51:40,122 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:1356
2021-01-17 12:51:40,725 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 12:51:40,725 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:1356
2021-01-17 12:51:40,736 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218910 for server to start successfully
2021-01-17 12:51:40,736 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 12:51:40,737 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpe77txx_b
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=1356 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpe77txx_b
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:1356
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:1356
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:1356
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218910 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T12:51:40.842-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2fead428-8683-4dad-a006-16248f39ae8b"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:40.908-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:40.909-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2c8d3892-3b72-4452-885f-78f7a82cd772"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:41.016-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.016-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.016-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"9fa08c7e-c3a4-4499-8ca0-648c5fbad6cc"}},"$db":"arctic","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":106}}
{"t":{"$date":"2021-01-17T12:51:41.017-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ceaf9a5b-4bc4-45c3-bcac-332228fb9735"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:41.107-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.107-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.108-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"009ad78e-e597-456d-8b59-4c9c856ce599"}},"namespace":"arctic.library.versions","collectionUUID":{"uuid":{"$uuid":"ceaf9a5b-4bc4-45c3-bcac-332228fb9735"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T12:51:41.127-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T12:51:41.142-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.142-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"009ad78e-e597-456d-8b59-4c9c856ce599"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T12:51:41.142-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"009ad78e-e597-456d-8b59-4c9c856ce599"}}}}
{"t":{"$date":"2021-01-17T12:51:41.143-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b5484de9-c336-4473-bc1a-05d9a2cdbd6e"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:41.232-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T12:51:41.234-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.234-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.235-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d5d85808-1591-4f43-8431-53930ab8bd6f"}},"options":{}}}
{"t":{"$date":"2021-01-17T12:51:41.328-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.328-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.329-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"424094e4-313a-46a6-a6ec-376871e2650e"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"d5d85808-1591-4f43-8431-53930ab8bd6f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T12:51:41.363-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.363-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"424094e4-313a-46a6-a6ec-376871e2650e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T12:51:41.363-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"424094e4-313a-46a6-a6ec-376871e2650e"}}}}
{"t":{"$date":"2021-01-17T12:51:41.364-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6fde8baf-f5f9-4fa1-90a2-8fab680fb1f6"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"d5d85808-1591-4f43-8431-53930ab8bd6f"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T12:51:41.389-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.389-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6fde8baf-f5f9-4fa1-90a2-8fab680fb1f6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T12:51:41.389-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6fde8baf-f5f9-4fa1-90a2-8fab680fb1f6"}}}}
{"t":{"$date":"2021-01-17T12:51:41.390-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"abefac83-b06f-4fce-b28f-4a61cbb15a88"}},"namespace":"arctic.library","collectionUUID":{"uuid":{"$uuid":"d5d85808-1591-4f43-8431-53930ab8bd6f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T12:51:41.422-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T12:51:41.422-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"abefac83-b06f-4fce-b28f-4a61cbb15a88"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T12:51:41.422-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"abefac83-b06f-4fce-b28f-4a61cbb15a88"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 12:51:41,428 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 12:51:41,430 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log call -------------------------------
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 12:51:41,551 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 636 (total_procs_to_kill=1)
2021-01-17 12:51:41,551 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 12:51:41,552 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 12:51:41,559 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 12:51:41,559 DEBUG pytest_shutil.workspace 
2021-01-17 12:51:41,559 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 12:51:41,559 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpe77txx_b
2021-01-17 12:51:41,560 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 12:51:41,560 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 636 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpe77txx_b
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data6-FwPointersCfg.DISABLED] _______

mongo_host = '127.250.227.95:24153'
library = <VersionStore at 0x7fef8afafe10>
    <ArcticLibrary at 0x7feffbc4ee80, arctic_user.library>
        <Arctic at 0x7fefb27342b0, connected to MongoClient(host=['127.250.227.95:24153'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:08.726-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11460,"port":24153,"dbPath":"/tmp/tmpt3db_yk1","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:08.728-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":24153,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpt3db_yk1","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:08.729-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:08.729-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:09.448-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913789:448175][11460:0x7f6c17ff2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:09.448-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913789:448228][11460:0x7f6c17ff2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:09.489-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":760}}
{"t":{"$date":"2021-01-17T13:03:09.489-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.552-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:09.552-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:09.570-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:09.571-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"3602cc40-3de0-4bcb-b454-acdc424ae250"}},"options":{"uuid":{"$uuid":"3602cc40-3de0-4bcb-b454-acdc424ae250"}}}}
{"t":{"$date":"2021-01-17T13:03:09.637-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.637-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:09.637-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:09.638-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b2f95f05-4f83-4349-81bb-462eca0081cd"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:09.695-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.695-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpt3db_yk1/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:09.697-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:09.697-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:09.697-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":24153,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:09.697-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8176035a-081c-4f12-8855-111adea4e824"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:09.789-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.789-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.796-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:45488","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.798-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:45490","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.899-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:45492","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.900-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:45494","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.901-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:45496","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.904-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:45498","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.905-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:45500","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.905-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:45502","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:09.908-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e64dd6d1-9680-4de8-beb3-516f4559a8a8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:09.978-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:09.978-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c9b4d110-2c69-4696-b49f-d7b59f942ad3"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"e64dd6d1-9680-4de8-beb3-516f4559a8a8"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:10.003-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.003-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c9b4d110-2c69-4696-b49f-d7b59f942ad3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:10.003-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c9b4d110-2c69-4696-b49f-d7b59f942ad3"}}}}
{"t":{"$date":"2021-01-17T13:03:10.005-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7b0374f6-9b4c-41ca-815d-7744d52d4617"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:10.072-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.074-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"689f9aa5-79e0-4108-b041-60be68b33088"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:10.179-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.180-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.180-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"87157dd1-b2fe-4681-b0f0-2b0ea916605a"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":106}}
{"t":{"$date":"2021-01-17T13:03:10.180-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b84eda2c-8391-44a1-ac79-4d108ad3ca05"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:10.273-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.273-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.274-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6990c90a-132a-4584-acfd-796aa1e3174b"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"b84eda2c-8391-44a1-ac79-4d108ad3ca05"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:10.298-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:03:10.308-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.308-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6990c90a-132a-4584-acfd-796aa1e3174b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:10.308-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6990c90a-132a-4584-acfd-796aa1e3174b"}}}}
{"t":{"$date":"2021-01-17T13:03:10.309-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f34fd6d5-435a-450d-b8ed-96fb0f6a7951"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:10.401-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:03:10.402-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.402-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.403-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bd155652-1286-4743-adac-47a2ca1a7421"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:10.495-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.495-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.495-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"abcdceaf-4aa9-4cb8-9cff-083d5319bcab"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bd155652-1286-4743-adac-47a2ca1a7421"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:10.527-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.527-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"abcdceaf-4aa9-4cb8-9cff-083d5319bcab"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:10.527-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"abcdceaf-4aa9-4cb8-9cff-083d5319bcab"}}}}
{"t":{"$date":"2021-01-17T13:03:10.528-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0561350f-0cd3-4e25-8e0b-78f13d725e91"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bd155652-1286-4743-adac-47a2ca1a7421"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:10.553-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.553-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0561350f-0cd3-4e25-8e0b-78f13d725e91"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:10.553-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0561350f-0cd3-4e25-8e0b-78f13d725e91"}}}}
{"t":{"$date":"2021-01-17T13:03:10.553-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"7d12aa9e-733a-4a68-8240-f188fa9c149c"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bd155652-1286-4743-adac-47a2ca1a7421"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:10.589-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:10.589-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"7d12aa9e-733a-4a68-8240-f188fa9c149c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:10.589-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"7d12aa9e-733a-4a68-8240-f188fa9c149c"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:08,675 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:08,675 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:08,675 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpt3db_yk1
2021-01-17 13:03:08,676 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:08,676 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:08,676 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:08,676 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:08,687 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=24153 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpt3db_yk1
2021-01-17 13:03:08,687 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:08,688 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:08,688 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:24153
2021-01-17 13:03:09,293 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:09,293 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:24153
2021-01-17 13:03:09,896 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:09,896 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:24153
2021-01-17 13:03:09,903 DEBUG pytest_server_fixtures.base2 waited 0:00:01.214991 for server to start successfully
2021-01-17 13:03:09,903 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:09,904 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:10,595 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:10,596 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpt3db_yk1
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=24153 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpt3db_yk1
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:24153
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:24153
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:24153
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.214991 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:24153', '-f')
{"t":{"$date":"2021-01-17T13:03:10.624-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:45504","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:10.625-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:45506","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:10.625-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:45508","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:10,613 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:10,618 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:10,621 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:24153
2021-01-17 13:03:10,622 INFO arctic.arctic Connecting to mongo: 127.250.227.95:24153 (127.250.227.95:24153)
2021-01-17 13:03:10,627 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:24153', or admin credentials
2021-01-17 13:03:10,639 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:10,639 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:10,640 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:10,644 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:10,646 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:10,647 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:10,649 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:10,662 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:10,662 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:10,663 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:10,664 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:24153
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:24153 (127.250.227.95:24153)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:24153', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:10,690 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11460 (total_procs_to_kill=1)
2021-01-17 13:03:10,690 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:10,690 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:10,698 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:10,698 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:10,698 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:10,698 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpt3db_yk1
2021-01-17 13:03:10,698 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:10,698 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11460 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpt3db_yk1
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
________ test_cleanup_orphaned_chunks[False-data7-FwPointersCfg.HYBRID] ________

mongo_host = '127.250.227.95:4702'
library = <VersionStore at 0x7fef8afa1fd0>
    <ArcticLibrary at 0x7fef8afa1dd8, arctic_user.library>
        <Arctic at 0x7fef8af9d860, connected to MongoClient(host=['127.250.227.95:4702'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:10.752-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11516,"port":4702,"dbPath":"/tmp/tmp3fiydz67","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:10.754-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":4702,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp3fiydz67","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:10.755-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:10.755-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:11.489-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913791:489728][11516:0x7f35863a8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:11.489-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913791:489787][11516:0x7f35863a8a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:11.532-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":777}}
{"t":{"$date":"2021-01-17T13:03:11.532-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:11.593-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:11.594-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:11.612-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:11.613-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"cff4404b-9097-4287-8182-71e8485e9894"}},"options":{"uuid":{"$uuid":"cff4404b-9097-4287-8182-71e8485e9894"}}}}
{"t":{"$date":"2021-01-17T13:03:11.681-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:11.681-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:11.682-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:11.682-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8768b0a6-0a26-4a73-b71d-a0a8bcb278df"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:11.739-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:11.739-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp3fiydz67/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:11.741-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:11.741-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:11.741-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":4702,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:11.741-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"87c529b2-b18a-45c3-b7ce-8d87d0756af8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:11.824-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:35656","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.825-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:35658","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.832-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:11.832-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:11.927-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:35660","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.928-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:35662","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.929-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:35664","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.933-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:35666","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.935-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:35668","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.935-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:35670","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:11.938-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e70eded8-33e7-418c-8d25-4bbfffe99fe3"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.007-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.008-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"32158a5b-30b7-45ad-8612-fe6d61ad694a"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"e70eded8-33e7-418c-8d25-4bbfffe99fe3"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:12.033-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.033-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"32158a5b-30b7-45ad-8612-fe6d61ad694a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:12.033-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"32158a5b-30b7-45ad-8612-fe6d61ad694a"}}}}
{"t":{"$date":"2021-01-17T13:03:12.036-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7fcb6658-00d9-490d-92f6-c8fcc7392074"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.105-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.107-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e1679f01-4eb6-4ac9-93f5-1a35473061c6"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.221-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.221-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.221-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"1e5e83e4-ac58-4cbe-8416-c50077c15bb4"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":114}}
{"t":{"$date":"2021-01-17T13:03:12.222-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f2b251ef-a0e4-4148-9f17-c3cab4d2f8c4"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.313-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.313-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.314-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"02740e10-9552-414b-aa78-abf7be4a91a6"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"f2b251ef-a0e4-4148-9f17-c3cab4d2f8c4"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:12.326-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:03:12.347-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.347-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"02740e10-9552-414b-aa78-abf7be4a91a6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:12.347-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"02740e10-9552-414b-aa78-abf7be4a91a6"}}}}
{"t":{"$date":"2021-01-17T13:03:12.348-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3fb51e59-b8c6-43f8-9599-d34a8796aa4a"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.429-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:03:12.442-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.442-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.443-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f3ead96-a44e-4929-9239-49e2b5d6a5b3"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:12.536-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.536-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.536-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d9cbd8f0-78b0-4dd1-bfda-3e50c0a3306f"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"8f3ead96-a44e-4929-9239-49e2b5d6a5b3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:12.568-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.568-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d9cbd8f0-78b0-4dd1-bfda-3e50c0a3306f"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:12.568-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d9cbd8f0-78b0-4dd1-bfda-3e50c0a3306f"}}}}
{"t":{"$date":"2021-01-17T13:03:12.569-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"dd49b22e-c276-4cef-b0b1-e1abc9e5ecf6"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"8f3ead96-a44e-4929-9239-49e2b5d6a5b3"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:12.593-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.593-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"dd49b22e-c276-4cef-b0b1-e1abc9e5ecf6"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:12.593-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"dd49b22e-c276-4cef-b0b1-e1abc9e5ecf6"}}}}
{"t":{"$date":"2021-01-17T13:03:12.594-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"efe2fcc7-45ee-495f-a772-552f72ed9ce9"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"8f3ead96-a44e-4929-9239-49e2b5d6a5b3"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:12.629-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:12.629-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"efe2fcc7-45ee-495f-a772-552f72ed9ce9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:12.629-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"efe2fcc7-45ee-495f-a772-552f72ed9ce9"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:10,701 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:10,702 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:10,702 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp3fiydz67
2021-01-17 13:03:10,702 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:10,702 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:10,702 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:10,703 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:10,713 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=4702 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3fiydz67
2021-01-17 13:03:10,714 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:10,715 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:10,715 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:4702
2021-01-17 13:03:11,320 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:11,320 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:4702
2021-01-17 13:03:11,923 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:11,924 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:4702
2021-01-17 13:03:11,932 DEBUG pytest_server_fixtures.base2 waited 0:00:01.217199 for server to start successfully
2021-01-17 13:03:11,932 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:11,933 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:12,635 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:12,637 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp3fiydz67
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=4702 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp3fiydz67
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:4702
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:4702
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:4702
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.217199 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:4702', '-f')
{"t":{"$date":"2021-01-17T13:03:12.669-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:35672","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:12.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:35674","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:12.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:35676","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:12,657 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:12,662 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:12,666 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:4702
2021-01-17 13:03:12,666 INFO arctic.arctic Connecting to mongo: 127.250.227.95:4702 (127.250.227.95:4702)
2021-01-17 13:03:12,671 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:4702', or admin credentials
2021-01-17 13:03:12,686 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:12,686 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:12,687 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:12,691 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:12,692 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:12,693 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:12,695 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:12,709 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:12,710 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:12,711 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:4702
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:4702 (127.250.227.95:4702)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:4702', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:12,740 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11516 (total_procs_to_kill=1)
2021-01-17 13:03:12,740 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:12,741 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:12,748 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:12,749 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:12,749 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:12,749 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp3fiydz67
2021-01-17 13:03:12,749 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:12,749 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11516 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp3fiydz67
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data8-FwPointersCfg.ENABLED] ________

mongo_host = '127.250.227.95:6469'
library = <VersionStore at 0x7fefb27564a8>
    <ArcticLibrary at 0x7fefb27563c8, arctic_user.library>
        <Arctic at 0x7fefb273b048, connected to MongoClient(host=['127.250.227.95:6469'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:12.801-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11583,"port":6469,"dbPath":"/tmp/tmpbsc9hppc","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:12.805-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":6469,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpbsc9hppc","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:12.806-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:12.806-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:13.690-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913793:690826][11583:0x7f71828a6a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:13.690-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913793:690901][11583:0x7f71828a6a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:13.734-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":928}}
{"t":{"$date":"2021-01-17T13:03:13.734-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:13.795-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:13.796-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:13.814-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:13.815-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"a7298229-9fc9-4308-a138-23f2de1b3ada"}},"options":{"uuid":{"$uuid":"a7298229-9fc9-4308-a138-23f2de1b3ada"}}}}
{"t":{"$date":"2021-01-17T13:03:13.884-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:13.884-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:13.885-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:13.886-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2e6b5b8f-ddcc-41c9-a4da-1c970bd1233b"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:13.944-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:13.944-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpbsc9hppc/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:13.946-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:13.946-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:13.946-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":6469,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:13.946-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0158afbb-fabc-4490-91fa-71704c56e2f3"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:13.976-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:55800","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.978-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:55802","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.978-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:55804","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.982-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:55806","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.985-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:55808","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.985-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:55810","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:13.989-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5f2a5617-9b63-4cd5-95b2-dfea9bc4bd8e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.071-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.071-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.071-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":125}}
{"t":{"$date":"2021-01-17T13:03:14.104-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.104-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"meta_db.cache","command":{"create":"cache","lsid":{"id":{"$uuid":"4dbf16cd-b6a1-480b-b30e-9081c3a9ceae"}},"$db":"meta_db","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":38,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":3}},"ReplicationStateTransition":{"acquireCount":{"w":3}},"Global":{"acquireCount":{"r":2,"w":1}},"Database":{"acquireCount":{"r":2,"w":1}},"Collection":{"acquireCount":{"r":2,"w":1}},"Mutex":{"acquireCount":{"r":4}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":115}}
{"t":{"$date":"2021-01-17T13:03:14.105-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4283c105-7590-494c-b2eb-7507c70a7878"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"5f2a5617-9b63-4cd5-95b2-dfea9bc4bd8e"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:14.130-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.130-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4283c105-7590-494c-b2eb-7507c70a7878"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:14.130-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4283c105-7590-494c-b2eb-7507c70a7878"}}}}
{"t":{"$date":"2021-01-17T13:03:14.132-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2ed64c04-2796-4ce1-831c-42d489f00638"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.202-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.204-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a8edaa74-b3d1-411d-81e2-f1b463bc8e92"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.297-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.297-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.298-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"532cdc06-5f5b-4a50-91bf-a770e9dacb8b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.405-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.405-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.405-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"4dbf16cd-b6a1-480b-b30e-9081c3a9ceae"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":107}}
{"t":{"$date":"2021-01-17T13:03:14.406-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"db4ac239-4ce4-431c-b2b2-d04989bdd2bf"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"532cdc06-5f5b-4a50-91bf-a770e9dacb8b"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:14.439-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.439-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"db4ac239-4ce4-431c-b2b2-d04989bdd2bf"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:14.439-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"db4ac239-4ce4-431c-b2b2-d04989bdd2bf"}}}}
{"t":{"$date":"2021-01-17T13:03:14.440-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"71638595-1ab2-44c3-9f46-3fd388f316e0"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.478-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:03:14.535-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.535-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.535-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a431efa7-18ac-400e-ab2b-3a667e2fff28"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:14.628-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.628-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.629-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b1cae9be-eabb-4dbd-b91e-80860714e4c0"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a431efa7-18ac-400e-ab2b-3a667e2fff28"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:14.661-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.661-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b1cae9be-eabb-4dbd-b91e-80860714e4c0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:14.661-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b1cae9be-eabb-4dbd-b91e-80860714e4c0"}}}}
{"t":{"$date":"2021-01-17T13:03:14.662-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"709ad292-2a6e-42ae-925f-ac303c13c7d9"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a431efa7-18ac-400e-ab2b-3a667e2fff28"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:14.686-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.686-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"709ad292-2a6e-42ae-925f-ac303c13c7d9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:14.686-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"709ad292-2a6e-42ae-925f-ac303c13c7d9"}}}}
{"t":{"$date":"2021-01-17T13:03:14.687-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b5ebcb62-8e30-4926-b639-9ba40b7d965b"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a431efa7-18ac-400e-ab2b-3a667e2fff28"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:14.722-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:14.722-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b5ebcb62-8e30-4926-b639-9ba40b7d965b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:14.722-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b5ebcb62-8e30-4926-b639-9ba40b7d965b"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:12,752 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:12,752 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:12,753 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpbsc9hppc
2021-01-17 13:03:12,753 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:12,753 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:12,753 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:12,753 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:12,762 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=6469 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpbsc9hppc
2021-01-17 13:03:12,763 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:12,763 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:12,764 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:6469
2021-01-17 13:03:13,368 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:13,368 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:6469
2021-01-17 13:03:13,972 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:13,972 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:6469
2021-01-17 13:03:13,982 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218185 for server to start successfully
2021-01-17 13:03:13,982 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:13,983 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:14,728 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:14,730 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpbsc9hppc
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=6469 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpbsc9hppc
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:6469
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:6469
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:6469
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218185 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:6469', '-f')
{"t":{"$date":"2021-01-17T13:03:14.757-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:55812","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:14.759-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:55816","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:14.759-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:55814","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:14,748 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:14,752 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:14,755 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:6469
2021-01-17 13:03:14,755 INFO arctic.arctic Connecting to mongo: 127.250.227.95:6469 (127.250.227.95:6469)
2021-01-17 13:03:14,760 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:6469', or admin credentials
2021-01-17 13:03:14,774 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:14,774 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:14,775 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:14,779 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:14,782 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:14,783 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:14,785 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:14,799 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:14,799 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:14,800 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:14,800 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:14,800 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:14,800 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:14,800 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:14,801 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:14,801 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:6469
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:6469 (127.250.227.95:6469)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:6469', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:14,828 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11583 (total_procs_to_kill=1)
2021-01-17 13:03:14,828 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:14,828 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:14,835 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:14,836 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:14,836 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:14,836 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpbsc9hppc
2021-01-17 13:03:14,836 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:14,836 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11583 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpbsc9hppc
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data9-FwPointersCfg.DISABLED] _______

mongo_host = '127.250.227.95:30245'
library = <VersionStore at 0x7feffbc8ae10>
    <ArcticLibrary at 0x7feffbc8a7f0, arctic_user.library>
        <Arctic at 0x7fef8af2d080, connected to MongoClient(host=['127.250.227.95:30245'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:14.887-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11636,"port":30245,"dbPath":"/tmp/tmp0ngnlg72","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:14.893-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":30245,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp0ngnlg72","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:14.894-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:14.894-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:15.710-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913795:710339][11636:0x7f66034e5a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:15.710-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913795:710401][11636:0x7f66034e5a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:15.754-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":860}}
{"t":{"$date":"2021-01-17T13:03:15.754-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:15.814-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:15.814-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:15.833-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:15.833-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"f7f3b421-17aa-4b85-b7b6-b5b56ad1efa6"}},"options":{"uuid":{"$uuid":"f7f3b421-17aa-4b85-b7b6-b5b56ad1efa6"}}}}
{"t":{"$date":"2021-01-17T13:03:15.903-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:15.903-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:15.903-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:15.904-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4bfa1553-291d-477b-8d6c-60ce191c81f4"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:15.962-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:15.962-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp0ngnlg72/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:15.964-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:15.964-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":30245,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:15.964-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:15.964-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"520d4652-4778-4d7a-b7c2-8f12a10b19f9"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.053-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.053-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.061-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:46094","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.063-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:46096","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.063-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:46098","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.067-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:46100","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.069-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:46102","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.069-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:46104","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.073-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4e08bed6-929e-4bc7-82bc-486199fa2c7c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.140-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.141-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e3099449-eb9b-4eb9-af49-8f96a1d432da"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"4e08bed6-929e-4bc7-82bc-486199fa2c7c"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:16.166-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.166-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e3099449-eb9b-4eb9-af49-8f96a1d432da"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:16.166-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e3099449-eb9b-4eb9-af49-8f96a1d432da"}}}}
{"t":{"$date":"2021-01-17T13:03:16.168-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6ad9c128-a0b0-4c2f-8370-ce4da2d413af"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.238-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.239-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0fa05e33-59fa-470d-a4b7-252b771430b0"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.332-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.332-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.333-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1f36e1d5-3e23-42fd-a330-1ee2297ee4bc"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.436-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.436-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.436-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn5","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"af0bdd35-33ab-4707-9375-8d3c676edb3e"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":103}}
{"t":{"$date":"2021-01-17T13:03:16.437-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f8c4aa01-f06e-4ed0-8cbf-c862e9e7352b"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"1f36e1d5-3e23-42fd-a330-1ee2297ee4bc"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:16.469-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.469-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f8c4aa01-f06e-4ed0-8cbf-c862e9e7352b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:16.469-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f8c4aa01-f06e-4ed0-8cbf-c862e9e7352b"}}}}
{"t":{"$date":"2021-01-17T13:03:16.470-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6a5d2818-e65a-4609-820f-eba3b59be123"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.563-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:03:16.564-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.564-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.564-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ae86bc2c-bb78-4dd0-ad87-1fac89d7ba95"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:16.659-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.659-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.660-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"522ea0d9-feed-4ff1-b86c-f5255fa97326"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"ae86bc2c-bb78-4dd0-ad87-1fac89d7ba95"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:16.691-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.691-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"522ea0d9-feed-4ff1-b86c-f5255fa97326"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:16.691-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"522ea0d9-feed-4ff1-b86c-f5255fa97326"}}}}
{"t":{"$date":"2021-01-17T13:03:16.692-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c7328875-df1f-446f-a457-0b0b507e04b0"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"ae86bc2c-bb78-4dd0-ad87-1fac89d7ba95"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:16.717-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.717-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c7328875-df1f-446f-a457-0b0b507e04b0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:16.717-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c7328875-df1f-446f-a457-0b0b507e04b0"}}}}
{"t":{"$date":"2021-01-17T13:03:16.718-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1b34e722-f5cc-4d85-a1c7-c5acdb123f7d"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"ae86bc2c-bb78-4dd0-ad87-1fac89d7ba95"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:16.753-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:16.753-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1b34e722-f5cc-4d85-a1c7-c5acdb123f7d"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:16.753-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1b34e722-f5cc-4d85-a1c7-c5acdb123f7d"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:14,839 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:14,839 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:14,840 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp0ngnlg72
2021-01-17 13:03:14,840 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:14,840 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:14,840 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:14,840 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:14,849 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=30245 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp0ngnlg72
2021-01-17 13:03:14,850 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:14,850 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:14,850 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:30245
2021-01-17 13:03:15,454 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:15,455 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:30245
2021-01-17 13:03:16,058 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:16,058 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:30245
2021-01-17 13:03:16,066 DEBUG pytest_server_fixtures.base2 waited 0:00:01.216341 for server to start successfully
2021-01-17 13:03:16,067 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:16,067 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:16,759 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:16,761 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp0ngnlg72
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=30245 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp0ngnlg72
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:30245
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:30245
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:30245
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.216341 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:30245', '-f')
{"t":{"$date":"2021-01-17T13:03:16.793-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:46106","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.794-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:46108","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:16.795-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:46110","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:16,780 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:16,787 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:16,790 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:30245
2021-01-17 13:03:16,790 INFO arctic.arctic Connecting to mongo: 127.250.227.95:30245 (127.250.227.95:30245)
2021-01-17 13:03:16,796 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:30245', or admin credentials
2021-01-17 13:03:16,809 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:16,810 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:16,810 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:16,814 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:16,815 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:16,816 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:16,818 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:16,832 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:16,832 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:16,833 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:16,834 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:30245
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:30245 (127.250.227.95:30245)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:30245', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:16,866 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11636 (total_procs_to_kill=1)
2021-01-17 13:03:16,866 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:16,867 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:16,874 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:16,874 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:16,874 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:16,874 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp0ngnlg72
2021-01-17 13:03:16,875 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:16,875 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11636 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp0ngnlg72
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data10-FwPointersCfg.HYBRID] ________

mongo_host = '127.250.227.95:12882'
library = <VersionStore at 0x7fef8afa1b00>
    <ArcticLibrary at 0x7fef8afa1ba8, arctic_user.library>
        <Arctic at 0x7fef8af2ddd8, connected to MongoClient(host=['127.250.227.95:12882'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:16.930-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:16.931-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:16.931-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:16.932-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11689,"port":12882,"dbPath":"/tmp/tmpwxhbhl05","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:16.932-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:16.932-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:16.932-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":12882,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpwxhbhl05","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:16.933-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:16.933-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:17.708-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913797:708580][11689:0x7fb954c34a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:17.708-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913797:708643][11689:0x7fb954c34a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:17.754-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":821}}
{"t":{"$date":"2021-01-17T13:03:17.754-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:17.815-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:17.815-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:17.834-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:17.834-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"eb28552b-fd74-40e7-954d-5a31f2544c5b"}},"options":{"uuid":{"$uuid":"eb28552b-fd74-40e7-954d-5a31f2544c5b"}}}}
{"t":{"$date":"2021-01-17T13:03:17.903-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:17.903-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:17.903-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:17.904-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"31b299cf-b709-41a0-acc2-367c257b164f"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:17.964-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:17.964-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpwxhbhl05/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:17.966-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:17.966-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:17.966-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":12882,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:17.966-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"201ef652-be4c-416a-91d1-132496ef5b4d"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:17.999-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:43878","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.001-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:43880","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.058-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.058-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.102-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:43882","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.104-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:43884","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.104-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:43886","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.109-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:43888","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.110-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:43890","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.111-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:43892","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.115-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7200bd92-b8db-4081-bca8-f478fdd8d71b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.182-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.183-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"2bede76c-4555-4984-b78c-1c4dafce12e2"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"7200bd92-b8db-4081-bca8-f478fdd8d71b"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:18.208-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.208-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"2bede76c-4555-4984-b78c-1c4dafce12e2"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:18.208-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"2bede76c-4555-4984-b78c-1c4dafce12e2"}}}}
{"t":{"$date":"2021-01-17T13:03:18.210-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1b8f2b5b-1dec-4c83-8d83-9260393f261b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.278-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.280-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b839db25-e791-48e9-9036-df2714401301"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.399-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.399-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.399-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"e7b2f299-a15e-4c7c-a966-24661b85fe9a"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":119}}
{"t":{"$date":"2021-01-17T13:03:18.400-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5fd2b765-f960-4733-9a13-a93c68cfa433"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.492-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.492-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.493-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a9e3c51a-9cae-4d6c-a63d-b9639d60483b"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"5fd2b765-f960-4733-9a13-a93c68cfa433"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:18.501-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:03:18.525-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.525-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a9e3c51a-9cae-4d6c-a63d-b9639d60483b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:18.525-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a9e3c51a-9cae-4d6c-a63d-b9639d60483b"}}}}
{"t":{"$date":"2021-01-17T13:03:18.526-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c35c2681-7ded-474f-95df-3554e2a3e5ae"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.604-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-17T13:03:18.618-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.618-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.619-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"456042f3-d346-4b50-8d94-4566d7848d66"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:18.714-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.714-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.715-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1af4ce44-08a6-4069-81e0-103ecff82ae1"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"456042f3-d346-4b50-8d94-4566d7848d66"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:18.746-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.747-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1af4ce44-08a6-4069-81e0-103ecff82ae1"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:18.747-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1af4ce44-08a6-4069-81e0-103ecff82ae1"}}}}
{"t":{"$date":"2021-01-17T13:03:18.747-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"158e9983-5fba-4890-854b-400e3e092b45"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"456042f3-d346-4b50-8d94-4566d7848d66"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:18.775-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.775-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"158e9983-5fba-4890-854b-400e3e092b45"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:18.775-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"158e9983-5fba-4890-854b-400e3e092b45"}}}}
{"t":{"$date":"2021-01-17T13:03:18.776-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1ac0b80d-3e5c-4f03-bc2e-c06b9cafd11e"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"456042f3-d346-4b50-8d94-4566d7848d66"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:18.810-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:18.810-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1ac0b80d-3e5c-4f03-bc2e-c06b9cafd11e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:18.810-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1ac0b80d-3e5c-4f03-bc2e-c06b9cafd11e"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpwxhbhl05
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:16,879 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:16,880 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:16,889 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=12882 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwxhbhl05
2021-01-17 13:03:16,890 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:16,890 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:16,891 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12882
2021-01-17 13:03:17,495 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:17,495 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12882
2021-01-17 13:03:18,099 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:18,099 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12882
2021-01-17 13:03:18,107 DEBUG pytest_server_fixtures.base2 waited 0:00:01.216842 for server to start successfully
2021-01-17 13:03:18,107 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:18,108 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:18,816 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:18,818 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpwxhbhl05
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=12882 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwxhbhl05
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12882
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12882
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12882
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.216842 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:12882', '-f')
{"t":{"$date":"2021-01-17T13:03:18.851-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:43894","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.852-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:43896","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:18.853-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:43898","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:18,836 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:18,845 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:18,848 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:12882
2021-01-17 13:03:18,848 INFO arctic.arctic Connecting to mongo: 127.250.227.95:12882 (127.250.227.95:12882)
2021-01-17 13:03:18,854 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:12882', or admin credentials
2021-01-17 13:03:18,867 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:18,868 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:18,868 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:18,872 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:18,873 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:18,874 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:18,876 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:18,889 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:18,889 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:18,890 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:18,891 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:12882
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:12882 (127.250.227.95:12882)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:12882', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:18,924 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11689 (total_procs_to_kill=1)
2021-01-17 13:03:18,924 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:18,924 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:18,932 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:18,932 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:18,932 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:18,932 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpwxhbhl05
2021-01-17 13:03:18,932 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:18,932 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11689 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpwxhbhl05
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______ test_cleanup_orphaned_chunks[False-data11-FwPointersCfg.ENABLED] _______

mongo_host = '127.250.227.95:19261'
library = <VersionStore at 0x7feffbc49cc0>
    <ArcticLibrary at 0x7feffbc49240, arctic_user.library>
        <Arctic at 0x7fef8afa3128, connected to MongoClient(host=['127.250.227.95:19261'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_chunks(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            with patch("bson.ObjectId", return_value=_id):
                library.write('symbol', data, prune_previous_version=False)
    
            # Number of chunks
            chunk_count = mongo_count(library._collection)
            # Remove the version document ; should cleanup
            library._collection.versions.delete_one({'_id': _id})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) == chunk_count
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
>               assert mongo_count(library._collection) == 0
E               assert 1 == 0
E                 +1
E                 -0

tests/integration/scripts/test_arctic_fsck.py:53: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:03:18.985-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11758,"port":19261,"dbPath":"/tmp/tmpevqzn9p3","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:03:18.988-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":19261,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpevqzn9p3","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:03:18.989-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:18.989-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:03:20.099-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913800:99074][11758:0x7f5a2f4eba80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:20.099-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913800:99205][11758:0x7f5a2f4eba80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:03:20.147-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1158}}
{"t":{"$date":"2021-01-17T13:03:20.147-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.211-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:03:20.212-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:03:20.230-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:03:20.231-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"0707fef6-5fea-4fe7-86ec-a8003fdc90fd"}},"options":{"uuid":{"$uuid":"0707fef6-5fea-4fe7-86ec-a8003fdc90fd"}}}}
{"t":{"$date":"2021-01-17T13:03:20.302-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.302-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:03:20.303-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:03:20.304-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"29b57d4d-3c32-4a18-a00e-70bd20b97d50"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:03:20.368-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.369-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpevqzn9p3/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:03:20.373-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:03:20.373-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"eb2a034a-87be-4485-962c-de5f46a5873b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:20.373-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:03:20.373-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":19261,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:03:20.473-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.473-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.667-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:56882","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:56884","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.774-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:56886","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.777-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:56888","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.778-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:56890","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.785-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:56892","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.791-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:56894","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.791-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:56896","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:20.798-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bbe05ad0-0b62-4944-86f0-b28e593766bb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:20.867-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.869-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"725c4446-202c-4e2e-ba9a-35b87e410210"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"bbe05ad0-0b62-4944-86f0-b28e593766bb"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:03:20.895-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.895-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"725c4446-202c-4e2e-ba9a-35b87e410210"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:20.895-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"725c4446-202c-4e2e-ba9a-35b87e410210"}}}}
{"t":{"$date":"2021-01-17T13:03:20.898-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e09b3e9c-2e00-4001-b52a-174a2746030f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:20.967-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:20.969-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"763c6bcd-44f7-4518-a5f7-e8bfb051c9de"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:21.068-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.068-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.069-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b5ec8283-400e-4569-89ce-aa4a357f68bf"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:21.163-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.163-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.164-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"695473fb-00e5-4cf1-9740-ea628e6ca7b8"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"b5ec8283-400e-4569-89ce-aa4a357f68bf"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:03:21.170-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:03:21.197-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.197-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"695473fb-00e5-4cf1-9740-ea628e6ca7b8"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:21.197-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"695473fb-00e5-4cf1-9740-ea628e6ca7b8"}}}}
{"t":{"$date":"2021-01-17T13:03:21.198-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0d1b7644-8951-4a55-9bd8-5dcfd083dc44"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:21.278-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-17T13:03:21.291-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.291-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.292-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"44c1dc2b-36cc-48bd-8515-bcfc2af5cbf4"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:03:21.386-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.386-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.387-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"54186b27-d270-48e2-9d24-f25ff2d5e80e"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"44c1dc2b-36cc-48bd-8515-bcfc2af5cbf4"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:03:21.418-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.418-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"54186b27-d270-48e2-9d24-f25ff2d5e80e"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:21.418-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"54186b27-d270-48e2-9d24-f25ff2d5e80e"}}}}
{"t":{"$date":"2021-01-17T13:03:21.419-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"8705042c-002d-495a-93ca-b8b90c7ca031"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"44c1dc2b-36cc-48bd-8515-bcfc2af5cbf4"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:21.447-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.447-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"8705042c-002d-495a-93ca-b8b90c7ca031"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:21.447-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"8705042c-002d-495a-93ca-b8b90c7ca031"}}}}
{"t":{"$date":"2021-01-17T13:03:21.448-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"5eba05f3-e7c8-4f01-a079-178dbd44a89c"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"44c1dc2b-36cc-48bd-8515-bcfc2af5cbf4"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:03:21.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:03:21.482-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"5eba05f3-e7c8-4f01-a079-178dbd44a89c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:03:21.482-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"5eba05f3-e7c8-4f01-a079-178dbd44a89c"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpevqzn9p3
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:18,936 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:18,937 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:03:18,946 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=19261 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpevqzn9p3
2021-01-17 13:03:18,946 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:03:18,947 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:03:18,947 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:19261
2021-01-17 13:03:19,551 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:03:19,551 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:19261
2021-01-17 13:03:20,156 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:03:20,157 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:19261
2021-01-17 13:03:20,765 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-17 13:03:20,766 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:19261
2021-01-17 13:03:20,785 DEBUG pytest_server_fixtures.base2 waited 0:00:01.838593 for server to start successfully
2021-01-17 13:03:20,786 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:03:20,787 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:03:21,488 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:03:21,490 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpevqzn9p3
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=19261 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpevqzn9p3
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:19261
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:19261
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:19261
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:19261
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.838593 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:19261', '-f')
{"t":{"$date":"2021-01-17T13:03:21.518-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:56900","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:21.520-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:56902","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:03:21.520-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:56904","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:03:21,507 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:03:21,513 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:03:21,515 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:19261
2021-01-17 13:03:21,516 INFO arctic.arctic Connecting to mongo: 127.250.227.95:19261 (127.250.227.95:19261)
2021-01-17 13:03:21,521 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:19261', or admin credentials
2021-01-17 13:03:21,535 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:21,535 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:03:21,536 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:03:21,540 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:03:21,543 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:03:21,544 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:03:21,546 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:21,561 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:03:21,561 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:03:21,562 INFO arctic.scripts.arctic_fsck Symbols:           0
2021-01-17 13:03:21,562 INFO arctic.scripts.arctic_fsck Versions:          0   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:21,562 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:03:21,563 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:03:21,563 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:03:21,563 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:03:21,563 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:19261
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:19261 (127.250.227.95:19261)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:19261', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           0
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          0   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:03:21,598 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11758 (total_procs_to_kill=1)
2021-01-17 13:03:21,598 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:03:21,598 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:03:21,605 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:03:21,606 DEBUG pytest_shutil.workspace 
2021-01-17 13:03:21,606 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:21,606 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpevqzn9p3
2021-01-17 13:03:21,606 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:03:21,606 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11758 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpevqzn9p3
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED] ______

mongo_host = '127.250.227.95:26587'
library = <VersionStore at 0x7fef8af12780>
    <ArcticLibrary at 0x7fef8af127f0, arctic_user.library>
        <Arctic at 0x7fef8965c9e8, connected to MongoClient(host=['127.250.227.95:26587'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346d50000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:36.749-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:36.752-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:36.752-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:36.753-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":13842,"port":26587,"dbPath":"/tmp/tmph6sq7bkd","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:36.753-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:36.753-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:36.753-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":26587,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmph6sq7bkd","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:36.754-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:36.754-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:37.531-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913877:531809][13842:0x7f3b191d5a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:37.531-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913877:531873][13842:0x7f3b191d5a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:37.573-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":819}}
{"t":{"$date":"2021-01-17T13:04:37.574-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:37.636-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:37.636-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:37.655-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:37.655-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"1569cef5-4297-4e09-aa8b-654db2a9c172"}},"options":{"uuid":{"$uuid":"1569cef5-4297-4e09-aa8b-654db2a9c172"}}}}
{"t":{"$date":"2021-01-17T13:04:37.723-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:37.723-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:37.723-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:37.724-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fe954835-8a5f-4ecd-bb7b-659411bbfe4b"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:37.780-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:37.781-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmph6sq7bkd/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:37.782-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:37.782-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:37.782-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":26587,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:37.782-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6a5bdd42-91a8-4f70-9dbe-f117e85a15a7"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:37.818-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:51932","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.820-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:51934","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.875-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:37.875-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:37.923-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:51936","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.926-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:51938","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.926-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:51940","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.931-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:51942","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.935-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:51944","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.935-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:51946","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:37.943-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"88642fdd-8d1a-42fc-9f29-9b828b3d4978"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.012-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.013-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ca7ea8b2-b6ab-4af5-9223-8b2a58b202db"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"88642fdd-8d1a-42fc-9f29-9b828b3d4978"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:38.037-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.037-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ca7ea8b2-b6ab-4af5-9223-8b2a58b202db"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:38.037-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ca7ea8b2-b6ab-4af5-9223-8b2a58b202db"}}}}
{"t":{"$date":"2021-01-17T13:04:38.039-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d30234f9-62d6-4459-a386-8a0ce56e09ee"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.107-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.108-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"87f42f45-35fe-4cf1-84bf-b783fe50244f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.216-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.216-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.216-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"6923a43e-a5c3-4833-8075-710f41206a73"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":108}}
{"t":{"$date":"2021-01-17T13:04:38.217-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d3791ef8-e30c-4673-864e-22ca77e596aa"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.308-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.308-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.309-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c800c511-9c16-4806-b806-33402fbe972c"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"d3791ef8-e30c-4673-864e-22ca77e596aa"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:38.320-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:04:38.343-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.343-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c800c511-9c16-4806-b806-33402fbe972c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:38.343-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c800c511-9c16-4806-b806-33402fbe972c"}}}}
{"t":{"$date":"2021-01-17T13:04:38.344-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d0c8465b-4fe6-4b4e-a0cf-16413eda9657"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.426-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:04:38.438-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.438-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.439-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bfa3ff71-09da-44a2-8b91-c4ba3ac3968f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:38.530-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.530-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.531-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3929318c-f542-4485-b94e-ec1d8790bcfc"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bfa3ff71-09da-44a2-8b91-c4ba3ac3968f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:38.563-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.563-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3929318c-f542-4485-b94e-ec1d8790bcfc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:38.563-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3929318c-f542-4485-b94e-ec1d8790bcfc"}}}}
{"t":{"$date":"2021-01-17T13:04:38.563-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"e0257640-a3e3-4b66-9252-4a5bd9d0c4bb"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bfa3ff71-09da-44a2-8b91-c4ba3ac3968f"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:38.588-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.588-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"e0257640-a3e3-4b66-9252-4a5bd9d0c4bb"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:38.588-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"e0257640-a3e3-4b66-9252-4a5bd9d0c4bb"}}}}
{"t":{"$date":"2021-01-17T13:04:38.589-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"80f1b327-1dd7-4de0-8946-900a754ca6ac"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"bfa3ff71-09da-44a2-8b91-c4ba3ac3968f"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:38.624-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:38.624-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"80f1b327-1dd7-4de0-8946-900a754ca6ac"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:38.624-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"80f1b327-1dd7-4de0-8946-900a754ca6ac"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmph6sq7bkd
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:36,697 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:36,698 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:36,708 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=26587 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmph6sq7bkd
2021-01-17 13:04:36,708 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:36,709 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:36,709 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:26587
2021-01-17 13:04:37,314 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:37,314 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:26587
2021-01-17 13:04:37,918 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:37,918 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:26587
2021-01-17 13:04:37,931 DEBUG pytest_server_fixtures.base2 waited 0:00:01.221992 for server to start successfully
2021-01-17 13:04:37,931 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:37,933 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:38,629 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:38,631 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmph6sq7bkd
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=26587 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmph6sq7bkd
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:26587
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:26587
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:26587
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.221992 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:26587', '-f')
{"t":{"$date":"2021-01-17T13:04:38.660-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:51948","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:38.661-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:51950","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:38.662-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:51952","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:38,648 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:38,652 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:38,658 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:26587
2021-01-17 13:04:38,658 INFO arctic.arctic Connecting to mongo: 127.250.227.95:26587 (127.250.227.95:26587)
2021-01-17 13:04:38,663 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:26587', or admin credentials
2021-01-17 13:04:38,678 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:38,678 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:38,679 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:38,684 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:38,685 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:38,687 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:38,702 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:38,703 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:38,704 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:38,704 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:38,704 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:38,704 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:38,704 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:38,705 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:38,705 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:26587
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:26587 (127.250.227.95:26587)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:26587', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:38,735 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 13842 (total_procs_to_kill=1)
2021-01-17 13:04:38,735 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:38,735 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:38,743 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:38,743 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:38,743 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:38,743 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmph6sq7bkd
2021-01-17 13:04:38,743 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:38,743 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 13842 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmph6sq7bkd
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID] _______

mongo_host = '127.250.227.95:3294'
library = <VersionStore at 0x7fefb2756860>
    <ArcticLibrary at 0x7fefb27562b0, arctic_user.library>
        <Arctic at 0x7fef8965ce80, connected to MongoClient(host=['127.250.227.95:3294'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346d70000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:38.792-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:38.796-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:38.796-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":13900,"port":3294,"dbPath":"/tmp/tmpfi0fwkxg","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":3294,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpfi0fwkxg","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:38.797-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:39.618-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913879:618391][13900:0x7f5d221eea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:39.618-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913879:618453][13900:0x7f5d221eea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:39.661-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":864}}
{"t":{"$date":"2021-01-17T13:04:39.661-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:39.723-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:39.723-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:39.742-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:39.742-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"ff8609bb-967d-4bad-b190-d8c0eb3cc85d"}},"options":{"uuid":{"$uuid":"ff8609bb-967d-4bad-b190-d8c0eb3cc85d"}}}}
{"t":{"$date":"2021-01-17T13:04:39.811-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:39.811-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:39.811-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:39.812-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6d216985-e6a5-48ff-a874-e93cf9ab9eb9"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:39.869-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:39.869-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpfi0fwkxg/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:39.871-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:39.871-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:39.871-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":3294,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:39.871-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"74f19870-4d43-450d-b9a2-a9fe3b53093b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:39.963-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:39.963-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:39.970-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:46688","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.972-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:46690","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.972-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:46692","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.976-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:46694","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.979-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:46696","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.979-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:46698","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:39.984-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6fcd63e2-d42f-4189-9d74-63c47e671da9"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.053-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.054-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f037cc6a-1374-4b1d-bba8-6aafa657a502"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"6fcd63e2-d42f-4189-9d74-63c47e671da9"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:40.079-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.079-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f037cc6a-1374-4b1d-bba8-6aafa657a502"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:40.079-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f037cc6a-1374-4b1d-bba8-6aafa657a502"}}}}
{"t":{"$date":"2021-01-17T13:04:40.081-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"26256c44-d82d-42f0-9a2a-69a64cf3d43d"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.151-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.152-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c303bddc-78c9-4e4c-829d-58672f220039"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.245-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.245-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.246-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cafcac89-d7b4-415f-974f-3beff8860e67"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.353-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.353-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.353-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"23ce744d-dc48-46e9-bf78-221da1da6646"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":107}}
{"t":{"$date":"2021-01-17T13:04:40.354-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"822fbf21-4915-4a1f-93dc-a88977cda221"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"cafcac89-d7b4-415f-974f-3beff8860e67"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:40.387-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.387-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"822fbf21-4915-4a1f-93dc-a88977cda221"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:40.387-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"822fbf21-4915-4a1f-93dc-a88977cda221"}}}}
{"t":{"$date":"2021-01-17T13:04:40.388-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"934f9ce2-ae1f-4e6d-a90e-d63b914c06fa"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.473-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:04:40.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.483-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d741ada8-3f45-40e9-a5c7-3aebc4c76dbc"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:40.575-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.575-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.576-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"67078662-9eb3-479b-8174-5b756a059e8b"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d741ada8-3f45-40e9-a5c7-3aebc4c76dbc"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:40.608-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.608-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"67078662-9eb3-479b-8174-5b756a059e8b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:40.608-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"67078662-9eb3-479b-8174-5b756a059e8b"}}}}
{"t":{"$date":"2021-01-17T13:04:40.609-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"bcc1495d-7770-4f6b-8841-97fd4a567cc9"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d741ada8-3f45-40e9-a5c7-3aebc4c76dbc"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:40.633-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.633-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"bcc1495d-7770-4f6b-8841-97fd4a567cc9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:40.633-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"bcc1495d-7770-4f6b-8841-97fd4a567cc9"}}}}
{"t":{"$date":"2021-01-17T13:04:40.634-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"546aebd7-197f-4e8b-98a7-6bd10fc8e5d4"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"d741ada8-3f45-40e9-a5c7-3aebc4c76dbc"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:40.669-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:40.669-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"546aebd7-197f-4e8b-98a7-6bd10fc8e5d4"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:40.669-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"546aebd7-197f-4e8b-98a7-6bd10fc8e5d4"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:38,747 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:38,747 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:38,747 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpfi0fwkxg
2021-01-17 13:04:38,747 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:38,748 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:38,748 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:38,748 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:38,758 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=3294 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpfi0fwkxg
2021-01-17 13:04:38,758 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:38,758 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:38,759 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3294
2021-01-17 13:04:39,363 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:39,363 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3294
2021-01-17 13:04:39,967 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:39,967 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3294
2021-01-17 13:04:39,976 DEBUG pytest_server_fixtures.base2 waited 0:00:01.217669 for server to start successfully
2021-01-17 13:04:39,976 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:39,977 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:40,675 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:40,676 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpfi0fwkxg
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=3294 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpfi0fwkxg
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3294
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3294
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3294
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.217669 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:3294', '-f')
{"t":{"$date":"2021-01-17T13:04:40.708-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:46704","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:40.709-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:46706","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:40.710-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:46708","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:40,693 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:40,699 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:40,706 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:3294
2021-01-17 13:04:40,706 INFO arctic.arctic Connecting to mongo: 127.250.227.95:3294 (127.250.227.95:3294)
2021-01-17 13:04:40,711 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:3294', or admin credentials
2021-01-17 13:04:40,724 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:40,724 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:40,725 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:40,731 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:40,732 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:40,734 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:40,747 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:40,747 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:40,749 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:3294
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:3294 (127.250.227.95:3294)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:3294', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:40,778 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 13900 (total_procs_to_kill=1)
2021-01-17 13:04:40,778 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:40,778 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:40,786 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:40,786 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:40,786 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:40,786 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpfi0fwkxg
2021-01-17 13:04:40,786 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:40,786 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 13900 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpfi0fwkxg
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED] ______

mongo_host = '127.250.227.95:8692'
library = <VersionStore at 0x7fefd2408a58>
    <ArcticLibrary at 0x7fefd2408c50, arctic_user.library>
        <Arctic at 0x7fef8afa15c0, connected to MongoClient(host=['127.250.227.95:8692'], document_class=dict, tz_aware=False, connect=True)>
data = {'thing': sentinel.val}, dry_run = False
fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346d90000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:40.839-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:40.844-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:40.844-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:40.844-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":13953,"port":8692,"dbPath":"/tmp/tmpwhzr3cn6","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:40.844-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:40.845-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:40.845-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":8692,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpwhzr3cn6","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:40.846-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:40.846-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:41.673-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913881:673864][13953:0x7f95f16d4a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:41.673-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913881:673926][13953:0x7f95f16d4a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:41.717-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":871}}
{"t":{"$date":"2021-01-17T13:04:41.717-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:41.778-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:41.778-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:41.797-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:41.798-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"bc3e08e1-028d-4c39-bcab-e014229f4c6b"}},"options":{"uuid":{"$uuid":"bc3e08e1-028d-4c39-bcab-e014229f4c6b"}}}}
{"t":{"$date":"2021-01-17T13:04:41.867-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:41.867-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:41.868-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:41.868-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"008a354f-f452-426a-9117-1ee608730273"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:41.926-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:41.926-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpwhzr3cn6/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:41.928-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:41.928-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:41.928-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"442dd7d3-f7f3-4f43-819e-96283076a74d"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:41.928-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":8692,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:42.014-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:58462","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.015-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:58464","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.015-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:58466","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.020-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.020-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.020-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:58468","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.022-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:58470","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.022-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:58472","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.026-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ccb8836c-d839-412f-8d3c-848397aef87e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.094-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.095-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4f673e8f-acb7-4f59-b3fe-988ec5c01ad5"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"ccb8836c-d839-412f-8d3c-848397aef87e"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:42.120-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.120-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4f673e8f-acb7-4f59-b3fe-988ec5c01ad5"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:42.120-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4f673e8f-acb7-4f59-b3fe-988ec5c01ad5"}}}}
{"t":{"$date":"2021-01-17T13:04:42.122-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"be4afbd1-f41e-48c6-af46-809f7511be08"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.192-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.194-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bae2a34e-b948-4b1c-b2d4-9e36f26dbf47"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.286-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.286-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.287-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"756497c3-8a29-47f2-9c3c-515e31af08f5"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.404-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.404-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.404-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"429d0cfb-5131-4fe5-86f7-156a17579180"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":117}}
{"t":{"$date":"2021-01-17T13:04:42.406-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4a4f193b-2ff3-4eba-9597-c1814c5c7933"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"756497c3-8a29-47f2-9c3c-515e31af08f5"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:42.438-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.438-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4a4f193b-2ff3-4eba-9597-c1814c5c7933"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:42.438-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4a4f193b-2ff3-4eba-9597-c1814c5c7933"}}}}
{"t":{"$date":"2021-01-17T13:04:42.439-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"486ce2d5-5077-4586-b0ee-527df9f9d092"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.516-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:04:42.532-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.532-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.534-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"186ca622-6043-4821-be4d-fc6ba5422dbb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:42.628-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.628-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.629-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"91857ea0-727b-4f86-8793-f677f4bd47d0"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"186ca622-6043-4821-be4d-fc6ba5422dbb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:42.662-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.662-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"91857ea0-727b-4f86-8793-f677f4bd47d0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:42.662-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"91857ea0-727b-4f86-8793-f677f4bd47d0"}}}}
{"t":{"$date":"2021-01-17T13:04:42.664-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"97fd0433-5655-40e7-995d-574bf9ac5aab"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"186ca622-6043-4821-be4d-fc6ba5422dbb"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:42.692-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.692-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"97fd0433-5655-40e7-995d-574bf9ac5aab"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:42.692-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"97fd0433-5655-40e7-995d-574bf9ac5aab"}}}}
{"t":{"$date":"2021-01-17T13:04:42.694-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"67ee90fe-6cfc-422f-a31d-690c9d7d069a"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"186ca622-6043-4821-be4d-fc6ba5422dbb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:42.731-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:42.731-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"67ee90fe-6cfc-422f-a31d-690c9d7d069a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:42.731-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"67ee90fe-6cfc-422f-a31d-690c9d7d069a"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:40,790 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:40,790 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:40,790 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpwhzr3cn6
2021-01-17 13:04:40,791 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:40,791 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:40,791 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:40,791 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:40,801 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=8692 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwhzr3cn6
2021-01-17 13:04:40,802 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:40,802 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:40,802 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:8692
2021-01-17 13:04:41,406 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:41,407 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:8692
2021-01-17 13:04:42,010 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:42,010 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:8692
2021-01-17 13:04:42,019 DEBUG pytest_server_fixtures.base2 waited 0:00:01.216330 for server to start successfully
2021-01-17 13:04:42,019 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:42,020 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:42,752 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:42,757 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpwhzr3cn6
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=8692 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwhzr3cn6
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:8692
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:8692
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:8692
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.216330 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:8692', '-f')
{"t":{"$date":"2021-01-17T13:04:42.871-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:58474","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.875-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:58476","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:42.876-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:58478","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:42,819 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:04:42,820 DEBUG pytest_server_fixtures.base2 Server is already killed, skipping
2021-01-17 13:04:42,830 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:42,845 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:42,864 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:8692
2021-01-17 13:04:42,864 INFO arctic.arctic Connecting to mongo: 127.250.227.95:8692 (127.250.227.95:8692)
2021-01-17 13:04:42,880 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:8692', or admin credentials
2021-01-17 13:04:42,923 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:42,924 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:42,927 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:42,938 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:42,941 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:42,947 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:42,987 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:42,987 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:42,990 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:42,991 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:42,991 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:42,991 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:42,992 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:42,992 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:42,992 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
DEBUG    pytest_server_fixtures.base2:base2.py:82 Server is already killed, skipping
DEBUG    pytest_server_fixtures.base2:base2.py:82 Server is already killed, skipping
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:8692
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:8692 (127.250.227.95:8692)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:8692', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:43,078 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 13953 (total_procs_to_kill=1)
2021-01-17 13:04:43,079 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:43,080 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:43,095 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:43,095 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:43,096 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:43,096 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpwhzr3cn6
2021-01-17 13:04:43,096 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:43,097 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 13953 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpwhzr3cn6
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED] ______

mongo_host = '127.250.227.95:11430'
library = <VersionStore at 0x7fef8963c4a8>
    <ArcticLibrary at 0x7fef8963c710, arctic_user.library>
        <Arctic at 0x7fef8af9d550, connected to MongoClient(host=['127.250.227.95:11430'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.DISABLED: 1>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346dd0000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:43.203-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:43.207-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:43.207-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:43.208-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":14040,"port":11430,"dbPath":"/tmp/tmp39tpyyrj","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:43.208-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:43.208-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:43.208-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":11430,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp39tpyyrj","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:43.210-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:43.210-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:44.828-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913884:828771][14040:0x7f170364da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:44.828-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913884:828833][14040:0x7f170364da80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:44.874-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1664}}
{"t":{"$date":"2021-01-17T13:04:44.874-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:44.934-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:44.934-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:44.953-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:44.954-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"e6527e26-d661-4591-9357-a348e489f8ca"}},"options":{"uuid":{"$uuid":"e6527e26-d661-4591-9357-a348e489f8ca"}}}}
{"t":{"$date":"2021-01-17T13:04:45.020-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.021-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:45.021-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:45.021-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2b976c40-b8d9-44b2-a8e3-ceb280c59936"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:45.081-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.081-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp39tpyyrj/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:45.083-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:45.083-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:45.083-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"df5c0659-f577-4192-98b6-54cc2f4a9f29"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:45.083-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":11430,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:45.176-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.176-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.464-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:49006","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.465-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:49008","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.668-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:49010","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:49012","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.670-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:49014","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.676-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:49016","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.677-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:49018","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.677-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:49020","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:45.680-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a9baaf8a-c188-49fa-bb11-a1c31b1aa781"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:45.747-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.748-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ebcfeea4-4f8f-4362-8506-f131575e06c5"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"a9baaf8a-c188-49fa-bb11-a1c31b1aa781"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:45.772-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.772-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ebcfeea4-4f8f-4362-8506-f131575e06c5"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:45.772-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ebcfeea4-4f8f-4362-8506-f131575e06c5"}}}}
{"t":{"$date":"2021-01-17T13:04:45.774-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c1663f4f-8039-40a3-bacd-e6716960b561"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:45.841-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.842-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6e9c8a0a-543e-4321-934f-ccba72f6b2aa"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:45.952-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.952-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:45.952-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"13b89638-f350-4bed-8da0-dc06436eb5cb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":109}}
{"t":{"$date":"2021-01-17T13:04:45.953-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2f98567c-eb15-414e-a84f-066ddf107ac9"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:45.965-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:04:46.055-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.055-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.055-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"13b89638-f350-4bed-8da0-dc06436eb5cb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":102}}
{"t":{"$date":"2021-01-17T13:04:46.056-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f6d2b06b-4135-4e3f-a7d4-7e830d49b3c9"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"2f98567c-eb15-414e-a84f-066ddf107ac9"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:46.087-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.087-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f6d2b06b-4135-4e3f-a7d4-7e830d49b3c9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:46.087-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f6d2b06b-4135-4e3f-a7d4-7e830d49b3c9"}}}}
{"t":{"$date":"2021-01-17T13:04:46.088-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8867da80-df25-461b-8411-24871c3298e3"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:46.170-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:04:46.182-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.182-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.182-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a4a26913-26bc-4c61-8471-3b28e4cf9478"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:46.276-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.276-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.277-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"faca35bb-e1f5-4028-b2ce-e22a155139a0"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a4a26913-26bc-4c61-8471-3b28e4cf9478"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:46.308-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.308-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"faca35bb-e1f5-4028-b2ce-e22a155139a0"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:46.308-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"faca35bb-e1f5-4028-b2ce-e22a155139a0"}}}}
{"t":{"$date":"2021-01-17T13:04:46.309-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"17a1af24-a377-40c6-b6ad-842f36fc834f"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a4a26913-26bc-4c61-8471-3b28e4cf9478"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:46.338-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.338-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"17a1af24-a377-40c6-b6ad-842f36fc834f"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:46.338-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"17a1af24-a377-40c6-b6ad-842f36fc834f"}}}}
{"t":{"$date":"2021-01-17T13:04:46.339-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"679d507e-a976-48b2-b791-58feec59ac77"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"a4a26913-26bc-4c61-8471-3b28e4cf9478"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:46.373-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:46.373-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"679d507e-a976-48b2-b791-58feec59ac77"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:46.373-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"679d507e-a976-48b2-b791-58feec59ac77"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:43,106 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:43,106 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:43,107 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp39tpyyrj
2021-01-17 13:04:43,107 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:43,107 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:43,108 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:43,109 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:43,130 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=11430 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp39tpyyrj
2021-01-17 13:04:43,131 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:43,133 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:43,133 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11430
2021-01-17 13:04:43,745 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:43,746 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11430
2021-01-17 13:04:44,354 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:44,355 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11430
2021-01-17 13:04:44,960 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-17 13:04:44,960 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11430
2021-01-17 13:04:45,663 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-17 13:04:45,664 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11430
2021-01-17 13:04:45,675 DEBUG pytest_server_fixtures.base2 waited 0:00:02.541969 for server to start successfully
2021-01-17 13:04:45,675 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:45,675 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:46,379 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:46,380 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp39tpyyrj
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=11430 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp39tpyyrj
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11430
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11430
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11430
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11430
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11430
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:02.541969 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:11430', '-f')
{"t":{"$date":"2021-01-17T13:04:46.411-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:49022","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:46.413-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:49024","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:46.413-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:49026","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:46,397 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:46,403 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:46,409 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:11430
2021-01-17 13:04:46,409 INFO arctic.arctic Connecting to mongo: 127.250.227.95:11430 (127.250.227.95:11430)
2021-01-17 13:04:46,414 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:11430', or admin credentials
2021-01-17 13:04:46,427 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:46,428 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:46,429 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:46,433 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:46,434 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:46,436 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:46,448 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:46,448 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:46,449 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:11430
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:11430 (127.250.227.95:11430)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:11430', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:46,496 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 14040 (total_procs_to_kill=1)
2021-01-17 13:04:46,496 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:46,496 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:46,503 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:46,504 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:46,504 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:46,504 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp39tpyyrj
2021-01-17 13:04:46,504 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:46,504 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 14040 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp39tpyyrj
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______ test_cleanup_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID] ______

mongo_host = '127.250.227.95:17215'
library = <VersionStore at 0x7fef8afa85f8>
    <ArcticLibrary at 0x7fef8afa8940, arctic_user.library>
        <Arctic at 0x7fefd23a88d0, connected to MongoClient(host=['127.250.227.95:17215'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.HYBRID: 2>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346df0000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:46.558-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:46.560-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:46.560-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:46.561-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":14101,"port":17215,"dbPath":"/tmp/tmpkh3szpg6","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:46.561-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:46.561-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:46.561-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":17215,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpkh3szpg6","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:46.562-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:46.562-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:47.276-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913887:276973][14101:0x7facd21f3a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:47.277-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913887:277026][14101:0x7facd21f3a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:47.322-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":760}}
{"t":{"$date":"2021-01-17T13:04:47.322-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.380-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:47.380-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:47.399-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:47.399-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"4aae08d4-8849-49fe-9730-0d241610c4ab"}},"options":{"uuid":{"$uuid":"4aae08d4-8849-49fe-9730-0d241610c4ab"}}}}
{"t":{"$date":"2021-01-17T13:04:47.465-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.465-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:47.465-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:47.466-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"971f9165-852f-4d89-ab27-adce5764400f"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:47.525-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.525-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpkh3szpg6/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:47.527-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:47.527-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:47.527-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":17215,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:47.527-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"44c515c4-67df-4de1-829e-8f9c0afda65e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:47.620-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.620-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.629-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:36970","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.630-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:36972","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.733-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:36974","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.735-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:36976","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.735-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:36978","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.740-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:36980","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.742-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:36984","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.742-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:36982","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:47.745-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ec5cfbbd-5d08-44e8-a57a-1295aefd7b87"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:47.811-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.811-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"5128521d-5caa-41f8-8c9a-fdfd935780be"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"ec5cfbbd-5d08-44e8-a57a-1295aefd7b87"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:47.837-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.837-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"5128521d-5caa-41f8-8c9a-fdfd935780be"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:47.837-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"5128521d-5caa-41f8-8c9a-fdfd935780be"}}}}
{"t":{"$date":"2021-01-17T13:04:47.840-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6421f4bc-1c39-418d-8e9c-80a49f382745"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:47.906-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:47.907-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0e27d368-ba26-49a0-b431-8276d79b32f8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:48.027-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.027-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.027-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"386f676c-e164-464f-a025-549722c41d30"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":120}}
{"t":{"$date":"2021-01-17T13:04:48.028-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"1cf14f5f-6121-4bbd-b27d-aaaa8d433227"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:48.122-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.122-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.123-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a8852b44-d5b1-4f0e-944c-299480476863"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"1cf14f5f-6121-4bbd-b27d-aaaa8d433227"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:48.131-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:04:48.149-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.149-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a8852b44-d5b1-4f0e-944c-299480476863"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:48.149-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a8852b44-d5b1-4f0e-944c-299480476863"}}}}
{"t":{"$date":"2021-01-17T13:04:48.150-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c42f623d-48d5-4879-b4a1-996cea2dd7bb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:48.235-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:04:48.246-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.246-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.246-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"884baf0c-b251-4237-af2d-900effda17eb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:48.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.340-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b44ce369-b574-454e-a40d-afc56dad3d96"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"884baf0c-b251-4237-af2d-900effda17eb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:48.370-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.371-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b44ce369-b574-454e-a40d-afc56dad3d96"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:48.371-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b44ce369-b574-454e-a40d-afc56dad3d96"}}}}
{"t":{"$date":"2021-01-17T13:04:48.371-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"96889b46-e033-4e92-b2a2-51a7a5cf24da"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"884baf0c-b251-4237-af2d-900effda17eb"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:48.400-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.400-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"96889b46-e033-4e92-b2a2-51a7a5cf24da"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:48.400-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"96889b46-e033-4e92-b2a2-51a7a5cf24da"}}}}
{"t":{"$date":"2021-01-17T13:04:48.401-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ee23351a-9dd7-45a7-acfe-20ddfdc5d6cb"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"884baf0c-b251-4237-af2d-900effda17eb"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:48.435-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:48.435-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ee23351a-9dd7-45a7-acfe-20ddfdc5d6cb"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:48.435-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ee23351a-9dd7-45a7-acfe-20ddfdc5d6cb"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:46,507 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:46,507 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:46,508 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpkh3szpg6
2021-01-17 13:04:46,508 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:46,508 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:46,508 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:46,509 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:46,519 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=17215 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpkh3szpg6
2021-01-17 13:04:46,520 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:46,520 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:46,520 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:17215
2021-01-17 13:04:47,125 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:47,125 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:17215
2021-01-17 13:04:47,728 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:47,729 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:17215
2021-01-17 13:04:47,740 DEBUG pytest_server_fixtures.base2 waited 0:00:01.219634 for server to start successfully
2021-01-17 13:04:47,740 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:47,741 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:48,441 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:48,443 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpkh3szpg6
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=17215 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpkh3szpg6
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:17215
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:17215
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:17215
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.219634 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:17215', '-f')
{"t":{"$date":"2021-01-17T13:04:48.479-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:36986","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:48.480-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:36988","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:48.481-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:36990","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:48,461 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:48,468 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:48,476 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:17215
2021-01-17 13:04:48,476 INFO arctic.arctic Connecting to mongo: 127.250.227.95:17215 (127.250.227.95:17215)
2021-01-17 13:04:48,482 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:17215', or admin credentials
2021-01-17 13:04:48,496 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:48,496 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:48,497 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:48,501 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:48,503 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:04:48,504 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:48,507 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:48,522 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:48,522 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:48,523 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:48,524 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:17215
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:17215 (127.250.227.95:17215)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:17215', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:48,574 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 14101 (total_procs_to_kill=1)
2021-01-17 13:04:48,574 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:48,575 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:48,582 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:48,582 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:48,582 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:48,582 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpkh3szpg6
2021-01-17 13:04:48,582 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:48,582 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 14101 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpkh3szpg6
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____ test_cleanup_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED] ______

mongo_host = '127.250.227.95:13995'
library = <VersionStore at 0x7fef885f9550>
    <ArcticLibrary at 0x7feffbc24d30, arctic_user.library>
        <Arctic at 0x7fefd23edb00, connected to MongoClient(host=['127.250.227.95:13995'], document_class=dict, tz_aware=False, connect=True)>
data =                          near
times                        
2012-09-08 17:06:11.040   1.0
2012-10-08 17:06:11.040   2.0
2012-10-09 17:06:11.040   2.5
2012-11-08 17:06:11.040   3.0
dry_run = False, fw_pointers_config = <FwPointersCfg.ENABLED: 0>

    @pytest.mark.parametrize(
        ['dry_run', 'data', 'fw_pointers_config'],
        [(x, y, z) for (x, y, z) in itertools.product(
            [True, False], [some_object, ts], [FwPointersCfg.DISABLED, FwPointersCfg.HYBRID, FwPointersCfg.ENABLED])])
    def test_cleanup_orphaned_snapshots(mongo_host, library, data, dry_run, fw_pointers_config):
        """
        Check that we do / don't cleanup chunks based on the dry-run
        """
        with FwPointersCtx(fw_pointers_config):
            yesterday = dt.utcnow() - dtd(days=1, seconds=1)
            _id = bson.ObjectId.from_datetime(yesterday)
            library.write('symbol', data, prune_previous_version=False)
            with patch("bson.ObjectId", return_value=_id):
                library.snapshot('snap_name')
    
            # Remove the version document ; should cleanup
            assert library._collection.snapshots.delete_one({})
    
            # No cleanup on dry-run
            if dry_run:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host)
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                assert repr(library.read('symbol').data) == repr(data)
                # Nothing done_APPEND_COUNT
                assert len(library._collection.versions.find_one({})['parent'])
            else:
                run_as_main(main, '--library', 'user.library', '--host', mongo_host, '-f')
                assert mongo_count(library._collection) > 0
                assert mongo_count(library._collection.versions)
                # Data still available (write with prune_previous_version will do the cleanup)
                assert repr(library.read('symbol').data) == repr(data)
                # Snapshot cleaned up
>               assert not len(library._collection.versions.find_one({})['parent'])
E               AssertionError: assert not 1
E                +  where 1 = len([ObjectId('600346e10000000000000000')])

tests/integration/scripts/test_arctic_fsck.py:170: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:04:48.635-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":14158,"port":13995,"dbPath":"/tmp/tmpwsqcmjm3","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:04:48.641-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":13995,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpwsqcmjm3","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:04:48.643-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:48.643-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:04:49.356-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913889:356795][14158:0x7f1356aeea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:49.356-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913889:356848][14158:0x7f1356aeea80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:04:49.402-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-17T13:04:49.402-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.459-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:04:49.459-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:04:49.480-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:04:49.480-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"814e138b-408b-47e5-9697-64805262c45a"}},"options":{"uuid":{"$uuid":"814e138b-408b-47e5-9697-64805262c45a"}}}}
{"t":{"$date":"2021-01-17T13:04:49.545-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.546-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:04:49.546-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:04:49.546-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"53ca42ee-64ec-4f96-8a1b-1af0095d4c63"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:04:49.606-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.606-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpwsqcmjm3/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:04:49.607-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:04:49.608-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ef211317-6dd1-4219-9cbe-a353f0bfb435"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:49.608-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:04:49.608-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":13995,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:04:49.701-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.701-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.708-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:33846","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.709-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:33848","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.810-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:33850","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.812-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:33852","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.813-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:33854","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.816-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:33856","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.820-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:33858","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.820-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:33860","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:49.825-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3a1741f4-c18d-4beb-b01d-8801d3beadc1"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:49.890-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.891-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"2fbd606b-d611-46cf-8878-c5b3ea5b72a8"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"3a1741f4-c18d-4beb-b01d-8801d3beadc1"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:04:49.919-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.919-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"2fbd606b-d611-46cf-8878-c5b3ea5b72a8"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:49.919-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"2fbd606b-d611-46cf-8878-c5b3ea5b72a8"}}}}
{"t":{"$date":"2021-01-17T13:04:49.921-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4b9138a9-be8d-4702-a919-98b672e8544e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:49.983-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:49.985-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"083ead4d-ee64-424a-823d-36459a038b98"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:50.118-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.118-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.118-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.snapshots","command":{"createIndexes":"library.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"9a75877a-4b10-49d5-bd23-0f26566b27eb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":133}}
{"t":{"$date":"2021-01-17T13:04:50.119-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"668bffa8-8ee0-4bb1-86b1-31379579c785"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:50.209-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:04:50.241-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.241-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.241-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.versions","command":{"createIndexes":"library.versions","indexes":[{"background":true,"name":"symbol_1__id_-1","key":{"symbol":1,"_id":-1}}],"lsid":{"id":{"$uuid":"9a75877a-4b10-49d5-bd23-0f26566b27eb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":122}}
{"t":{"$date":"2021-01-17T13:04:50.242-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"651341f2-1499-4c8d-a605-a692d7b3e20c"}},"namespace":"arctic_user.library.versions","collectionUUID":{"uuid":{"$uuid":"668bffa8-8ee0-4bb1-86b1-31379579c785"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:04:50.281-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.282-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"651341f2-1499-4c8d-a605-a692d7b3e20c"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:50.282-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"651341f2-1499-4c8d-a605-a692d7b3e20c"}}}}
{"t":{"$date":"2021-01-17T13:04:50.282-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6361170d-f560-41a8-8336-07ac297eaf61"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:50.314-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-17T13:04:50.396-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.396-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.396-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library.version_nums","command":{"createIndexes":"library.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"9a75877a-4b10-49d5-bd23-0f26566b27eb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":113}}
{"t":{"$date":"2021-01-17T13:04:50.397-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_user.library","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"216711df-c1c6-48e8-82b9-0d73a5924ac2"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:04:50.514-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.514-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.515-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_user.library","command":{"createIndexes":"library","indexes":[{"background":true,"name":"symbol_hashed","key":{"symbol":"hashed"}}],"lsid":{"id":{"$uuid":"9a75877a-4b10-49d5-bd23-0f26566b27eb"}},"$db":"arctic_user","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":117}}
{"t":{"$date":"2021-01-17T13:04:50.515-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"97b402e3-e036-4a3e-bb5e-8ee52ae6da05"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"216711df-c1c6-48e8-82b9-0d73a5924ac2"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:04:50.554-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.554-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"97b402e3-e036-4a3e-bb5e-8ee52ae6da05"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:50.554-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"97b402e3-e036-4a3e-bb5e-8ee52ae6da05"}}}}
{"t":{"$date":"2021-01-17T13:04:50.555-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"c845d934-3235-48fb-88bb-b5328d021c7b"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"216711df-c1c6-48e8-82b9-0d73a5924ac2"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:50.591-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.592-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"c845d934-3235-48fb-88bb-b5328d021c7b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:50.592-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"c845d934-3235-48fb-88bb-b5328d021c7b"}}}}
{"t":{"$date":"2021-01-17T13:04:50.592-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"642a4e15-a066-4865-88a9-e6eb4d037dcd"}},"namespace":"arctic_user.library","collectionUUID":{"uuid":{"$uuid":"216711df-c1c6-48e8-82b9-0d73a5924ac2"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:04:50.635-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_user.library","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:04:50.635-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"642a4e15-a066-4865-88a9-e6eb4d037dcd"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:04:50.635-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"642a4e15-a066-4865-88a9-e6eb4d037dcd"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:04:48,585 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:48,586 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:48,586 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpwsqcmjm3
2021-01-17 13:04:48,586 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:04:48,586 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:48,586 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:48,587 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:04:48,597 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=13995 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwsqcmjm3
2021-01-17 13:04:48,598 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:04:48,598 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:04:48,599 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:13995
2021-01-17 13:04:49,204 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:04:49,204 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:13995
2021-01-17 13:04:49,807 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:04:49,807 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:13995
2021-01-17 13:04:49,817 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218287 for server to start successfully
2021-01-17 13:04:49,817 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:04:49,818 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:04:50,640 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:04:50,642 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpwsqcmjm3
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=13995 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwsqcmjm3
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:13995
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:13995
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:13995
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218287 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stdout call -----------------------------
run_as_main: ('--library', 'user.library', '--host', '127.250.227.95:13995', '-f')
{"t":{"$date":"2021-01-17T13:04:50.678-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn9","msg":"client metadata","attr":{"remote":"127.0.0.1:33866","client":"conn9","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:50.679-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn10","msg":"client metadata","attr":{"remote":"127.0.0.1:33868","client":"conn10","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:04:50.679-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn11","msg":"client metadata","attr":{"remote":"127.0.0.1:33870","client":"conn11","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:04:50,660 INFO arctic.arctic Mongo Quota: arctic_user.library 0.000 / 10 GB used
2021-01-17 13:04:50,668 DEBUG arctic.store.version_store Finished writing versions for symbol
2021-01-17 13:04:50,675 INFO arctic.scripts.arctic_fsck FSCK'ing: ['user.library'] on mongo 127.250.227.95:13995
2021-01-17 13:04:50,675 INFO arctic.arctic Connecting to mongo: 127.250.227.95:13995 (127.250.227.95:13995)
2021-01-17 13:04:50,681 ERROR arctic.scripts.utils You need credentials for db 'arctic_user' on '127.250.227.95:13995', or admin credentials
2021-01-17 13:04:50,694 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:50,695 INFO arctic.store.version_store ORPHANED CHUNK CHECK: arctic_user.library
2021-01-17 13:04:50,696 DEBUG arctic.store.version_store Checking symbol
2021-01-17 13:04:50,699 DEBUG arctic.store.version_store Checking symbol (forward pointers)
2021-01-17 13:04:50,701 INFO arctic.store.version_store Cleaning up 1 SHAs for symbol symbol
2021-01-17 13:04:50,702 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_user.library
2021-01-17 13:04:50,704 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:50,718 INFO arctic.scripts.arctic_fsck Stats:
2021-01-17 13:04:50,718 INFO arctic.scripts.arctic_fsck Sharded:        False
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Symbols:           1
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Versions:          1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Versions:       0.00MB Change(+/-) 0.00MB
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Chunks:         0.00MB Change(+/-)   0.00MB
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck ----------------------------
2021-01-17 13:04:50,719 INFO arctic.scripts.arctic_fsck Done.
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_user.library 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for symbol
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:32 FSCK'ing: ['user.library'] on mongo 127.250.227.95:13995
INFO     arctic.arctic:arctic.py:144 Connecting to mongo: 127.250.227.95:13995 (127.250.227.95:13995)
ERROR    arctic.scripts.utils:utils.py:28 You need credentials for db 'arctic_user' on '127.250.227.95:13995', or admin credentials
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:43 ----------------------------
INFO     arctic.store.version_store:version_store.py:1127 ORPHANED CHUNK CHECK: arctic_user.library
DEBUG    arctic.store.version_store:version_store.py:1129 Checking symbol
DEBUG    arctic.store.version_store:version_store.py:1096 Checking symbol (forward pointers)
INFO     arctic.store.version_store:version_store.py:1106 Cleaning up 1 SHAs for symbol symbol
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_user.library
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:46 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:49 Stats:
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:50 Sharded:        False
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:51 Symbols:           1
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:55 Versions:          1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:58 Versions:       0.00MB Change(+/-) 0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:62 Chunk Count:       1   Change(+/-)      0  (av: 0.00MB)
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:65 Chunks:         0.00MB Change(+/-)   0.00MB
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:66 ----------------------------
INFO     arctic.scripts.arctic_fsck:arctic_fsck.py:71 Done.
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:04:50,767 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 14158 (total_procs_to_kill=1)
2021-01-17 13:04:50,768 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:04:50,768 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:04:50,775 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:04:50,775 DEBUG pytest_shutil.workspace 
2021-01-17 13:04:50,776 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:50,776 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpwsqcmjm3
2021-01-17 13:04:50,776 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:04:50,776 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 14158 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpwsqcmjm3
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____________________ test_fix_broken_snapshot_references ______________________

library = <VersionStore at 0x7fefb5173390>
    <ArcticLibrary at 0x7fef8afa3518, arctic_test.TEST>
        <Arctic at 0x7fefd22a32e8, connected to MongoClient(host=['127.250.227.95:14176'], document_class=dict, tz_aware=False, connect=True)>

    def test_fix_broken_snapshot_references(library):
        library.write("cherry", "blob")
        one_day_ago = time.time() - (3600 * 24.) - 10  # make sure we are a few seconds before 24 hours
        with patch('time.time', return_value=one_day_ago):
            library.snapshot("snappy")
        library._snapshots.delete_one({"name": "snappy"})
    
        mpv.prune_versions(library, ["cherry"], 10)
    
>       assert library._versions.find_one({"symbol": "cherry"}).get("parent", []) == []
E       AssertionError: assert [ObjectId('60...819e414fe43')] == []
E         Left contains one more item: ObjectId('6003474412a2b819e414fe43')
E         Full diff:
E         - []
E         + [ObjectId('6003474412a2b819e414fe43')]

tests/integration/scripts/test_prune_versions.py:63: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:06:36.354-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:06:36.356-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:06:36.356-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:06:36.357-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":16898,"port":14176,"dbPath":"/tmp/tmp4ic_j_av","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:06:36.357-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:06:36.357-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:06:36.357-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":14176,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp4ic_j_av","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:06:36.358-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:06:36.358-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:06:37.100-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913997:100575][16898:0x7f5a3f20ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:06:37.100-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913997:100638][16898:0x7f5a3f20ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:06:37.161-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":803}}
{"t":{"$date":"2021-01-17T13:06:37.161-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.240-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:06:37.241-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:06:37.266-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:06:37.266-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"a46e70f7-ac51-4939-a640-2fe560539678"}},"options":{"uuid":{"$uuid":"a46e70f7-ac51-4939-a640-2fe560539678"}}}}
{"t":{"$date":"2021-01-17T13:06:37.354-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.354-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:06:37.354-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:06:37.355-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"dd81d8fc-e50d-4a5b-a020-7fa7dd50bd65"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:06:37.461-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.461-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp4ic_j_av/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:06:37.463-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:06:37.463-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:06:37.463-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":14176,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:06:37.463-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"25e5f35d-c5ed-4bc2-b268-f9dd6868ae82"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:37.524-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:35384","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.526-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:35386","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.526-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:35388","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.530-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:35390","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.533-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:35392","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.533-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:35394","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:37.537-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ab6dbe0c-2b41-45fc-a7d2-ebbe6cc4b069"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:37.789-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.789-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"meta_db.cache","command":{"create":"cache","lsid":{"id":{"$uuid":"4b0ea4ee-6818-4aa3-9db7-a5c59bab0b8a"}},"$db":"meta_db","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":38,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":3}},"ReplicationStateTransition":{"acquireCount":{"w":3}},"Global":{"acquireCount":{"r":2,"w":1}},"Database":{"acquireCount":{"r":2,"w":1}},"Collection":{"acquireCount":{"r":2,"w":1}},"Mutex":{"acquireCount":{"r":4}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":252}}
{"t":{"$date":"2021-01-17T13:06:37.790-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"754d8aa2-3857-4ad9-96f5-489db32de4ec"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"ab6dbe0c-2b41-45fc-a7d2-ebbe6cc4b069"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:06:37.863-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.863-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.863-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":400}}
{"t":{"$date":"2021-01-17T13:06:37.933-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:37.933-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"754d8aa2-3857-4ad9-96f5-489db32de4ec"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:37.933-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"754d8aa2-3857-4ad9-96f5-489db32de4ec"}}}}
{"t":{"$date":"2021-01-17T13:06:37.933-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"meta_db.cache","command":{"createIndexes":"cache","indexes":[{"expireAfterSeconds":3600,"name":"date_1","key":{"date":1}}],"lsid":{"id":{"$uuid":"4b0ea4ee-6818-4aa3-9db7-a5c59bab0b8a"}},"$db":"meta_db","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":3}},"ReplicationStateTransition":{"acquireCount":{"w":4}},"Global":{"acquireCount":{"w":4}},"Database":{"acquireCount":{"w":3}},"Collection":{"acquireCount":{"r":1,"w":1,"W":1}},"Mutex":{"acquireCount":{"r":3}}},"flowControl":{"acquireCount":3,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":143}}
{"t":{"$date":"2021-01-17T13:06:37.935-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6e0d456d-1362-4247-ae3a-91cb79d5a122"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:38.002-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.003-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"37e039c7-ed8a-4e9f-92cd-a3f88357927a"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:38.026-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:06:38.094-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.094-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.095-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bfebdcbb-0d0e-4f3f-9449-c968de571720"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:38.189-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.189-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.190-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4822de52-aeff-4539-a654-b715ad9569b1"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"bfebdcbb-0d0e-4f3f-9449-c968de571720"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:06:38.221-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.221-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4822de52-aeff-4539-a654-b715ad9569b1"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:38.221-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4822de52-aeff-4539-a654-b715ad9569b1"}}}}
{"t":{"$date":"2021-01-17T13:06:38.222-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4f6e8299-64b5-4580-89e1-b7f680c9b0c2"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:38.329-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.329-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.329-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn6","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.version_nums","command":{"createIndexes":"TEST.version_nums","indexes":[{"unique":true,"background":true,"name":"symbol_1","key":{"symbol":1}}],"lsid":{"id":{"$uuid":"4b0ea4ee-6818-4aa3-9db7-a5c59bab0b8a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":107}}
{"t":{"$date":"2021-01-17T13:06:38.330-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn6","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6f81dd70-5b90-4768-8691-16d23f14fbe7"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:38.423-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.423-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.424-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"0437f5be-fabc-4003-a6df-37458bf12b8b"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"6f81dd70-5b90-4768-8691-16d23f14fbe7"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:06:38.456-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.456-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"0437f5be-fabc-4003-a6df-37458bf12b8b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:38.456-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"0437f5be-fabc-4003-a6df-37458bf12b8b"}}}}
{"t":{"$date":"2021-01-17T13:06:38.457-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"45c6b12d-e7c0-4f98-8291-fd789016d144"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"6f81dd70-5b90-4768-8691-16d23f14fbe7"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:06:38.485-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.485-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"45c6b12d-e7c0-4f98-8291-fd789016d144"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:38.485-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"45c6b12d-e7c0-4f98-8291-fd789016d144"}}}}
{"t":{"$date":"2021-01-17T13:06:38.486-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn6","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6b9dcf8a-f235-4bc1-8009-1302c9a4cb8b"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"6f81dd70-5b90-4768-8691-16d23f14fbe7"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:06:38.519-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn6","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:38.519-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn6","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6b9dcf8a-f235-4bc1-8009-1302c9a4cb8b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:38.519-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn6","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6b9dcf8a-f235-4bc1-8009-1302c9a4cb8b"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:06:36,299 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:36,300 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:36,300 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp4ic_j_av
2021-01-17 13:06:36,300 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:06:36,300 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:36,300 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:36,301 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:06:36,311 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=14176 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4ic_j_av
2021-01-17 13:06:36,312 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:06:36,312 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:06:36,313 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:14176
2021-01-17 13:06:36,917 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:06:36,918 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:14176
2021-01-17 13:06:37,521 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:06:37,521 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:14176
2021-01-17 13:06:37,530 DEBUG pytest_server_fixtures.base2 waited 0:00:01.217443 for server to start successfully
2021-01-17 13:06:37,530 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:06:37,531 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:06:38,525 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:06:38,526 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp4ic_j_av
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=14176 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4ic_j_av
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:14176
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:14176
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:14176
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.217443 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:06:38,544 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-17 13:06:38,547 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-17 13:06:38,552 INFO arctic.scripts.arctic_prune_versions Fixing snapshot pointers
2021-01-17 13:06:38,553 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_test.TEST
2021-01-17 13:06:38,555 INFO arctic.scripts.arctic_prune_versions Pruning cherry
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:16 Fixing snapshot pointers
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_test.TEST
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:19 Pruning cherry
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:06:38,575 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 16898 (total_procs_to_kill=1)
2021-01-17 13:06:38,575 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:06:38,576 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:06:38,583 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:06:38,583 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:38,584 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:38,584 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp4ic_j_av
2021-01-17 13:06:38,584 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:38,584 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 16898 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp4ic_j_av
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
__________________________ test_keep_only_one_version __________________________

library = <VersionStore at 0x7fefd234e518>
    <ArcticLibrary at 0x7fefd2409c50, arctic_test.TEST>
        <Arctic at 0x7feffbc7a128, connected to MongoClient(host=['127.250.227.95:5450'], document_class=dict, tz_aware=False, connect=True)>

    def test_keep_only_one_version(library):
        library.write("cherry", "blob")
        library.write("cherry", "blob")
        one_day_ago = time.time() - (3600 * 24.) - 10  # make sure we are a few seconds before 24 hours
        with patch('time.time', return_value=one_day_ago):
            library.snapshot("snappy")
        library._snapshots.delete_one({"name": "snappy"})
    
        mpv.prune_versions(library, ["cherry"], 0)
    
>       assert len(list(library._versions.find({"symbol": "cherry"}))) == 1
E       assert 2 == 1
E         +2
E         -1

tests/integration/scripts/test_prune_versions.py:76: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:06:38.642-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:06:38.643-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:06:38.643-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:06:38.644-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":16947,"port":5450,"dbPath":"/tmp/tmp35k69fg5","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:06:38.644-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:06:38.644-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:06:38.644-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":5450,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp35k69fg5","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:06:38.645-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:06:38.645-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:06:39.357-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913999:357929][16947:0x7f61edb45a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:06:39.357-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610913999:357985][16947:0x7f61edb45a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:06:39.404-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-17T13:06:39.404-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.460-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:06:39.460-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:06:39.483-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:06:39.483-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"c80b3437-fa35-45eb-a972-ebb022b16e1a"}},"options":{"uuid":{"$uuid":"c80b3437-fa35-45eb-a972-ebb022b16e1a"}}}}
{"t":{"$date":"2021-01-17T13:06:39.549-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.549-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:06:39.549-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:06:39.550-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4da35900-d7f2-4fbf-835f-d31cefa97acb"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:06:39.610-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.610-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp35k69fg5/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:06:39.612-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:06:39.612-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:06:39.612-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":5450,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:06:39.612-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"516d58f5-5490-4156-930d-de8536b30fcc"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:39.704-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.704-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.709-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:48292","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.710-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:48294","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.812-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:48296","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.814-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:48298","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.815-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:48300","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.819-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:48302","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.822-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:48304","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.822-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:48306","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:06:39.829-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"162ee944-e113-4964-8ce1-2bd0df8aacb2"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:39.894-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.895-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"93f3d415-8748-4251-b086-c4404d14a5f9"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"162ee944-e113-4964-8ce1-2bd0df8aacb2"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:06:39.924-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.924-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"93f3d415-8748-4251-b086-c4404d14a5f9"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:39.925-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"93f3d415-8748-4251-b086-c4404d14a5f9"}}}}
{"t":{"$date":"2021-01-17T13:06:39.926-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bb1f33d8-5ea8-4dfb-a686-f4cec82f58d1"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:39.992-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:39.994-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.snapshots","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"684e26e4-9c88-4913-a96a-d8d92fe3dddf"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:40.108-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.108-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.snapshots","index":"name_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.108-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.TEST.snapshots","command":{"createIndexes":"TEST.snapshots","indexes":[{"unique":true,"background":true,"name":"name_1","key":{"name":1}}],"lsid":{"id":{"$uuid":"eed3b987-4341-48a2-8715-5cb96e25edcc"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":114}}
{"t":{"$date":"2021-01-17T13:06:40.109-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.versions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4ca4dce1-ab17-4e60-bb86-e394c81a1a0f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:40.201-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.201-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1__id_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.202-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d2c750d0-3387-44b1-ba43-ebf8b845fd84"}},"namespace":"arctic_test.TEST.versions","collectionUUID":{"uuid":{"$uuid":"4ca4dce1-ab17-4e60-bb86-e394c81a1a0f"}},"indexes":1,"firstIndex":{"name":"symbol_1_version_-1"}}}
{"t":{"$date":"2021-01-17T13:06:40.210-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:06:40.234-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.versions","index":"symbol_1_version_-1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.234-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d2c750d0-3387-44b1-ba43-ebf8b845fd84"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:40.234-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d2c750d0-3387-44b1-ba43-ebf8b845fd84"}}}}
{"t":{"$date":"2021-01-17T13:06:40.235-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST.version_nums","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"fe03b3b7-8522-4a28-b2c8-e8cfc351e590"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:40.315-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:06:40.329-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.329-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST.version_nums","index":"symbol_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.330-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.TEST","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2160528c-9b4d-4472-b3f6-a798f49ee88c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:06:40.426-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.426-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_hashed","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.427-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"94dcd618-1aed-4fdb-be15-2c1aa0638d2f"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"2160528c-9b4d-4472-b3f6-a798f49ee88c"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1"}}}
{"t":{"$date":"2021-01-17T13:06:40.461-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.461-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"94dcd618-1aed-4fdb-be15-2c1aa0638d2f"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:40.461-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"94dcd618-1aed-4fdb-be15-2c1aa0638d2f"}}}}
{"t":{"$date":"2021-01-17T13:06:40.462-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"1cf5ffd0-ce40-4061-8cb3-7b60f6fdedae"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"2160528c-9b4d-4472-b3f6-a798f49ee88c"}},"indexes":1,"firstIndex":{"name":"symbol_1_parent_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:06:40.491-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_parent_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.491-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"1cf5ffd0-ce40-4061-8cb3-7b60f6fdedae"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:40.491-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"1cf5ffd0-ce40-4061-8cb3-7b60f6fdedae"}}}}
{"t":{"$date":"2021-01-17T13:06:40.492-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"160042ae-0ace-4520-85c0-692fc387e9b3"}},"namespace":"arctic_test.TEST","collectionUUID":{"uuid":{"$uuid":"2160528c-9b4d-4472-b3f6-a798f49ee88c"}},"indexes":1,"firstIndex":{"name":"symbol_1_sha_1_segment_1"}}}
{"t":{"$date":"2021-01-17T13:06:40.524-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.TEST","index":"symbol_1_sha_1_segment_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:06:40.524-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"160042ae-0ace-4520-85c0-692fc387e9b3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:06:40.524-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"160042ae-0ace-4520-85c0-692fc387e9b3"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:06:38,588 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:38,588 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:38,588 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp35k69fg5
2021-01-17 13:06:38,589 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:06:38,589 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:38,589 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:38,589 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:06:38,599 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=5450 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp35k69fg5
2021-01-17 13:06:38,600 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:06:38,600 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:06:38,601 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5450
2021-01-17 13:06:39,205 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:06:39,205 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5450
2021-01-17 13:06:39,808 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:06:39,808 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5450
2021-01-17 13:06:39,819 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218365 for server to start successfully
2021-01-17 13:06:39,819 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:06:39,820 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:06:40,531 INFO arctic.store.version_store Trying to enable sharding...
2021-01-17 13:06:40,533 WARNING arctic.store.version_store Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp35k69fg5
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=5450 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp35k69fg5
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5450
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5450
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5450
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218365 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
INFO     arctic.store.version_store:version_store.py:62 Trying to enable sharding...
WARNING  arctic.store.version_store:version_store.py:66 Library created, but couldn't enable sharding: no such command: 'enablesharding', full error: {'ok': 0.0, 'errmsg': "no such command: 'enablesharding'", 'code': 59, 'codeName': 'CommandNotFound'}. This is OK if you're not 'admin'
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:06:40,552 INFO arctic.arctic Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
2021-01-17 13:06:40,557 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-17 13:06:40,560 DEBUG arctic.store.version_store Finished writing versions for cherry
2021-01-17 13:06:40,566 INFO arctic.scripts.arctic_prune_versions Fixing snapshot pointers
2021-01-17 13:06:40,566 INFO arctic.store.version_store ORPHANED SNAPSHOT CHECK: arctic_test.TEST
2021-01-17 13:06:40,568 INFO arctic.scripts.arctic_prune_versions Pruning cherry
------------------------------ Captured log call -------------------------------
INFO     arctic.arctic:arctic.py:625 Mongo Quota: arctic_test.TEST 0.000 / 10 GB used
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
DEBUG    arctic.store.version_store:version_store.py:674 Finished writing versions for cherry
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:16 Fixing snapshot pointers
INFO     arctic.store.version_store:version_store.py:1174 ORPHANED SNAPSHOT CHECK: arctic_test.TEST
INFO     arctic.scripts.arctic_prune_versions:arctic_prune_versions.py:19 Pruning cherry
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:06:40,588 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 16947 (total_procs_to_kill=1)
2021-01-17 13:06:40,588 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:06:40,588 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:06:40,595 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:06:40,595 DEBUG pytest_shutil.workspace 
2021-01-17 13:06:40,596 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:40,596 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp35k69fg5
2021-01-17 13:06:40,596 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:06:40,596 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 16947 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp35k69fg5
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_return_data_when_date_range_falls_in_a_single_underlying_library _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7fefb17a87b8>
arctic = <Arctic at 0x7fefb19a04a8, connected to MongoClient(host=['127.250.227.95:5902'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_falls_in_a_single_underlying_library(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        tstore = arctic['FEED_2010.LEVEL1']
        arctic.initialize_library('test_current.toplevel_tickstore', tickstore.TICK_STORE_TYPE)
        tickstore_current = arctic['test_current.toplevel_tickstore']
        toplevel_tickstore._collection.insert_one({'start': dt(2010, 1, 1),
                                               'end': dt(2010, 12, 31, 23, 59, 59),
                                               'library_name': 'FEED_2010.LEVEL1'})
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tstore.write('blah', df)
        tickstore_current.write('blah', df)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2009, 1, 1), end=dt(2010, 1, 6)), list('ABCD'))    # FIXME: CM#012 - (read missing January 1st)
    
>       assert_frame_equal(df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (6, 4)
E       [right]: (5, 4)

tests/integration/tickstore/test_toplevel.py:65: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:26:50.603-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:26:50.609-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:26:50.609-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:26:50.610-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":9835,"port":5902,"dbPath":"/tmp/tmptxy9lwa1","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:26:50.610-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:26:50.610-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:26:50.610-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":5902,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmptxy9lwa1","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:26:50.611-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:50.611-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:26:51.326-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915211:326324][9835:0x7f6a58fcda80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:51.326-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915211:326378][9835:0x7f6a58fcda80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:51.370-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-17T13:26:51.370-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.430-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:26:51.430-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:26:51.450-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:51.451-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"934f17e0-71b2-4d7e-9b70-6de690991cb0"}},"options":{"uuid":{"$uuid":"934f17e0-71b2-4d7e-9b70-6de690991cb0"}}}}
{"t":{"$date":"2021-01-17T13:26:51.515-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.515-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:26:51.516-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:26:51.516-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"df2bd71f-7207-40ef-afd2-94963c35d0c2"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:26:51.577-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.577-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmptxy9lwa1/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:26:51.579-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:26:51.579-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:26:51.579-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":5902,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:26:51.579-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0abf2d49-0d01-41be-a22b-da03c5fc4a6f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:51.672-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.672-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.676-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:47632","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.677-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:47634","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.779-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:47636","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.780-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:47640","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.780-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:47638","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.783-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:47642","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.784-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:47644","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.785-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:47646","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:51.787-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b9039ce3-7434-43ed-88ab-70e34794c99f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:51.854-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.855-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ec442956-034b-45f8-86ac-2fdd98bc32b8"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"b9039ce3-7434-43ed-88ab-70e34794c99f"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:26:51.884-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.884-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ec442956-034b-45f8-86ac-2fdd98bc32b8"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:51.884-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ec442956-034b-45f8-86ac-2fdd98bc32b8"}}}}
{"t":{"$date":"2021-01-17T13:26:51.886-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d59b82a4-2181-41d3-a9a5-cf6d88c2b857"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:51.952-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:51.957-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d704c1b7-c700-45f1-9d41-8bfd6b85ca4f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.053-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.053-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:26:50,547 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:50,547 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:50,547 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmptxy9lwa1
2021-01-17 13:26:50,547 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:26:50,547 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:50,548 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:50,548 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:26:50,564 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=5902 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmptxy9lwa1
2021-01-17 13:26:50,565 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:26:50,565 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:26:50,566 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5902
2021-01-17 13:26:51,172 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:26:51,172 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5902
2021-01-17 13:26:51,776 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:26:51,776 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:5902
2021-01-17 13:26:51,783 DEBUG pytest_server_fixtures.base2 waited 0:00:01.217224 for server to start successfully
2021-01-17 13:26:51,783 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:26:51,784 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:26:51,954 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmptxy9lwa1
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=5902 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmptxy9lwa1
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5902
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5902
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:5902
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.217224 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:26:52.058-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e4b4f317-214e-49f0-b860-d597cfcb3069"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.118-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.119-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5a5e1508-ced5-4015-b4a2-3100b7ec8dfe"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.178-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:26:52.219-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.219-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.220-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d09fdb2a-63c7-462c-ad6d-244a675bd186"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"5a5e1508-ced5-4015-b4a2-3100b7ec8dfe"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:52.244-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.244-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d09fdb2a-63c7-462c-ad6d-244a675bd186"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:52.244-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d09fdb2a-63c7-462c-ad6d-244a675bd186"}}}}
{"t":{"$date":"2021-01-17T13:26:52.245-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"79f61e8b-844a-4ea2-897d-11b948771f84"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.280-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:26:52.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.343-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8d508722-7071-4d2d-9b75-b07db8246618"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.410-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.412-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4772795a-232c-46d2-8af6-0ed2555e92ba"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.496-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.496-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.497-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b8eb3f24-4293-4b38-8470-60adc54c037a"}},"namespace":"arctic_test_current.toplevel_tickstore","collectionUUID":{"uuid":{"$uuid":"4772795a-232c-46d2-8af6-0ed2555e92ba"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:52.525-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.525-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b8eb3f24-4293-4b38-8470-60adc54c037a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:52.525-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b8eb3f24-4293-4b38-8470-60adc54c037a"}}}}
{"t":{"$date":"2021-01-17T13:26:52.526-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test_current.toplevel_tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4fe3c818-23e0-43bd-9952-d8ba06582838"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:52.614-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:52.614-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test_current.toplevel_tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:26:52,621 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:52,624 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000795: approx 125786163 ticks/sec
2021-01-17 13:26:52,625 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:52,627 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000686: approx 145772594 ticks/sec
2021-01-17 13:26:52,632 INFO arctic.tickstore.tickstore Got data in 0.004373 secs, creating DataFrame...
2021-01-17 13:26:52,634 INFO arctic.tickstore.tickstore 6 rows in 0.005806 secs: 1033 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000795: approx 125786163 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000686: approx 145772594 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004373 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.005806 secs: 1033 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:26:52,665 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 9835 (total_procs_to_kill=1)
2021-01-17 13:26:52,665 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:26:52,665 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:26:52,672 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:26:52,673 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:52,673 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:52,673 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmptxy9lwa1
2021-01-17 13:26:52,673 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:52,673 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 9835 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmptxy9lwa1
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
___________ test_should_return_data_when_date_range_spans_libraries ____________

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7fefb19c2f98>
arctic = <Arctic at 0x7fefb188dcf8, connected to MongoClient(host=['127.250.227.95:3612'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_spans_libraries(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        tickstore_2010 = arctic['FEED_2010.LEVEL1']
        tickstore_2011 = arctic['FEED_2011.LEVEL1']
        toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')
        toplevel_tickstore.add(DateRange(start=dt(2011, 1, 1), end=dt(2011, 12, 31, 23, 59, 59, 999000)), 'FEED_2011.LEVEL1')
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df_10 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2010.write('blah', df_10)
        dates = pd.date_range('20110101', periods=6, tz=mktz('Europe/London'))
        df_11 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2011.write('blah', df_11)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 2), end=dt(2011, 1, 4)), list('ABCD'))
        expected_df = pd.concat([df_10[1:], df_11[:4]])
>       assert_frame_equal(expected_df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (9, 4)
E       [right]: (7, 4)

tests/integration/tickstore/test_toplevel.py:83: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:26:52.730-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:26:52.732-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:26:52.733-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:26:52.733-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":9885,"port":3612,"dbPath":"/tmp/tmph41p62wa","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:26:52.733-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:26:52.733-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:26:52.733-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":3612,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmph41p62wa","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:26:52.734-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:52.734-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:26:53.447-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915213:447679][9885:0x7fa032be2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:53.447-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915213:447733][9885:0x7fa032be2a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:53.493-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-17T13:26:53.493-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.552-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:26:53.552-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:26:53.571-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:53.571-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"204865aa-c952-493f-864e-8a856f663bfa"}},"options":{"uuid":{"$uuid":"204865aa-c952-493f-864e-8a856f663bfa"}}}}
{"t":{"$date":"2021-01-17T13:26:53.639-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.639-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:26:53.640-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:26:53.640-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"61139c25-4a2d-4162-b444-938f82572910"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:26:53.700-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.700-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmph41p62wa/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:26:53.701-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:26:53.701-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:26:53.701-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":3612,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:26:53.702-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"13686d86-4d9e-49f2-9eb8-50db14270c8e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:53.794-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.794-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.803-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:41110","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.804-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:41112","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.907-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:41114","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.909-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:41116","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.909-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:41118","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.913-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:41120","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.916-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:41124","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.917-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:41122","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:53.921-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9318373e-8cbc-45b7-95ed-33528af2bdb2"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:53.988-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:53.989-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ea9a3290-1df2-4eeb-bd07-cb37e0b1fce3"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"9318373e-8cbc-45b7-95ed-33528af2bdb2"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:26:54.013-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.013-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ea9a3290-1df2-4eeb-bd07-cb37e0b1fce3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:54.013-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ea9a3290-1df2-4eeb-bd07-cb37e0b1fce3"}}}}
{"t":{"$date":"2021-01-17T13:26:54.015-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cce7bd03-b53c-48ad-83df-bc69d3a2dace"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.082-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.087-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"e8d8a128-7045-46ea-932a-0208c19a7742"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.199-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.199-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.199-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"62561788-81cc-4558-aeda-41713bd7f59d"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":112}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:26:52,677 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:52,677 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:52,677 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmph41p62wa
2021-01-17 13:26:52,678 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:26:52,678 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:52,678 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:52,678 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:26:52,692 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=3612 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmph41p62wa
2021-01-17 13:26:52,692 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:26:52,693 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:26:52,693 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3612
2021-01-17 13:26:53,299 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:26:53,299 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3612
2021-01-17 13:26:53,902 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:26:53,902 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3612
2021-01-17 13:26:53,913 DEBUG pytest_server_fixtures.base2 waited 0:00:01.220167 for server to start successfully
2021-01-17 13:26:53,914 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:26:53,914 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:26:54,084 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmph41p62wa
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=3612 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmph41p62wa
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3612
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3612
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3612
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.220167 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:26:54.205-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"183082fa-0bd5-4f8c-be8b-419b7c6af6b8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.260-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.261-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"732333e2-3dfc-4fad-a86d-6e21b3dff8de"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.305-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:26:54.359-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.359-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.360-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ac68a600-6389-4747-af74-7d2f453709dc"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"732333e2-3dfc-4fad-a86d-6e21b3dff8de"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:54.389-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.389-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ac68a600-6389-4747-af74-7d2f453709dc"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:54.389-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ac68a600-6389-4747-af74-7d2f453709dc"}}}}
{"t":{"$date":"2021-01-17T13:26:54.390-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d09618d3-b8dd-45f9-b67a-c7833bcd869c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.409-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":16}}
{"t":{"$date":"2021-01-17T13:26:54.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.482-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.485-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4a53af62-5f31-4108-acd9-eeb6d2dd5d4a"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.550-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.551-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9053762d-cbd6-41dd-9cd1-3952cd101404"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.638-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.638-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.639-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"44363c60-1109-4a41-8908-83d77b7dfc76"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"9053762d-cbd6-41dd-9cd1-3952cd101404"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:54.664-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.664-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"44363c60-1109-4a41-8908-83d77b7dfc76"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:54.664-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"44363c60-1109-4a41-8908-83d77b7dfc76"}}}}
{"t":{"$date":"2021-01-17T13:26:54.665-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cd4bc741-8cbf-4efa-8912-5dce42beee1c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:54.751-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:54.751-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:26:54,762 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:54,764 DEBUG arctic.tickstore.tickstore 1 buckets in 0.00083: approx 120481927 ticks/sec
2021-01-17 13:26:54,767 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:54,769 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000696: approx 143678160 ticks/sec
2021-01-17 13:26:54,774 INFO arctic.tickstore.tickstore Got data in 0.003792 secs, creating DataFrame...
2021-01-17 13:26:54,775 INFO arctic.tickstore.tickstore 6 rows in 0.004939 secs: 1214 ticks/sec
2021-01-17 13:26:54,780 INFO arctic.tickstore.tickstore Got data in 0.003551 secs, creating DataFrame...
2021-01-17 13:26:54,781 INFO arctic.tickstore.tickstore 6 rows in 0.004626 secs: 1297 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.00083: approx 120481927 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000696: approx 143678160 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003792 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004939 secs: 1214 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003551 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004626 secs: 1297 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:26:54,814 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 9885 (total_procs_to_kill=1)
2021-01-17 13:26:54,814 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:26:54,814 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:26:54,822 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:26:54,822 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:54,822 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:54,822 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmph41p62wa
2021-01-17 13:26:54,822 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:54,822 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 9885 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmph41p62wa
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7fef8a552860>
arctic = <Arctic at 0x7fefb1be2198, connected to MongoClient(host=['127.250.227.95:25493'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing(toplevel_tickstore, arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        tickstore_2010 = arctic['FEED_2010.LEVEL1']
        tickstore_2011 = arctic['FEED_2011.LEVEL1']
        toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')
        toplevel_tickstore.add(DateRange(start=dt(2011, 1, 1), end=dt(2011, 12, 31, 23, 59, 59, 999000)), 'FEED_2011.LEVEL1')
        dates = pd.date_range('20100101', periods=6, tz=mktz('Europe/London'))
        df_10 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2010.write('blah', df_10)
        dates = pd.date_range('20110201', periods=6, tz=mktz('Europe/London'))
        df_11 = pd.DataFrame(np.random.randn(6, 4), index=dates, columns=list('ABCD'))
        tickstore_2011.write('blah', df_11)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 2), end=dt(2011, 1, 4)), list('ABCD'))
        expected_df = df_10[1:]
>       assert_frame_equal(expected_df, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (5, 4)
E       [right]: (4, 4)

tests/integration/tickstore/test_toplevel.py:101: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:26:54.879-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:26:54.884-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:26:54.885-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:26:54.885-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":9935,"port":25493,"dbPath":"/tmp/tmp4z_6dqgc","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:26:54.885-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:26:54.885-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:26:54.885-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":25493,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp4z_6dqgc","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:26:54.886-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:54.886-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:26:55.604-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915215:604170][9935:0x7f58b2f63a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:55.604-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915215:604224][9935:0x7f58b2f63a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:55.648-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":762}}
{"t":{"$date":"2021-01-17T13:26:55.648-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:55.708-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:26:55.708-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:26:55.728-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:55.729-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"33257b09-cc00-44a0-807e-0cf67c358757"}},"options":{"uuid":{"$uuid":"33257b09-cc00-44a0-807e-0cf67c358757"}}}}
{"t":{"$date":"2021-01-17T13:26:55.792-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:55.792-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:26:55.792-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:26:55.793-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d277f201-1ebd-4ede-8e4b-585c0692fa19"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:26:55.854-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:55.854-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp4z_6dqgc/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:26:55.855-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:26:55.855-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:26:55.855-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":25493,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:26:55.855-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b4b1cf86-880b-4a39-b808-9bd06d095048"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:55.950-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:55.950-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:55.952-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:55114","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:55.953-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:55116","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.056-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:55118","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.058-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:55122","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.058-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:55120","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.062-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:55124","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.065-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:55126","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.066-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:55128","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:26:56.071-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d83716a6-55f8-433a-a961-cae8e2279688"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.138-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.139-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"f8c20f0a-974b-4fde-ad96-e968f89db4dd"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"d83716a6-55f8-433a-a961-cae8e2279688"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:26:56.168-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.168-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"f8c20f0a-974b-4fde-ad96-e968f89db4dd"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:56.168-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"f8c20f0a-974b-4fde-ad96-e968f89db4dd"}}}}
{"t":{"$date":"2021-01-17T13:26:56.170-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6a91816c-d750-4e09-b00d-cfaa2f2146eb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.234-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.238-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"914b9a6a-b9e0-41ad-ad24-ebbc415f7df1"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.361-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.361-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.361-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"96414671-1261-4f02-be66-7d40508c45b4"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":122}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:26:54,826 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:54,826 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:54,826 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp4z_6dqgc
2021-01-17 13:26:54,827 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:26:54,827 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:54,827 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:54,827 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:26:54,842 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=25493 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4z_6dqgc
2021-01-17 13:26:54,843 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:26:54,843 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:26:54,844 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:25493
2021-01-17 13:26:55,448 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:26:55,448 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:25493
2021-01-17 13:26:56,051 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:26:56,051 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:25493
2021-01-17 13:26:56,062 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218649 for server to start successfully
2021-01-17 13:26:56,062 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:26:56,063 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:26:56,236 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp4z_6dqgc
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=25493 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp4z_6dqgc
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:25493
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:25493
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:25493
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218649 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:26:56.366-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f35b9e44-03c9-435c-9cc7-d0e715f36ad5"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.428-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.429-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4b6397f8-677d-4a1c-9cd1-6dfb8dbf89d1"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.453-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:26:56.530-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.530-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.530-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"96414671-1261-4f02-be66-7d40508c45b4"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":100}}
{"t":{"$date":"2021-01-17T13:26:56.531-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"4f16d98e-fa62-4d41-b40a-78875f543259"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"4b6397f8-677d-4a1c-9cd1-6dfb8dbf89d1"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:56.555-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.555-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"4f16d98e-fa62-4d41-b40a-78875f543259"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:56.555-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"4f16d98e-fa62-4d41-b40a-78875f543259"}}}}
{"t":{"$date":"2021-01-17T13:26:56.556-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2f4b3092-1c3f-4c24-8dba-dfa03424017e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.558-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-17T13:26:56.649-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.649-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.653-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"894169d3-0a48-4006-a205-7a4ad61ddc54"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.718-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.719-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cbf0f4b9-b80c-4368-8913-d9d7966139f5"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.806-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.806-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.807-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b74bf7ee-e3e5-4d9d-89b4-9ed2fbab6d75"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"cbf0f4b9-b80c-4368-8913-d9d7966139f5"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:26:56.835-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.835-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b74bf7ee-e3e5-4d9d-89b4-9ed2fbab6d75"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:26:56.835-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b74bf7ee-e3e5-4d9d-89b4-9ed2fbab6d75"}}}}
{"t":{"$date":"2021-01-17T13:26:56.836-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0a8302a6-1621-4c2f-9981-54e6bbedb3d1"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:26:56.923-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:56.923-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:26:56,933 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:56,936 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000862: approx 116009280 ticks/sec
2021-01-17 13:26:56,938 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
2021-01-17 13:26:56,940 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000722: approx 138504155 ticks/sec
2021-01-17 13:26:56,945 INFO arctic.tickstore.tickstore Got data in 0.003815 secs, creating DataFrame...
2021-01-17 13:26:56,947 INFO arctic.tickstore.tickstore 6 rows in 0.004996 secs: 1200 ticks/sec
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000862: approx 116009280 ticks/sec
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000722: approx 138504155 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003815 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 6 rows in 0.004996 secs: 1200 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:26:57,112 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 9935 (total_procs_to_kill=1)
2021-01-17 13:26:57,112 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:26:57,113 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:26:57,120 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:26:57,120 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:57,120 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:57,120 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp4z_6dqgc
2021-01-17 13:26:57,120 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:57,120 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 9935 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp4z_6dqgc
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_ test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange _

toplevel_tickstore = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7fef8a0e2d30>
arctic = <Arctic at 0x7fefb115f898, connected to MongoClient(host=['127.250.227.95:18380'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange(toplevel_tickstore, arctic):
        toplevel_tickstore._collection.insert_one({'library_name': 'FEED_2011.LEVEL1', 'start': dt(2011, 1, 1), 'end': dt(2011, 12, 31)})
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
>       toplevel_tickstore.add(DateRange(start=dt(2010, 1, 1), end=dt(2010, 12, 31, 23, 59, 59, 999000)), 'FEED_2010.LEVEL1')

tests/integration/tickstore/test_toplevel.py:113: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <arctic.tickstore.toplevel.TopLevelTickStore object at 0x7fef8a0e2d30>
date_range = DateRange(start=datetime.datetime(2010, 1, 1, 0, 0), end=datetime.datetime(2010, 12, 31, 23, 59, 59, 999000))
library_name = 'FEED_2010.LEVEL1'

        def add(self, date_range, library_name):
            """
            Adds the library with the given date range to the underlying collection of libraries used by this store.
            The underlying libraries should not overlap as the date ranges are assumed to be CLOSED_CLOSED by this function
            and the rest of the class.
    
            Arguments:
    
            date_range: A date range provided on the assumption that it is CLOSED_CLOSED. If for example the underlying
            libraries were split by year, the start of the date range would be datetime.datetime(year, 1, 1) and the end
            would be datetime.datetime(year, 12, 31, 23, 59, 59, 999000). The date range must fall on UTC day boundaries,
            that is the start must be add midnight and the end must be 1 millisecond before midnight.
    
            library_name: The name of the underlying library. This must be the name of a valid Arctic library
            """
            # check that the library is valid
            try:
                self._arctic_lib.arctic[library_name]
            except Exception as e:
                logger.error("Could not load library")
                raise e
            assert date_range.start and date_range.end, "Date range should have start and end properties {}".format(date_range)
            start = date_range.start.astimezone(mktz('UTC')) if date_range.start.tzinfo is not None else date_range.start.replace(tzinfo=mktz('UTC'))
            end = date_range.end.astimezone(mktz('UTC')) if date_range.end.tzinfo is not None else date_range.end.replace(tzinfo=mktz('UTC'))
            assert start.time() == time.min and end.time() == end_time_min, "Date range should fall on UTC day boundaries {}".format(date_range)
            # check that the date range does not overlap
            library_metadata = self._get_library_metadata(date_range)
            if len(library_metadata) > 1 or (len(library_metadata) == 1 and library_metadata[0] != library_name):
                raise OverlappingDataException("""There are libraries that overlap with the date range:
    library: {}
>   overlapping libraries: {}""".format(library_name, [lib.library for lib in library_metadata]))
E   arctic.exceptions.OverlappingDataException: There are libraries that overlap with the date range:
E   library: FEED_2010.LEVEL1
E   overlapping libraries: ['FEED_2011.LEVEL1']

arctic/tickstore/toplevel.py:101: OverlappingDataException
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:26:59.011-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10035,"port":18380,"dbPath":"/tmp/tmp_yn48_zj","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:26:59.015-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":18380,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp_yn48_zj","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:26:59.016-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:59.016-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:26:59.733-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915219:733969][10035:0x7f48ff04ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:59.734-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915219:734023][10035:0x7f48ff04ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:26:59.776-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":760}}
{"t":{"$date":"2021-01-17T13:26:59.776-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:59.837-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:26:59.837-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:26:59.856-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:26:59.857-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"2131d8e7-eba7-4420-8136-90b67e801f8c"}},"options":{"uuid":{"$uuid":"2131d8e7-eba7-4420-8136-90b67e801f8c"}}}}
{"t":{"$date":"2021-01-17T13:26:59.925-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:59.925-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:26:59.925-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:26:59.926-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"79f8b45d-8d02-4092-a55d-faa911896b31"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:26:59.982-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:26:59.982-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp_yn48_zj/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:26:59.984-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:26:59.984-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:26:59.984-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":18380,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:26:59.984-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"80a33149-82a8-46f4-85c3-fb3c888c7fbf"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.074-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.074-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.085-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:60178","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.087-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:60180","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.189-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:60182","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.191-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:60184","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.191-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:60186","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.197-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:60188","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.199-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:60192","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.199-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:60190","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:00.204-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"899cde2a-28af-48e5-b0e2-0cd7b16219a8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.273-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.274-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"8da0f7de-5868-4455-ab12-04a20cb5f112"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"899cde2a-28af-48e5-b0e2-0cd7b16219a8"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:00.299-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.299-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"8da0f7de-5868-4455-ab12-04a20cb5f112"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:00.299-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"8da0f7de-5868-4455-ab12-04a20cb5f112"}}}}
{"t":{"$date":"2021-01-17T13:27:00.301-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5b02821b-24fc-4f71-8026-8b7e70402bdb"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.370-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.374-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.toplevel_tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"61460db4-2a17-4599-9110-52075b5ec116"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.484-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.484-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.toplevel_tickstore","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.484-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.toplevel_tickstore","command":{"createIndexes":"toplevel_tickstore","indexes":[{"background":true,"name":"start_1","key":{"start":1}}],"lsid":{"id":{"$uuid":"00b4a438-fb91-4e8f-82c1-21095486c70c"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":110}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:26:58,960 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:58,960 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:58,961 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp_yn48_zj
2021-01-17 13:26:58,961 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:26:58,961 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:26:58,961 DEBUG pytest_shutil.workspace 
2021-01-17 13:26:58,961 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:26:58,975 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=18380 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp_yn48_zj
2021-01-17 13:26:58,976 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:26:58,976 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:26:58,977 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:18380
2021-01-17 13:26:59,581 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:26:59,581 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:18380
2021-01-17 13:27:00,185 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:00,185 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:18380
2021-01-17 13:27:00,195 DEBUG pytest_server_fixtures.base2 waited 0:00:01.219250 for server to start successfully
2021-01-17 13:27:00,196 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:00,196 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
2021-01-17 13:27:00,372 DEBUG root Cache has expired data, fetching from slow path and reloading cache.
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp_yn48_zj
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=18380 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp_yn48_zj
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:18380
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:18380
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:18380
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.219250 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
DEBUG    root:arctic.py:234 Cache has expired data, fetching from slow path and reloading cache.
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:27:00.490-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5b659055-7186-49a9-b5f2-cc3aecd37a23"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.546-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.547-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bba1d7b4-c2b9-4333-841d-8639d92dbff7"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.587-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:27:00.646-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.646-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.646-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"a43bbf12-e81b-4242-9ebd-746d8935ba17"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"bba1d7b4-c2b9-4333-841d-8639d92dbff7"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:00.675-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.675-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"a43bbf12-e81b-4242-9ebd-746d8935ba17"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:00.675-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"a43bbf12-e81b-4242-9ebd-746d8935ba17"}}}}
{"t":{"$date":"2021-01-17T13:27:00.676-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"916c07f4-11b9-4526-8b57-67956beeec70"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:00.691-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-17T13:27:00.768-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:00.768-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:00,810 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10035 (total_procs_to_kill=1)
2021-01-17 13:27:00,810 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:00,810 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:00,818 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:00,818 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:00,818 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:00,818 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp_yn48_zj
2021-01-17 13:27:00,819 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:00,819 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10035 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp_yn48_zj
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
________________ test_should_write_top_level_with_list_of_dicts ________________

arctic = <Arctic at 0x7fefb1b68ef0, connected to MongoClient(host=['127.250.227.95:11125'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_write_top_level_with_list_of_dicts(arctic):
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED.LEVEL1', toplevel.TICK_STORE_TYPE)
        toplevel_tickstore = arctic['FEED.LEVEL1']
        dates = pd.date_range('20101201', periods=57, tz=mktz('Europe/London'))
        data = [{'index': dates[i], 'a': i} for i in range(len(dates))]
        expected = pd.DataFrame(np.arange(57, dtype=np.float64), index=dates, columns=list('a'))
        toplevel_tickstore.write('blah', data)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 12, 1), end=dt(2011, 2, 1)), columns=list('a'))
>       assert_frame_equal(expected, res.tz_convert(mktz('Europe/London')))
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (57, 1)
E       [right]: (55, 1)

tests/integration/tickstore/test_toplevel.py:197: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:27:15.745-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:27:15.748-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:27:15.749-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:27:15.749-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10439,"port":11125,"dbPath":"/tmp/tmpzski3xb7","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:27:15.749-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:27:15.749-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:27:15.749-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":11125,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpzski3xb7","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:27:15.750-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:15.750-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:27:16.466-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915236:466003][10439:0x7f9134584a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:16.466-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915236:466054][10439:0x7f9134584a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:16.511-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":761}}
{"t":{"$date":"2021-01-17T13:27:16.511-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:16.571-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:27:16.571-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:27:16.591-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:16.592-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"dbd1b709-058f-4bae-8306-17280b9d1149"}},"options":{"uuid":{"$uuid":"dbd1b709-058f-4bae-8306-17280b9d1149"}}}}
{"t":{"$date":"2021-01-17T13:27:16.654-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:16.654-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:27:16.654-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:27:16.655-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"c72c5716-4b7b-436f-8f24-9396a3a5c125"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:27:16.716-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:16.716-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpzski3xb7/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:27:16.718-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:27:16.718-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:27:16.718-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":11125,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:27:16.718-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"6a8c6902-52e9-40d5-a5e1-ee44f5e4a356"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:16.812-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:16.812-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:16.816-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:35488","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.818-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:35490","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.920-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:35494","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.922-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:35496","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.923-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:35498","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.927-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:35500","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.930-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:35502","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.931-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:35504","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:16.935-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5202b8d8-0a6a-4427-bc01-5e1eb28f11e8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.002-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.003-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3c6d8c6e-cd53-41ed-ab60-1e100763eaa5"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"5202b8d8-0a6a-4427-bc01-5e1eb28f11e8"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:17.032-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.032-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3c6d8c6e-cd53-41ed-ab60-1e100763eaa5"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:17.032-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3c6d8c6e-cd53-41ed-ab60-1e100763eaa5"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:27:15,691 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:15,691 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:15,692 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpzski3xb7
2021-01-17 13:27:15,692 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:27:15,692 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:15,692 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:15,692 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:27:15,707 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=11125 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpzski3xb7
2021-01-17 13:27:15,708 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:27:15,708 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:27:15,708 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11125
2021-01-17 13:27:16,313 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:27:16,313 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11125
2021-01-17 13:27:16,916 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:16,916 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:11125
2021-01-17 13:27:16,927 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218813 for server to start successfully
2021-01-17 13:27:16,927 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:16,928 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpzski3xb7
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=11125 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpzski3xb7
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11125
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11125
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:11125
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218813 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:27:17.034-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a1f2d10c-42a5-488b-8062-daa18282d6b8"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.098-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.100-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"5eaf7d06-572f-4cf7-8633-7d3431e4efa2"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.208-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.209-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.209-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"f2c70a33-4288-43fc-9904-a63a338bbec9"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":109}}
{"t":{"$date":"2021-01-17T13:27:17.209-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"3ceba010-4582-4b76-a133-a74aaf7adb7b"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"5eaf7d06-572f-4cf7-8633-7d3431e4efa2"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:17.244-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.245-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"3ceba010-4582-4b76-a133-a74aaf7adb7b"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:17.245-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"3ceba010-4582-4b76-a133-a74aaf7adb7b"}}}}
{"t":{"$date":"2021-01-17T13:27:17.245-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9abee247-dd5b-4104-8c0a-28cc9c077746"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.318-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:27:17.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.339-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.343-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"04fec220-30c5-4cf7-8f7e-e3bccb8b011c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.402-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.403-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"45ec8bff-5fc8-4598-93b5-8ccd5840bda7"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.424-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":17}}
{"t":{"$date":"2021-01-17T13:27:17.495-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.495-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.496-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"d357e2b9-6c51-4585-a010-f0e7a7a4dfa5"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"45ec8bff-5fc8-4598-93b5-8ccd5840bda7"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:17.527-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.527-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"d357e2b9-6c51-4585-a010-f0e7a7a4dfa5"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:17.527-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"d357e2b9-6c51-4585-a010-f0e7a7a4dfa5"}}}}
{"t":{"$date":"2021-01-17T13:27:17.528-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"09c49606-27d4-4e3f-ba8c-96e95183299c"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.620-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.620-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.624-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b46ae46c-7fa5-48ee-846e-663c0e093206"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.680-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.684-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"714d9bcc-8fbc-42ed-9b88-847f249cf12f"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:17.740-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.744-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}},"namespace":"arctic_FEED.LEVEL1","collectionUUID":{"uuid":{"$uuid":"714d9bcc-8fbc-42ed-9b88-847f249cf12f"}},"indexes":1,"firstIndex":{"name":"start_1"}}}
{"t":{"$date":"2021-01-17T13:27:17.804-07:00"},"s":"I",  "c":"INDEX",    "id":20384,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: starting","attr":{"namespace":"arctic_FEED.LEVEL1","buildUUID":null,"properties":{"v":2,"key":{"start":1},"name":"start_1","background":true},"method":"Hybrid","maxTemporaryMemoryUsageMB":200}}
{"t":{"$date":"2021-01-17T13:27:17.804-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:17.804-07:00"},"s":"I",  "c":"INDEX",    "id":20391,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: collection scan done","attr":{"buildUUID":null,"totalRecords":2,"durationMillis":0}}
{"t":{"$date":"2021-01-17T13:27:17.805-07:00"},"s":"I",  "c":"INDEX",    "id":20685,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: inserted keys from external sorter into index","attr":{"namespace":"arctic_FEED.LEVEL1","index":"start_1","keysInserted":2,"durationMillis":0}}
{"t":{"$date":"2021-01-17T13:27:17.812-07:00"},"s":"I",  "c":"STORAGE",  "id":3856203, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: waiting for next action before completing final phase","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}}}}
{"t":{"$date":"2021-01-17T13:27:17.812-07:00"},"s":"I",  "c":"STORAGE",  "id":3856204, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: received signal","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}},"action":"Single-phase commit"}}
{"t":{"$date":"2021-01-17T13:27:17.812-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:17.824-07:00"},"s":"I",  "c":"STORAGE",  "id":20663,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: completed successfully","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}},"namespace":"arctic_FEED.LEVEL1","uuid":{"uuid":{"$uuid":"714d9bcc-8fbc-42ed-9b88-847f249cf12f"}},"indexesBuilt":1,"numIndexesBefore":1,"numIndexesAfter":2}}
{"t":{"$date":"2021-01-17T13:27:17.825-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"59f44bad-8b0c-45d1-a846-fcf9565c8e1a"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:27:17,839 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001021: approx 97943192 ticks/sec
2021-01-17 13:27:17,844 DEBUG arctic.tickstore.tickstore 1 buckets in 0.000846: approx 118203309 ticks/sec
2021-01-17 13:27:17,850 INFO arctic.tickstore.tickstore Got data in 0.004054 secs, creating DataFrame...
2021-01-17 13:27:17,851 INFO arctic.tickstore.tickstore 31 rows in 0.00505 secs: 6138 ticks/sec
2021-01-17 13:27:17,856 INFO arctic.tickstore.tickstore Got data in 0.003731 secs, creating DataFrame...
2021-01-17 13:27:17,857 INFO arctic.tickstore.tickstore 26 rows in 0.004634 secs: 5610 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001021: approx 97943192 ticks/sec
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.000846: approx 118203309 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004054 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 31 rows in 0.00505 secs: 6138 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003731 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 26 rows in 0.004634 secs: 5610 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:17,888 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10439 (total_procs_to_kill=1)
2021-01-17 13:27:17,888 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:17,889 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:17,896 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:17,896 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:17,897 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:17,897 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpzski3xb7
2021-01-17 13:27:17,897 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:17,897 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10439 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpzski3xb7
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
______________ test_should_write_top_level_with_correct_timezone _______________

arctic = <Arctic at 0x7fefb196cbe0, connected to MongoClient(host=['127.250.227.95:29745'], document_class=dict, tz_aware=False, connect=True)>

    def test_should_write_top_level_with_correct_timezone(arctic):
        # Write timezone aware data and read back in UTC
        utc = mktz('UTC')
        arctic.initialize_library('FEED_2010.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED_2011.LEVEL1', tickstore.TICK_STORE_TYPE)
        arctic.initialize_library('FEED.LEVEL1', toplevel.TICK_STORE_TYPE)
        toplevel_tickstore = arctic['FEED.LEVEL1']
        dates = pd.date_range('20101230220000', periods=10, tz=mktz('America/New_York'))  # 10pm New York time is 3am next day UTC
        data = [{'index': dates[i], 'a': i} for i in range(len(dates))]
        expected = pd.DataFrame(np.arange(len(dates), dtype=np.float64), index=dates.tz_convert(utc), columns=list('a'))
        toplevel_tickstore.write('blah', data)
        res = toplevel_tickstore.read('blah', DateRange(start=dt(2010, 1, 1), end=dt(2011, 12, 31)), columns=list('a')).tz_convert(utc)
>       assert_frame_equal(expected, res)
E       AssertionError: DataFrame are different
E       
E       DataFrame shape mismatch
E       [left]:  (10, 1)
E       [right]: (9, 1)

tests/integration/tickstore/test_toplevel.py:215: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:27:17.957-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:27:17.960-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:27:17.961-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:27:17.961-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":10490,"port":29745,"dbPath":"/tmp/tmpireydyge","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:27:17.961-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:27:17.961-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:27:17.961-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":29745,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpireydyge","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:27:17.962-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:17.962-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:27:18.677-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915238:677277][10490:0x7fd3acf3ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:18.677-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915238:677328][10490:0x7fd3acf3ca80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:18.721-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":759}}
{"t":{"$date":"2021-01-17T13:27:18.721-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:18.782-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:27:18.782-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:27:18.802-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:18.802-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"fde2b39e-f18e-47bc-bcc3-c999e6e8e187"}},"options":{"uuid":{"$uuid":"fde2b39e-f18e-47bc-bcc3-c999e6e8e187"}}}}
{"t":{"$date":"2021-01-17T13:27:18.865-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:18.865-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:27:18.866-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:27:18.866-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2144e644-7785-4ba8-8b13-660a4c88f36f"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:27:18.927-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:18.927-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpireydyge/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:27:18.928-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:27:18.928-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:27:18.928-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":29745,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:27:18.928-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8c9513cf-9a53-4838-b485-41f3527a684d"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.022-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.022-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.027-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:60028","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.029-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:60030","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.131-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:60032","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.133-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:60034","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.133-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:60036","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.138-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:60038","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.140-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:60040","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.140-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:60042","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:19.143-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f86c154d-740c-43f6-9dca-caed073e902b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.209-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.210-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b30db13d-becb-4f7c-8e5d-d3cc0ee5491a"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"f86c154d-740c-43f6-9dca-caed073e902b"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:19.239-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.239-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b30db13d-becb-4f7c-8e5d-d3cc0ee5491a"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:19.239-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b30db13d-becb-4f7c-8e5d-d3cc0ee5491a"}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:27:17,901 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:17,901 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:17,902 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpireydyge
2021-01-17 13:27:17,902 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:27:17,902 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:17,902 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:17,903 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:27:17,917 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=29745 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpireydyge
2021-01-17 13:27:17,918 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:27:17,918 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:27:17,919 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:29745
2021-01-17 13:27:18,523 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:27:18,523 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:29745
2021-01-17 13:27:19,126 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:19,127 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:29745
2021-01-17 13:27:19,137 DEBUG pytest_server_fixtures.base2 waited 0:00:01.218776 for server to start successfully
2021-01-17 13:27:19,137 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:19,138 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpireydyge
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=29745 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpireydyge
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:29745
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:29745
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:29745
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.218776 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:27:19.242-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"ff750088-4212-4551-88b6-963205ca51fe"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.306-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.307-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4da82585-d726-4460-a013-7d0661d9ad19"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.421-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.421-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.421-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_FEED_2010.LEVEL1","command":{"createIndexes":"LEVEL1","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"c6a45b9f-9b46-48c8-b082-48afc3143d34"}},"$db":"arctic_FEED_2010","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":113}}
{"t":{"$date":"2021-01-17T13:27:19.422-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"6383f040-3b48-46d5-84f6-3e0f05e5f0d3"}},"namespace":"arctic_FEED_2010.LEVEL1","collectionUUID":{"uuid":{"$uuid":"4da82585-d726-4460-a013-7d0661d9ad19"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:19.457-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.457-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"6383f040-3b48-46d5-84f6-3e0f05e5f0d3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:19.457-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"6383f040-3b48-46d5-84f6-3e0f05e5f0d3"}}}}
{"t":{"$date":"2021-01-17T13:27:19.458-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2010.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"a427591e-5630-4b78-8446-4c3c5b62a1f4"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.529-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:27:19.551-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.551-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2010.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.555-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0141e970-63cb-4909-b22d-dec987f25b96"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.614-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.615-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"9943e8b8-e8ba-4cb4-807b-56f10fb01cb5"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.633-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
{"t":{"$date":"2021-01-17T13:27:19.708-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.708-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.709-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"987286a8-b5fa-4d4d-9bf4-e003b4923be3"}},"namespace":"arctic_FEED_2011.LEVEL1","collectionUUID":{"uuid":{"$uuid":"9943e8b8-e8ba-4cb4-807b-56f10fb01cb5"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:19.740-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.740-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"987286a8-b5fa-4d4d-9bf4-e003b4923be3"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:19.740-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"987286a8-b5fa-4d4d-9bf4-e003b4923be3"}}}}
{"t":{"$date":"2021-01-17T13:27:19.741-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED_2011.LEVEL1.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"aea0ae6e-c2dc-4ea0-ad65-53442d24936e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.832-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.833-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED_2011.LEVEL1.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.836-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"31ced655-666d-4965-a611-0fcd93bb3e50"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.894-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.899-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_FEED.LEVEL1","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3eb5fcb6-8185-4547-8730-5a8f955611ff"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:19.956-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:19.960-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}},"namespace":"arctic_FEED.LEVEL1","collectionUUID":{"uuid":{"$uuid":"3eb5fcb6-8185-4547-8730-5a8f955611ff"}},"indexes":1,"firstIndex":{"name":"start_1"}}}
{"t":{"$date":"2021-01-17T13:27:20.020-07:00"},"s":"I",  "c":"INDEX",    "id":20384,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: starting","attr":{"namespace":"arctic_FEED.LEVEL1","buildUUID":null,"properties":{"v":2,"key":{"start":1},"name":"start_1","background":true},"method":"Hybrid","maxTemporaryMemoryUsageMB":200}}
{"t":{"$date":"2021-01-17T13:27:20.020-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:20.020-07:00"},"s":"I",  "c":"INDEX",    "id":20391,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: collection scan done","attr":{"buildUUID":null,"totalRecords":2,"durationMillis":0}}
{"t":{"$date":"2021-01-17T13:27:20.020-07:00"},"s":"I",  "c":"INDEX",    "id":20685,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: inserted keys from external sorter into index","attr":{"namespace":"arctic_FEED.LEVEL1","index":"start_1","keysInserted":2,"durationMillis":0}}
{"t":{"$date":"2021-01-17T13:27:20.027-07:00"},"s":"I",  "c":"STORAGE",  "id":3856203, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: waiting for next action before completing final phase","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}}}}
{"t":{"$date":"2021-01-17T13:27:20.027-07:00"},"s":"I",  "c":"STORAGE",  "id":3856204, "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: received signal","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}},"action":"Single-phase commit"}}
{"t":{"$date":"2021-01-17T13:27:20.028-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_FEED.LEVEL1","index":"start_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:20.040-07:00"},"s":"I",  "c":"STORAGE",  "id":20663,   "ctx":"IndexBuildsCoordinatorMongod-0","msg":"Index build: completed successfully","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}},"namespace":"arctic_FEED.LEVEL1","uuid":{"uuid":{"$uuid":"3eb5fcb6-8185-4547-8730-5a8f955611ff"}},"indexesBuilt":1,"numIndexesBefore":1,"numIndexesAfter":2}}
{"t":{"$date":"2021-01-17T13:27:20.040-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"39b64f79-43ca-4707-8963-8447bf159621"}}}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:27:20,049 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001006: approx 99403578 ticks/sec
2021-01-17 13:27:20,054 DEBUG arctic.tickstore.tickstore 1 buckets in 0.001122: approx 89126559 ticks/sec
2021-01-17 13:27:20,059 INFO arctic.tickstore.tickstore Got data in 0.003042 secs, creating DataFrame...
2021-01-17 13:27:20,060 INFO arctic.tickstore.tickstore 1 rows in 0.004046 secs: 247 ticks/sec
2021-01-17 13:27:20,065 INFO arctic.tickstore.tickstore Got data in 0.003509 secs, creating DataFrame...
2021-01-17 13:27:20,066 INFO arctic.tickstore.tickstore 9 rows in 0.004426 secs: 2033 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001006: approx 99403578 ticks/sec
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.001122: approx 89126559 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003042 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.004046 secs: 247 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.003509 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 9 rows in 0.004426 secs: 2033 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:20,096 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 10490 (total_procs_to_kill=1)
2021-01-17 13:27:20,096 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:20,097 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:20,104 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:20,104 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:20,104 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:20,105 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpireydyge
2021-01-17 13:27:20,105 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:20,105 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 10490 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpireydyge
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
__________________________ test_date_range[tickstore] __________________________

tickstore_lib = <TickStore at 0x7fefb18c6588>
    <ArcticLibrary at 0x7fefb1979e80, arctic_test.tickstore>
        <Arctic at 0x7fefb188d898, connected to MongoClient(host=['127.250.227.95:3463'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range(tickstore_lib):
        tickstore_lib.write('SYM', DUMMY_DATA)
        df = tickstore_lib.read('SYM', date_range=DateRange(20130101, 20130103), columns=None)
>       assert_array_equal(df['a'].values, np.array([1, np.nan, np.nan]))
E       AssertionError: 
E       Arrays are not equal
E       
E       (shapes (2,), (3,) mismatch)
E        x: array([nan, nan])
E        y: array([ 1., nan, nan])

tests/integration/tickstore/test_ts_read.py:234: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:27:44.815-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:27:44.817-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:27:44.817-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:27:44.818-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11226,"port":3463,"dbPath":"/tmp/tmp9yr7_nup","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:27:44.818-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:27:44.818-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:27:44.818-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":3463,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmp9yr7_nup","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:27:44.819-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:44.819-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:27:45.694-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915265:694384][11226:0x7f909d041a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:45.694-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915265:694452][11226:0x7f909d041a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:45.740-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":921}}
{"t":{"$date":"2021-01-17T13:27:45.740-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:45.796-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:27:45.796-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:27:45.818-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:45.819-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"dede3e5a-be81-4786-97e3-459996cd1188"}},"options":{"uuid":{"$uuid":"dede3e5a-be81-4786-97e3-459996cd1188"}}}}
{"t":{"$date":"2021-01-17T13:27:45.885-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:45.885-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:27:45.886-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:27:45.888-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"055d22cc-4f11-4bc6-b6ca-74e5d47b9e62"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:27:45.951-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:45.952-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmp9yr7_nup/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:27:45.956-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2512b9dd-f3f4-4484-9d98-c35fa16c2613"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:45.958-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:27:45.958-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:27:45.958-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":3463,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:27:45.993-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:50692","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:45.998-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:50694","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:45.998-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:50696","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:46.011-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:50698","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:46.019-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:50700","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:46.020-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:50702","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:46.030-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"b9ae7426-8e67-444c-a705-6e830a7274b4"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:46.060-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.060-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.060-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"LogicalSessionCacheRefresh","msg":"Slow query","attr":{"type":"command","ns":"config.system.sessions","command":{"createIndexes":"system.sessions","indexes":[{"key":{"lastUse":1},"name":"lsidTTLIndex","expireAfterSeconds":1800}],"writeConcern":{},"$db":"config"},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":3,"w":2}},"Mutex":{"acquireCount":{"r":6}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":3},"storage":{},"protocol":"op_msg","durationMillis":104}}
{"t":{"$date":"2021-01-17T13:27:46.125-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.128-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"52d3b117-cc05-4548-bf5b-73e710e623af"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"b9ae7426-8e67-444c-a705-6e830a7274b4"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:46.159-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.159-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"52d3b117-cc05-4548-bf5b-73e710e623af"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:46.159-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"52d3b117-cc05-4548-bf5b-73e710e623af"}}}}
{"t":{"$date":"2021-01-17T13:27:46.166-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8084d4c7-88c5-4e20-84f6-210884ff0d3e"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:46.235-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.238-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"75fb09cc-2592-4a00-9c13-48b92250d965"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:46.335-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.336-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.338-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn5","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"b68eb843-6572-4be2-8ee8-763ae9574165"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"75fb09cc-2592-4a00-9c13-48b92250d965"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:46.371-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.371-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn5","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"b68eb843-6572-4be2-8ee8-763ae9574165"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:46.371-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn5","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"b68eb843-6572-4be2-8ee8-763ae9574165"}}}}
{"t":{"$date":"2021-01-17T13:27:46.373-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn5","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"39ca6cb3-255b-4fe8-9178-07cb43920d2d"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:46.492-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.492-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn5","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:46.493-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn5","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore.metadata","command":{"createIndexes":"tickstore.metadata","indexes":[{"background":true,"unique":true,"name":"sy_1","key":{"sy":1}}],"lsid":{"id":{"$uuid":"b2e70fde-280f-4664-9264-93e574442108"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"storage":{},"protocol":"op_msg","durationMillis":119}}
{"t":{"$date":"2021-01-17T13:27:46.498-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:27:44,757 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:44,757 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:44,757 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmp9yr7_nup
2021-01-17 13:27:44,757 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:27:44,758 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:44,758 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:44,758 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:27:44,773 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=3463 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp9yr7_nup
2021-01-17 13:27:44,774 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:27:44,774 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:27:44,775 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3463
2021-01-17 13:27:45,379 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:27:45,379 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3463
2021-01-17 13:27:45,983 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:45,984 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:3463
2021-01-17 13:27:46,011 DEBUG pytest_server_fixtures.base2 waited 0:00:01.236319 for server to start successfully
2021-01-17 13:27:46,012 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:46,014 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmp9yr7_nup
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=3463 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmp9yr7_nup
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3463
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3463
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:3463
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.236319 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:27:46,515 DEBUG arctic.tickstore.tickstore 1 buckets in 0.002781: approx 35958288 ticks/sec
2021-01-17 13:27:46,531 INFO arctic.tickstore.tickstore Got data in 0.014362 secs, creating DataFrame...
2021-01-17 13:27:46,536 INFO arctic.tickstore.tickstore 5 rows in 0.018436 secs: 271 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 1 buckets in 0.002781: approx 35958288 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.014362 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 5 rows in 0.018436 secs: 271 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:46,668 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11226 (total_procs_to_kill=1)
2021-01-17 13:27:46,668 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:46,670 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:46,684 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:46,685 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:46,686 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:46,686 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmp9yr7_nup
2021-01-17 13:27:46,686 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:46,687 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11226 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmp9yr7_nup
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_________________ test_date_range_end_not_in_range[tickstore] __________________

tickstore_lib = <TickStore at 0x7fefb191e908>
    <ArcticLibrary at 0x7fefb1994908, arctic_test.tickstore>
        <Arctic at 0x7fefb1792080, connected to MongoClient(host=['127.250.227.95:12350'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range_end_not_in_range(tickstore_lib):
        DUMMY_DATA = [
                      {'a': 1.,
                       'b': 2.,
                       'index': dt(2013, 1, 1, tzinfo=mktz('Europe/London'))
                       },
                      {'b': 3.,
                       'c': 4.,
                       'index': dt(2013, 1, 2, 10, 1, tzinfo=mktz('Europe/London'))
                       },
                      ]
    
        tickstore_lib._chunk_size = 1
        tickstore_lib.write('SYM', DUMMY_DATA)
        with patch.object(tickstore_lib._collection, 'find', side_effect=tickstore_lib._collection.find) as f:
            df = tickstore_lib.read('SYM', date_range=DateRange(20130101, dt(2013, 1, 2, 9, 0)), columns=None)
>           assert_array_equal(df['b'].values, np.array([2.]))
E           AssertionError: 
E           Arrays are not equal
E           
E           Mismatched elements: 1 / 1 (100%)
E           Max absolute difference: 1.
E           Max relative difference: 0.5
E            x: array([3.])
E            y: array([2.])

tests/integration/tickstore/test_ts_read.py:300: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:27:46.808-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:27:46.819-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:27:46.819-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:27:46.820-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11285,"port":12350,"dbPath":"/tmp/tmphjlz67n_","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:27:46.820-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:27:46.820-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:27:46.820-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":12350,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmphjlz67n_","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:27:46.822-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:46.822-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:27:48.403-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915268:403802][11285:0x7f3796282a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:48.403-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915268:403863][11285:0x7f3796282a80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:48.448-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":1626}}
{"t":{"$date":"2021-01-17T13:27:48.448-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:48.509-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:27:48.509-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:27:48.529-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:48.530-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"d6072bc0-d711-468b-886b-1146a3dac948"}},"options":{"uuid":{"$uuid":"d6072bc0-d711-468b-886b-1146a3dac948"}}}}
{"t":{"$date":"2021-01-17T13:27:48.594-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:48.594-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:27:48.594-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:27:48.595-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"2c0a30c9-5878-4a37-a835-bd870f43f179"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:27:48.655-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:48.655-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmphjlz67n_/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:27:48.657-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:27:48.657-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:27:48.657-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":12350,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:27:48.657-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"4570fb74-9567-4172-a33e-bfda3f3bd932"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:48.747-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:48.747-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.073-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:42678","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.074-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:42680","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.275-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:42682","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.276-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:42686","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.277-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:42684","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.280-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:42688","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.282-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:42690","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.282-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:42692","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:49.285-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"62a48cda-6938-4c4c-8628-957bb9270cce"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:49.360-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.361-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"bbb4750c-7df5-4185-9c0a-5c6f313a0643"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"62a48cda-6938-4c4c-8628-957bb9270cce"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:49.392-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.392-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"bbb4750c-7df5-4185-9c0a-5c6f313a0643"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:49.392-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"bbb4750c-7df5-4185-9c0a-5c6f313a0643"}}}}
{"t":{"$date":"2021-01-17T13:27:49.394-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"0835c436-a1fb-4353-b52a-be9db6afa758"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:49.473-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.474-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"d412e0c5-dc4d-47cd-ab06-cc348739fdce"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:49.574-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":15}}
{"t":{"$date":"2021-01-17T13:27:49.613-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.613-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.613-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore","command":{"createIndexes":"tickstore","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"c706eb47-caff-4f04-96c5-04facb1b630e"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1},"storage":{},"protocol":"op_msg","durationMillis":138}}
{"t":{"$date":"2021-01-17T13:27:49.614-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn8","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"53bdcbfe-8802-4b1f-af62-68ad5e79f1e4"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"d412e0c5-dc4d-47cd-ab06-cc348739fdce"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:49.653-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.654-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn8","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"53bdcbfe-8802-4b1f-af62-68ad5e79f1e4"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:49.654-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn8","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"53bdcbfe-8802-4b1f-af62-68ad5e79f1e4"}}}}
{"t":{"$date":"2021-01-17T13:27:49.654-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn8","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"cb7d0faf-ddc5-4ba7-b885-b6b28c1c31ac"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:49.767-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.767-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn8","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:49.767-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn8","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore.metadata","command":{"createIndexes":"tickstore.metadata","indexes":[{"background":true,"unique":true,"name":"sy_1","key":{"sy":1}}],"lsid":{"id":{"$uuid":"c706eb47-caff-4f04-96c5-04facb1b630e"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":112}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:27:46,696 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:46,696 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:46,697 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmphjlz67n_
2021-01-17 13:27:46,697 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:27:46,698 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:46,698 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:46,699 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:27:46,738 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=12350 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmphjlz67n_
2021-01-17 13:27:46,739 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:27:46,741 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:27:46,742 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12350
2021-01-17 13:27:47,355 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:27:47,355 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12350
2021-01-17 13:27:47,963 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:47,964 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12350
2021-01-17 13:27:48,568 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (4 of 28)
2021-01-17 13:27:48,569 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12350
2021-01-17 13:27:49,272 DEBUG pytest_server_fixtures.base2 sleeping for 0.2 before retrying (5 of 28)
2021-01-17 13:27:49,272 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:12350
2021-01-17 13:27:49,280 DEBUG pytest_server_fixtures.base2 waited 0:00:02.538728 for server to start successfully
2021-01-17 13:27:49,280 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:49,280 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmphjlz67n_
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=12350 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmphjlz67n_
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12350
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12350
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12350
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (4 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12350
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.2 before retrying (5 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:12350
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:02.538728 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stdout call -----------------------------
{"t":{"$date":"2021-01-17T13:27:49.777-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn3","msg":"Interrupted operation as its client disconnected","attr":{"opId":18}}
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:27:49,774 DEBUG arctic.tickstore.tickstore 2 buckets in 0.000807: approx 2478 ticks/sec
2021-01-17 13:27:49,780 INFO arctic.tickstore.tickstore Got data in 0.00444 secs, creating DataFrame...
2021-01-17 13:27:49,781 INFO arctic.tickstore.tickstore 1 rows in 0.005611 secs: 178 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 2 buckets in 0.000807: approx 2478 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.00444 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.005611 secs: 178 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:49,822 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11285 (total_procs_to_kill=1)
2021-01-17 13:27:49,822 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:49,823 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:49,830 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:49,830 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:49,830 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:49,830 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmphjlz67n_
2021-01-17 13:27:49,830 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:49,830 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11285 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmphjlz67n_
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_____________________ test_date_range_no_bounds[tickstore] _____________________

tickstore_lib = <TickStore at 0x7fefb1a08630>
    <ArcticLibrary at 0x7fefb2a52c18, arctic_test.tickstore>
        <Arctic at 0x7fefb19f9a58, connected to MongoClient(host=['127.250.227.95:27754'], document_class=dict, tz_aware=False, connect=True)>

    def test_date_range_no_bounds(tickstore_lib):
        DUMMY_DATA = [
                      {'a': 1.,
                       'b': 2.,
                       'index': dt(2013, 1, 1, tzinfo=mktz('Europe/London'))
                       },
                      {'a': 3.,
                       'b': 4.,
                       'index': dt(2013, 1, 30, tzinfo=mktz('Europe/London'))
                       },
                      {'b': 5.,
                       'c': 6.,
                       'index': dt(2013, 2, 2, 10, 1, tzinfo=mktz('Europe/London'))
                       },
                      ]
    
        tickstore_lib._chunk_size = 1
        tickstore_lib.write('SYM', DUMMY_DATA)
    
        # 1) No start, no end
        df = tickstore_lib.read('SYM', columns=None)
        assert_array_equal(df['b'].values, np.array([2., 4.]))
        # 1.2) Start before the real start
        df = tickstore_lib.read('SYM', date_range=DateRange(20121231), columns=None)
        assert_array_equal(df['b'].values, np.array([2., 4.]))
        # 2.1) Only go one month out
        df = tickstore_lib.read('SYM', date_range=DateRange(20130101), columns=None)
>       assert_array_equal(df['b'].values, np.array([2., 4.]))
E       AssertionError: 
E       Arrays are not equal
E       
E       (shapes (1,), (2,) mismatch)
E        x: array([4.])
E        y: array([2., 4.])

tests/integration/tickstore/test_ts_read.py:369: AssertionError
---------------------------- Captured stdout setup -----------------------------
{"t":{"$date":"2021-01-17T13:27:54.991-07:00"},"s":"I",  "c":"CONTROL",  "id":23285,   "ctx":"main","msg":"Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'"}
{"t":{"$date":"2021-01-17T13:27:54.997-07:00"},"s":"W",  "c":"ASIO",     "id":22601,   "ctx":"main","msg":"No TransportLayer configured during NetworkInterface startup"}
{"t":{"$date":"2021-01-17T13:27:54.997-07:00"},"s":"I",  "c":"NETWORK",  "id":4648601, "ctx":"main","msg":"Implicit TCP FastOpen unavailable. If TCP FastOpen is required, set tcpFastOpenServer, tcpFastOpenClient, and tcpFastOpenQueueSize."}
{"t":{"$date":"2021-01-17T13:27:54.998-07:00"},"s":"I",  "c":"STORAGE",  "id":4615611, "ctx":"initandlisten","msg":"MongoDB starting","attr":{"pid":11487,"port":27754,"dbPath":"/tmp/tmpwk6cftqm","architecture":"64-bit","host":"flxsa02"}}
{"t":{"$date":"2021-01-17T13:27:54.998-07:00"},"s":"I",  "c":"CONTROL",  "id":23403,   "ctx":"initandlisten","msg":"Build Info","attr":{"buildInfo":{"version":"4.4.2","gitVersion":"15e73dc5738d2278b688f8929aee605fe4279b0e","openSSLVersion":"OpenSSL 1.0.2g  1 Mar 2016","modules":[],"allocator":"tcmalloc","environment":{"distmod":"ubuntu1604","distarch":"x86_64","target_arch":"x86_64"}}}}
{"t":{"$date":"2021-01-17T13:27:54.998-07:00"},"s":"I",  "c":"CONTROL",  "id":51765,   "ctx":"initandlisten","msg":"Operating System","attr":{"os":{"name":"Ubuntu","version":"16.04"}}}
{"t":{"$date":"2021-01-17T13:27:54.998-07:00"},"s":"I",  "c":"CONTROL",  "id":21951,   "ctx":"initandlisten","msg":"Options set by command line","attr":{"options":{"net":{"bindIp":"127.250.227.95","port":27754,"unixDomainSocket":{"enabled":false}},"storage":{"dbPath":"/tmp/tmpwk6cftqm","journal":{"enabled":false},"syncPeriodSecs":0.0},"systemLog":{"quiet":true}}}}
{"t":{"$date":"2021-01-17T13:27:54.999-07:00"},"s":"I",  "c":"STORAGE",  "id":22297,   "ctx":"initandlisten","msg":"Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:54.999-07:00"},"s":"I",  "c":"STORAGE",  "id":22315,   "ctx":"initandlisten","msg":"Opening WiredTiger","attr":{"config":"create,cache_size=11497M,session_max=33000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000,close_scan_interval=10,close_handle_minimum=250),statistics_log=(wait=0),verbose=[recovery_progress,checkpoint_progress,compact_progress],,log=(enabled=false),"}}
{"t":{"$date":"2021-01-17T13:27:55.753-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915275:753778][11487:0x7f569e78ba80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global recovery timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:55.753-07:00"},"s":"I",  "c":"STORAGE",  "id":22430,   "ctx":"initandlisten","msg":"WiredTiger message","attr":{"message":"[1610915275:753841][11487:0x7f569e78ba80], txn-recover: [WT_VERB_RECOVERY | WT_VERB_RECOVERY_PROGRESS] Set global oldest timestamp: (0, 0)"}}
{"t":{"$date":"2021-01-17T13:27:55.800-07:00"},"s":"I",  "c":"STORAGE",  "id":4795906, "ctx":"initandlisten","msg":"WiredTiger opened","attr":{"durationMillis":801}}
{"t":{"$date":"2021-01-17T13:27:55.800-07:00"},"s":"I",  "c":"RECOVERY", "id":23987,   "ctx":"initandlisten","msg":"WiredTiger recoveryTimestamp","attr":{"recoveryTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:55.861-07:00"},"s":"I",  "c":"STORAGE",  "id":4366408, "ctx":"initandlisten","msg":"No table logging settings modifications are required for existing WiredTiger tables","attr":{"loggingEnabled":true}}
{"t":{"$date":"2021-01-17T13:27:55.861-07:00"},"s":"I",  "c":"STORAGE",  "id":22262,   "ctx":"initandlisten","msg":"Timestamp monitor starting"}
{"t":{"$date":"2021-01-17T13:27:55.882-07:00"},"s":"W",  "c":"CONTROL",  "id":22120,   "ctx":"initandlisten","msg":"Access control is not enabled for the database. Read and write access to data and configuration is unrestricted","tags":["startupWarnings"]}
{"t":{"$date":"2021-01-17T13:27:55.882-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"admin.system.version","uuidDisposition":"provided","uuid":{"uuid":{"$uuid":"09ec2f31-d50b-4880-9039-87912d72a1c2"}},"options":{"uuid":{"$uuid":"09ec2f31-d50b-4880-9039-87912d72a1c2"}}}}
{"t":{"$date":"2021-01-17T13:27:55.946-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"admin.system.version","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:55.946-07:00"},"s":"I",  "c":"COMMAND",  "id":20459,   "ctx":"initandlisten","msg":"Setting featureCompatibilityVersion","attr":{"newVersion":"4.4"}}
{"t":{"$date":"2021-01-17T13:27:55.946-07:00"},"s":"I",  "c":"STORAGE",  "id":20536,   "ctx":"initandlisten","msg":"Flow Control is enabled on this deployment"}
{"t":{"$date":"2021-01-17T13:27:55.947-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"initandlisten","msg":"createCollection","attr":{"namespace":"local.startup_log","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"7e6dfd84-d5bf-444f-b539-0a715c47e2ec"}},"options":{"capped":true,"size":10485760}}}
{"t":{"$date":"2021-01-17T13:27:56.010-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"initandlisten","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"local.startup_log","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.010-07:00"},"s":"I",  "c":"FTDC",     "id":20625,   "ctx":"initandlisten","msg":"Initializing full-time diagnostic data capture","attr":{"dataDirectory":"/tmp/tmpwk6cftqm/diagnostic.data"}}
{"t":{"$date":"2021-01-17T13:27:56.012-07:00"},"s":"I",  "c":"CONTROL",  "id":20712,   "ctx":"LogicalSessionCacheReap","msg":"Sessions collection is not set up; waiting until next sessions reap interval","attr":{"error":"NamespaceNotFound: config.system.sessions does not exist"}}
{"t":{"$date":"2021-01-17T13:27:56.012-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"LogicalSessionCacheRefresh","msg":"createCollection","attr":{"namespace":"config.system.sessions","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"f59bc831-eb42-4e28-8439-a5a61d9d2829"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:56.012-07:00"},"s":"I",  "c":"NETWORK",  "id":23015,   "ctx":"listener","msg":"Listening on","attr":{"address":"127.250.227.95"}}
{"t":{"$date":"2021-01-17T13:27:56.012-07:00"},"s":"I",  "c":"NETWORK",  "id":23016,   "ctx":"listener","msg":"Waiting for connections","attr":{"port":27754,"ssl":"off"}}
{"t":{"$date":"2021-01-17T13:27:56.062-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn1","msg":"client metadata","attr":{"remote":"127.0.0.1:39606","client":"conn1","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.063-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn2","msg":"client metadata","attr":{"remote":"127.0.0.1:39608","client":"conn2","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.110-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.111-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"LogicalSessionCacheRefresh","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"config.system.sessions","index":"lsidTTLIndex","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.166-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn3","msg":"client metadata","attr":{"remote":"127.0.0.1:39610","client":"conn3","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.169-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn4","msg":"client metadata","attr":{"remote":"127.0.0.1:39612","client":"conn4","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.169-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn5","msg":"client metadata","attr":{"remote":"127.0.0.1:39614","client":"conn5","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.176-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn6","msg":"client metadata","attr":{"remote":"127.0.0.1:39616","client":"conn6","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.178-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn7","msg":"client metadata","attr":{"remote":"127.0.0.1:39618","client":"conn7","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.179-07:00"},"s":"I",  "c":"NETWORK",  "id":51800,   "ctx":"conn8","msg":"client metadata","attr":{"remote":"127.0.0.1:39620","client":"conn8","doc":{"driver":{"name":"PyMongo","version":"3.11.2"},"os":{"type":"Linux","name":"Linux","architecture":"x86_64","version":"4.15.0-128-generic"},"platform":"CPython 3.6.12.final.0"}}}
{"t":{"$date":"2021-01-17T13:27:56.182-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"meta_db.cache","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"3598951f-c4f1-439a-a0cc-a3514e133945"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:56.249-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.250-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"84e558a3-f030-4968-8cc8-be6b962d7589"}},"namespace":"meta_db.cache","collectionUUID":{"uuid":{"$uuid":"3598951f-c4f1-439a-a0cc-a3514e133945"}},"indexes":1,"firstIndex":{"name":"date_1"}}}
{"t":{"$date":"2021-01-17T13:27:56.278-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"meta_db.cache","index":"date_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.278-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"84e558a3-f030-4968-8cc8-be6b962d7589"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:56.278-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"84e558a3-f030-4968-8cc8-be6b962d7589"}}}}
{"t":{"$date":"2021-01-17T13:27:56.281-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.ARCTIC","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8d68f34e-56b5-4583-a7b4-6b6ee7e9f01b"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:56.345-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.ARCTIC","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.346-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"8f34eb0b-0490-4d3c-9640-fbb4bd02f698"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:56.457-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.458-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"sy_1_s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.458-07:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"arctic_test.tickstore","command":{"createIndexes":"tickstore","indexes":[{"background":true,"name":"sy_1_s_1","key":{"sy":1,"s":1}}],"lsid":{"id":{"$uuid":"53450156-9cad-4078-88c4-3dd2308c790a"}},"$db":"arctic_test","$readPreference":{"mode":"primary"}},"numYields":0,"reslen":114,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":5}},"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":3}},"Database":{"acquireCount":{"r":2,"w":3}},"Collection":{"acquireCount":{"r":4,"w":2}},"Mutex":{"acquireCount":{"r":5}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"storage":{},"protocol":"op_msg","durationMillis":111}}
{"t":{"$date":"2021-01-17T13:27:56.459-07:00"},"s":"I",  "c":"INDEX",    "id":20438,   "ctx":"conn7","msg":"Index build: registering","attr":{"buildUUID":{"uuid":{"$uuid":"ac9de8c1-8f85-424e-9d09-56cf0a564297"}},"namespace":"arctic_test.tickstore","collectionUUID":{"uuid":{"$uuid":"8f34eb0b-0490-4d3c-9640-fbb4bd02f698"}},"indexes":1,"firstIndex":{"name":"s_1"}}}
{"t":{"$date":"2021-01-17T13:27:56.494-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore","index":"s_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.494-07:00"},"s":"I",  "c":"INDEX",    "id":20440,   "ctx":"conn7","msg":"Index build: waiting for index build to complete","attr":{"buildUUID":{"uuid":{"$uuid":"ac9de8c1-8f85-424e-9d09-56cf0a564297"}},"deadline":{"$date":{"$numberLong":"9223372036854775807"}}}}
{"t":{"$date":"2021-01-17T13:27:56.494-07:00"},"s":"I",  "c":"INDEX",    "id":20447,   "ctx":"conn7","msg":"Index build: completed","attr":{"buildUUID":{"uuid":{"$uuid":"ac9de8c1-8f85-424e-9d09-56cf0a564297"}}}}
{"t":{"$date":"2021-01-17T13:27:56.495-07:00"},"s":"I",  "c":"STORAGE",  "id":20320,   "ctx":"conn7","msg":"createCollection","attr":{"namespace":"arctic_test.tickstore.metadata","uuidDisposition":"generated","uuid":{"uuid":{"$uuid":"bfe5f319-d1df-4d16-b29a-4a0de6f92b7a"}},"options":{}}}
{"t":{"$date":"2021-01-17T13:27:56.563-07:00"},"s":"I",  "c":"-",        "id":20883,   "ctx":"conn1","msg":"Interrupted operation as its client disconnected","attr":{"opId":13}}
{"t":{"$date":"2021-01-17T13:27:56.591-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"_id_","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
{"t":{"$date":"2021-01-17T13:27:56.591-07:00"},"s":"I",  "c":"INDEX",    "id":20345,   "ctx":"conn7","msg":"Index build: done building","attr":{"buildUUID":null,"namespace":"arctic_test.tickstore.metadata","index":"sy_1","commitTimestamp":{"$timestamp":{"t":0,"i":0}}}}
---------------------------- Captured stderr setup -----------------------------
2021-01-17 13:27:54,936 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:54,936 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:54,937 DEBUG pytest_shutil.workspace pytest_shutil created workspace /tmp/tmpwk6cftqm
2021-01-17 13:27:54,937 DEBUG pytest_shutil.workspace This workspace will delete itself on teardown
2021-01-17 13:27:54,937 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:54,937 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:54,937 DEBUG pytest_server_fixtures.serverclass.thread Launching thread server.
2021-01-17 13:27:54,951 DEBUG pytest_server_fixtures.serverclass.thread Running server: mongod --bind_ip=127.250.227.95 --port=27754 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwk6cftqm
2021-01-17 13:27:54,952 DEBUG pytest_server_fixtures.serverclass.thread CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
2021-01-17 13:27:54,952 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (1 of 28)
2021-01-17 13:27:54,953 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:27754
2021-01-17 13:27:55,557 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (2 of 28)
2021-01-17 13:27:55,558 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:27754
2021-01-17 13:27:56,161 DEBUG pytest_server_fixtures.base2 sleeping for 0.1 before retrying (3 of 28)
2021-01-17 13:27:56,161 INFO pytest_server_fixtures.mongo Connecting to Mongo at 127.250.227.95:27754
2021-01-17 13:27:56,174 DEBUG pytest_server_fixtures.base2 waited 0:00:01.221754 for server to start successfully
2021-01-17 13:27:56,174 DEBUG pytest_server_fixtures.base2 Server now awake
2021-01-17 13:27:56,175 INFO arctic.fixtures.arctic arctic.fixtures: arctic init()
------------------------------ Captured log setup ------------------------------
DEBUG    pytest_shutil.workspace:workspace.py:52 
DEBUG    pytest_shutil.workspace:workspace.py:53 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:56 pytest_shutil created workspace /tmp/tmpwk6cftqm
DEBUG    pytest_shutil.workspace:workspace.py:64 This workspace will delete itself on teardown
DEBUG    pytest_shutil.workspace:workspace.py:65 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:66 
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:77 Launching thread server.
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:89 Running server: mongod --bind_ip=127.250.227.95 --port=27754 --nounixsocket --syncdelay=0 --nojournal --quiet --dbpath=/tmp/tmpwk6cftqm
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:90 CWD: /home/cwm/git/bb.FLXSA/quant/arctic_878
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (1 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:27754
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (2 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:27754
DEBUG    pytest_server_fixtures.base2:base2.py:226 sleeping for 0.1 before retrying (3 of 28)
INFO     pytest_server_fixtures.mongo:mongo.py:128 Connecting to Mongo at 127.250.227.95:27754
DEBUG    pytest_server_fixtures.base2:base2.py:229 waited 0:00:01.221754 for server to start successfully
DEBUG    pytest_server_fixtures.base2:base2.py:69 Server now awake
INFO     arctic.fixtures.arctic:arctic.py:23 arctic.fixtures: arctic init()
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:27:56,600 DEBUG arctic.tickstore.tickstore 3 buckets in 0.001039: approx 2887 ticks/sec
2021-01-17 13:27:56,600 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-17 13:27:56,604 INFO arctic.tickstore.tickstore Got data in 0.00389 secs, creating DataFrame...
2021-01-17 13:27:56,605 INFO arctic.tickstore.tickstore 2 rows in 0.005176 secs: 386 ticks/sec
2021-01-17 13:27:56,607 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-17 13:27:56,610 INFO arctic.tickstore.tickstore Got data in 0.004164 secs, creating DataFrame...
2021-01-17 13:27:56,611 INFO arctic.tickstore.tickstore 2 rows in 0.005279 secs: 378 ticks/sec
2021-01-17 13:27:56,615 INFO arctic.tickstore.tickstore No end provided.  Loading a month for: SYM:None
2021-01-17 13:27:56,618 INFO arctic.tickstore.tickstore Got data in 0.004969 secs, creating DataFrame...
2021-01-17 13:27:56,619 INFO arctic.tickstore.tickstore 1 rows in 0.006108 secs: 163 ticks/sec
------------------------------ Captured log call -------------------------------
DEBUG    arctic.tickstore.tickstore:tickstore.py:612 3 buckets in 0.001039: approx 2887 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.00389 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 2 rows in 0.005176 secs: 386 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004164 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 2 rows in 0.005279 secs: 378 ticks/sec
INFO     arctic.tickstore.tickstore:tickstore.py:232 No end provided.  Loading a month for: SYM:None
INFO     arctic.tickstore.tickstore:tickstore.py:355 Got data in 0.004969 secs, creating DataFrame...
INFO     arctic.tickstore.tickstore:tickstore.py:364 1 rows in 0.006108 secs: 163 ticks/sec
--------------------------- Captured stderr teardown ---------------------------
2021-01-17 13:27:56,668 DEBUG pytest_server_fixtures.serverclass.thread Killing process tree for 11487 (total_procs_to_kill=1)
2021-01-17 13:27:56,668 DEBUG pytest_server_fixtures.serverclass.thread Killing 1 processes with signal Signals.SIGKILL
2021-01-17 13:27:56,669 DEBUG pytest_server_fixtures.serverclass.thread Waiting for 1 processes to die
2021-01-17 13:27:56,676 DEBUG pytest_server_fixtures.serverclass.thread All processes are terminated
2021-01-17 13:27:56,677 DEBUG pytest_shutil.workspace 
2021-01-17 13:27:56,677 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:56,677 DEBUG pytest_shutil.workspace pytest_shutil deleting workspace /tmp/tmpwk6cftqm
2021-01-17 13:27:56,677 DEBUG pytest_shutil.workspace =======================================================
2021-01-17 13:27:56,677 DEBUG pytest_shutil.workspace 
---------------------------- Captured log teardown -----------------------------
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:54 Killing process tree for 11487 (total_procs_to_kill=1)
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:35 Killing 1 processes with signal Signals.SIGKILL
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:39 Waiting for 1 processes to die
DEBUG    pytest_server_fixtures.serverclass.thread:thread.py:43 All processes are terminated
DEBUG    pytest_shutil.workspace:workspace.py:140 
DEBUG    pytest_shutil.workspace:workspace.py:141 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:142 pytest_shutil deleting workspace /tmp/tmpwk6cftqm
DEBUG    pytest_shutil.workspace:workspace.py:143 =======================================================
DEBUG    pytest_shutil.workspace:workspace.py:144
_______________ test_ArcticTransaction_detects_concurrent_writes _______________

    def test_ArcticTransaction_detects_concurrent_writes():
        vs = Mock(spec=VersionStore)
        ts1 = pd.DataFrame(index=[1, 2], data={'a': [1.0, 2.0]})
        vs.read.return_value = VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=1, metadata=None,
                                             data=ts1, host=sentinel.host)
        vs.write.side_effect = [VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=2, metadata=None,
                                              data=None, host=sentinel.host),
                                VersionedItem(symbol=sentinel.symbol, library=sentinel.library, version=3, metadata=None,
                                              data=None, host=sentinel.host)]
        # note that we return some extra version 5, it is possible that we have a write coming in after our own write that gets picked up
        vs.list_versions.side_effect = [[{'version': 5}, {'version': 2}, {'version': 1}, ],
                                       [{'version': 5}, {'version': 3}, {'version': 2}, {'version': 1}, ]]
        from threading import Event, Thread
        e1 = Event()
        e2 = Event()
    
        def losing_writer():
            # will attempt to write version 2, should find that version 2 is there and it ends up writing version 3
            with pytest.raises(ArcticTransaction):
                with ArcticTransaction(vs, sentinel.symbol, sentinel.user, sentinel.log) as cwb:
                    cwb.write(sentinel.symbol, pd.DataFrame([1.0, 2.0], [3, 4]))
                    e1.wait()
    
        def winning_writer():
            # will attempt to write version 2 as well
            with ArcticTransaction(vs, sentinel.symbol, sentinel.user, sentinel.log) as cwb:
                cwb.write(sentinel.symbol, pd.DataFrame([1.0, 2.0], [5, 6]))
                e2.wait()
    
        t1 = Thread(target=losing_writer)
        t2 = Thread(target=winning_writer)
        t1.start()
        t2.start()
    
        # both read the same timeseries and are locked doing some 'work'
        e2.set()
        # t2  should now be able to finish
        t2.join()
        e1.set()
        t1.join()
    
        # we're expecting the losing_writer to undo its write once it realises that it wrote v3 instead of v2
>       vs._delete_version.assert_called_once_with(sentinel.symbol, 3)

tests/unit/store/test_version_store_audit.py:221: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

_mock_self = <Mock name='mock._delete_version' id='140666293242344'>
args = (sentinel.symbol, 3), kwargs = {}
self = <Mock name='mock._delete_version' id='140666293242344'>
msg = "Expected '_delete_version' to be called once. Called 0 times."

    def assert_called_once_with(_mock_self, *args, **kwargs):
        """assert that the mock was called exactly once and that that call was
        with the specified arguments."""
        self = _mock_self
        if not self.call_count == 1:
            msg = ("Expected '%s' to be called once. Called %s times.%s"
                   % (self._mock_name or 'mock',
                      self.call_count,
                      self._calls_repr()))
>           raise AssertionError(msg)
E           AssertionError: Expected '_delete_version' to be called once. Called 0 times.

.tox/dev36/lib/python3.6/site-packages/mock/mock.py:925: AssertionError
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:34:37,467 INFO arctic.store.audit MT: None@None: [sentinel.user] sentinel.log: sentinel.symbol
Exception in thread Thread-774:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.6/threading.py", line 864, in run
    self._target(*self._args, **self._kwargs)
  File "/home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_version_store_audit.py", line 197, in losing_writer
    with pytest.raises(ArcticTransaction):
  File "/home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/lib/python3.6/site-packages/_pytest/python_api.py", line 719, in raises
    raise TypeError(msg.format(not_a))
TypeError: expected exception must be a BaseException type, not ArcticTransaction

------------------------------ Captured log call -------------------------------
INFO     arctic.store.audit:audit.py:87 MT: None@None: [sentinel.user] sentinel.log: sentinel.symbol
_________________________ test_mongo_date_range_query __________________________

    def test_mongo_date_range_query():
        self = create_autospec(TickStore)
        self._collection = create_autospec(Collection)
        self._symbol_query.return_value = {"sy": {"$in" : ["s1" , "s2"]}}
        self._collection.aggregate.return_value = iter([{"_id": "s1", "start": dt(2014, 1, 1, 0, 0, tzinfo=mktz())},
                                                        {"_id": "s2", "start": dt(2014, 1, 1, 12, 0, tzinfo=mktz())}])
    
        self._collection.find_one.side_effect = [
            {'e': dt(2014, 1, 1, 15, 0, tzinfo=mktz())},
            {'e': dt(2014, 1, 2, 12, 0, tzinfo=mktz())}]
    
        query = TickStore._mongo_date_range_query(self, 'sym', DateRange(dt(2014, 1, 2, 0, 0, tzinfo=mktz()),
                                                                         dt(2014, 1, 3, 0, 0, tzinfo=mktz())))
    
        assert self._collection.aggregate.call_args_list == [call([
         {"$match": {"s": {"$lte": dt(2014, 1, 2, 0, 0, tzinfo=mktz())}, "sy": {"$in" : ["s1" , "s2"]}}},
         {"$project": {"_id": 0, "s": 1, "sy": 1}},
         {"$group": {"_id": "$sy", "start": {"$max": "$s"}}},
         {"$sort": {"start": 1}}])]
    
        assert self._collection.find_one.call_args_list == [
            call({'sy': 's1', 's': dt(2014, 1, 1, 0, 0, tzinfo=mktz())}, {'e': 1}),
            call({'sy': 's2', 's': dt(2014, 1, 1, 12, 0, tzinfo=mktz())}, {'e': 1})]
    
>       assert query == {'s': {'$gte': dt(2014, 1, 1, 12, 0, tzinfo=mktz()), '$lte': dt(2014, 1, 3, 0, 0, tzinfo=mktz())}}
E       AssertionError: assert {'s': {'$gte'...ca/Denver'))}} == {'s': {'$gte'...ca/Denver'))}}
E         Differing items:
E         {'s': {'$gte': datetime.datetime(2014, 1, 1, 12, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')), '$lte': datetime.datetime(2014, 1, 3, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver'))}} != {'s': {'$gte': datetime.datetime(2014, 1, 1, 12, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver')), '$lte': datetime.datetime(2014, 1, 3, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver'))}}
E         Full diff:
E           {
E         -  's': {'$gte': datetime.datetime(2014, 1, 1, 12, 0, tzinfo=tzfile('/usr/share/zoneinfo/America/Denver')),
E         ?                                      ...
E         
E         ...Full output truncated (5 lines hidden), use '-vv' to show

tests/unit/tickstore/test_tickstore.py:43: AssertionError
_____________________ test_tickstore_to_bucket_with_image ______________________

    def test_tickstore_to_bucket_with_image():
        symbol = 'SYM'
        tz = 'UTC'
        initial_image = {'index': dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz)), 'A': 123, 'B': 54.4, 'C': 'DESC'}
        data = [{'index': dt(2014, 1, 1, 0, 1, tzinfo=mktz(tz)), 'A': 124, 'D': 0},
                {'index': dt(2014, 1, 1, 0, 2, tzinfo=mktz(tz)), 'A': 125, 'B': 27.2}]
        bucket, final_image = TickStore._to_bucket(data, symbol, initial_image)
        assert bucket[COUNT] == 2
        assert bucket[END] == dt(2014, 1, 1, 0, 2, tzinfo=mktz(tz))
        assert set(bucket[COLUMNS]) == set(('A', 'B', 'D'))
        assert set(bucket[COLUMNS]['A']) == set((ROWMASK, DTYPE, DATA))
        assert get_coldata(bucket[COLUMNS]['A']) == ([124, 125], [1, 1, 0, 0, 0, 0, 0, 0])
        assert get_coldata(bucket[COLUMNS]['B']) == ([27.2], [0, 1, 0, 0, 0, 0, 0, 0])
        assert get_coldata(bucket[COLUMNS]['D']) == ([0], [1, 0, 0, 0, 0, 0, 0, 0])
        index = [dt.fromtimestamp(int(i/1000)).replace(tzinfo=mktz(tz)) for i in
                 list(np.cumsum(np.frombuffer(decompress(bucket[INDEX]), dtype='uint64')))]
>       assert index == [i['index'] for i in data]
E       AssertionError: assert [datetime.dat...neinfo/UTC'))] == [datetime.dat...neinfo/UTC'))]
E         At index 0 diff: datetime.datetime(2013, 12, 31, 17, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC')) != datetime.datetime(2014, 1, 1, 0, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC'))
E         Full diff:
E           [
E         -  datetime.datetime(2014, 1, 1, 0, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC')),
E         ?                       ^       ------
E         +  datetime.datetime(2013, 12, 31, 17, 1, tzinfo=tzfile('/usr/share/zoneinfo/UTC')),
E         ?                       ^  +++++   ++++...
E         
E         ...Full output truncated (6 lines hidden), use '-vv' to show

tests/unit/tickstore/test_tickstore.py:97: AssertionError
____________________ test_tickstore_pandas_to_bucket_image _____________________

    def test_tickstore_pandas_to_bucket_image():
        symbol = 'SYM'
        tz = 'UTC'
        initial_image = {'index': dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz)), 'A': 123, 'B': 54.4, 'C': 'DESC'}
        data = [{'A': 120, 'D': 1}, {'A': 122, 'B': 2.0}, {'A': 3, 'B': 3.0, 'D': 1}]
        tick_index = [dt(2014, 1, 2, 0, 0, tzinfo=mktz(tz)),
                      dt(2014, 1, 3, 0, 0, tzinfo=mktz(tz)),
                      dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz))]
        data = pd.DataFrame(data, index=tick_index)
        bucket, final_image = TickStore._pandas_to_bucket(data, symbol, initial_image)
        assert final_image == {'index': dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz)), 'A': 3, 'B': 3.0, 'C': 'DESC', 'D': 1}
        assert IMAGE_DOC in bucket
        assert bucket[COUNT] == 3
        assert bucket[START] == dt(2014, 1, 1, 0, 0, tzinfo=mktz(tz))
        assert bucket[END] == dt(2014, 1, 4, 0, 0, tzinfo=mktz(tz))
        assert set(bucket[COLUMNS]) == set(('A', 'B', 'D'))
        assert set(bucket[COLUMNS]['A']) == set((ROWMASK, DTYPE, DATA))
        assert get_coldata(bucket[COLUMNS]['A']) == ([120, 122, 3], [1, 1, 1, 0, 0, 0, 0, 0])
        values, rowmask = get_coldata(bucket[COLUMNS]['B'])
        assert np.isnan(values[0]) and values[1:] == [2.0, 3.0]
        assert rowmask == [1, 1, 1, 0, 0, 0, 0, 0]
        values, rowmask = get_coldata(bucket[COLUMNS]['D'])
        assert np.isnan(values[1])
        assert values[0] == 1 and values[2] == 1
        assert rowmask == [1, 1, 1, 0, 0, 0, 0, 0]
        index = [dt.fromtimestamp(int(i/1000)).replace(tzinfo=mktz(tz)) for i in
                 list(np.cumsum(np.frombuffer(decompress(bucket[INDEX]), dtype='uint64')))]
>       assert index == tick_index
E       AssertionError: assert [datetime.dat...neinfo/UTC'))] == [datetime.dat...neinfo/UTC'))]
E         At index 0 diff: datetime.datetime(2014, 1, 1, 17, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')) != datetime.datetime(2014, 1, 2, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC'))
E         Full diff:
E           [
E         +  datetime.datetime(2014, 1, 1, 17, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')),
E         -  datetime.datetime(2014, 1, 2, 0, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')),
E         ?                                  ---
E         +  datetime.datetime(2014, 1, 2, 17, 0, tzinfo=tzfile('/usr/share/zoneinfo/UTC')),...
E         
E         ...Full output truncated (8 lines hidden), use '-vv' to show

tests/unit/tickstore/test_tickstore.py:162: AssertionError
----------------------------- Captured stderr call -----------------------------
2021-01-17 13:34:38,711 WARNING arctic.tickstore.tickstore NB treating all values as 'exists' - no longer sparse
------------------------------ Captured log call -------------------------------
WARNING  arctic.tickstore.tickstore:tickstore.py:706 NB treating all values as 'exists' - no longer sparse
=============================== warnings summary ===============================
tests/integration/test_arctic.py: 4 warnings
tests/integration/test_concurrent_append.py: 1 warning
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 45 warnings
tests/integration/scripts/test_copy_data.py: 23 warnings
tests/integration/store/test_bitemporal_store.py: 43 warnings
tests/integration/store/test_ndarray_store.py: 37 warnings
tests/integration/store/test_ndarray_store_append.py: 69 warnings
tests/integration/store/test_pandas_store.py: 378 warnings
tests/integration/store/test_version_store.py: 653 warnings
tests/integration/store/test_version_store_audit.py: 29 warnings
tests/integration/store/test_version_store_corruption.py: 14 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:600: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    sha.update(item.tostring())

tests/integration/test_arctic.py: 3 warnings
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 42 warnings
tests/integration/scripts/test_copy_data.py: 21 warnings
tests/integration/store/test_bitemporal_store.py: 29 warnings
tests/integration/store/test_ndarray_store.py: 828 warnings
tests/integration/store/test_ndarray_store_append.py: 314 warnings
tests/integration/store/test_pandas_store.py: 285 warnings
tests/integration/store/test_version_store.py: 573 warnings
tests/integration/store/test_version_store_audit.py: 21 warnings
tests/integration/store/test_version_store_corruption.py: 18 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:657: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    chunks = [(item[i * rows_per_chunk: (i + 1) * rows_per_chunk]).tostring() for i in idxs]

tests/integration/test_arctic.py: 3 warnings
tests/integration/test_howtos.py: 3 warnings
tests/integration/scripts/test_arctic_fsck.py: 42 warnings
tests/integration/scripts/test_copy_data.py: 21 warnings
tests/integration/store/test_bitemporal_store.py: 29 warnings
tests/integration/store/test_pandas_store.py: 39 warnings
tests/integration/store/test_version_store.py: 1979 warnings
tests/integration/store/test_version_store_audit.py: 21 warnings
tests/integration/store/test_version_store_corruption.py: 138 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_pandas_ndarray_store.py:62: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    return Binary(compress(index.tostring()))

tests/integration/test_arctic.py: 5 warnings
tests/integration/scripts/test_delete_library.py: 5 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/_cache.py:120: DeprecationWarning: update is deprecated. Use replace_one, update_one or update_many instead.
    {"$pull": {"data": item}}

tests/integration/test_arctic.py::test_list_libraries_cached
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/test_arctic.py:250: DeprecationWarning: remove is deprecated. Use delete_one or delete_many instead.
    arctic._conn.meta_db.cache.remove({})

tests/integration/chunkstore/test_chunkstore.py: 9982 warnings
tests/integration/chunkstore/test_fixes.py: 107 warnings
tests/integration/chunkstore/test_utils.py: 2 warnings
tests/integration/chunkstore/tools/test_tools.py: 52 warnings
tests/unit/serialization/test_numpy_arrays.py: 26 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/numpy_arrays.py:119: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    arrays.append(arr.tostring())

tests/integration/store/test_ndarray_store.py: 3 warnings
tests/integration/store/test_ndarray_store_append.py: 583 warnings
tests/integration/store/test_pandas_store.py: 21 warnings
tests/integration/store/test_version_store.py: 1546 warnings
tests/integration/store/test_version_store_corruption.py: 124 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/store/_ndarray_store.py:449: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    data = item.tostring()

tests/integration/store/test_pandas_store.py::test_save_read_pandas_empty_series_with_datetime_multiindex_with_timezone
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/integration/store/test_pandas_store.py:155: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    df = Series(data=[], index=empty_index)

tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
tests/integration/store/test_pandas_store.py::test_duplicate_labels
  /home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/lib/python3.6/site-packages/numpy/core/numeric.py:2378: DeprecationWarning: elementwise comparison failed; this will raise an error in the future.
    return bool(asarray(a1 == a2).all())

tests/integration/tickstore/test_toplevel.py: 44 warnings
tests/integration/tickstore/test_ts_read.py: 5 warnings
tests/integration/tickstore/test_ts_write.py: 2 warnings
tests/unit/tickstore/test_tickstore.py: 1 warning
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:707: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rowmask = Binary(lz4_compressHC(np.packbits(np.ones(len(df), dtype='uint8')).tostring()))

tests/integration/tickstore/test_toplevel.py: 176 warnings
tests/integration/tickstore/test_ts_read.py: 6 warnings
tests/integration/tickstore/test_ts_write.py: 6 warnings
tests/unit/tickstore/test_tickstore.py: 3 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:718: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    DATA: Binary(lz4_compressHC(array.tostring())),

tests/integration/tickstore/test_toplevel.py: 44 warnings
tests/integration/tickstore/test_ts_read.py: 4 warnings
tests/integration/tickstore/test_ts_write.py: 2 warnings
tests/unit/tickstore/test_tickstore.py: 1 warning
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:727: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    recs[index_name].astype('datetime64[ms]').view('uint64')))).tostring()))

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 12 warnings
tests/integration/tickstore/test_ts_read.py: 136 warnings
tests/integration/tickstore/test_ts_write.py: 18 warnings
tests/unit/tickstore/test_tickstore.py: 8 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:758: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    for k, v in iteritems(rowmask)])

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 12 warnings
tests/integration/tickstore/test_ts_read.py: 136 warnings
tests/integration/tickstore/test_ts_write.py: 18 warnings
tests/unit/tickstore/test_tickstore.py: 8 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:763: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rtn[COLUMNS][k] = {DATA: Binary(lz4_compressHC(v.tostring())),

tests/integration/tickstore/test_toplevel.py: 4 warnings
tests/integration/tickstore/test_ts_delete.py: 6 warnings
tests/integration/tickstore/test_ts_read.py: 38 warnings
tests/integration/tickstore/test_ts_write.py: 7 warnings
tests/unit/tickstore/test_tickstore.py: 2 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/tickstore/tickstore.py:776: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    rtn[INDEX] = Binary(lz4_compressHC(np.concatenate(([data['index'][0]], np.diff(data['index']))).tostring()))

tests/unit/chunkstore/test_passthrough_chunker.py::test_pass_thru
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/chunkstore/passthrough_chunker.py:75: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    return Series()

tests/unit/chunkstore/test_passthrough_chunker.py::test_pass_thru
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/chunkstore/test_passthrough_chunker.py:18: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    assert(p.exclude(Series([1, 2, 3]), None).equals(Series()))

tests/unit/serialization/test_incremental.py: 41846 warnings
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/incremental.py:223: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    chunk = chunk.tostring() if chunk is not None and get_bytes else chunk

tests/unit/serialization/test_numpy_arrays.py::test_string_cols_with_nans
tests/unit/serialization/test_numpy_arrays.py::test_objify_with_missing_columns
  /home/cwm/git/bb.FLXSA/quant/arctic_878/arctic/serialization/numpy_arrays.py:118: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.
    masks[str(c)] = Binary(compress(mask.tostring()))

tests/unit/store/test_pickle_store.py::test_unpickle_highest_protocol
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_pickle_store.py:121: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    'blob': compressHC(cPickle.dumps(pd.Series(), protocol=cPickle.HIGHEST_PROTOCOL)),

tests/unit/store/test_pickle_store.py::test_unpickle_highest_protocol
  /home/cwm/git/bb.FLXSA/quant/arctic_878/tests/unit/store/test_pickle_store.py:127: DeprecationWarning: The default dtype for empty Series will be 'object' instead of 'float64' in a future version. Specify a dtype explicitly to silence this warning.
    expected = pd.Series()

-- Docs: https://docs.pytest.org/en/stable/warnings.html
---- generated xml file: /home/cwm/git/bb.FLXSA/quant/arctic_878/junit.xml -----

---------- coverage: platform linux, python 3.6.12-final-0 -----------
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED tests/integration/test_arctic.py::test_indexes - AssertionError: asser...
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data6-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data7-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data8-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data9-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data10-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_chunks[False-data11-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data6-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data7-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data8-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data9-FwPointersCfg.DISABLED]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data10-FwPointersCfg.HYBRID]
FAILED tests/integration/scripts/test_arctic_fsck.py::test_cleanup_orphaned_snapshots[False-data11-FwPointersCfg.ENABLED]
FAILED tests/integration/scripts/test_prune_versions.py::test_fix_broken_snapshot_references
FAILED tests/integration/scripts/test_prune_versions.py::test_keep_only_one_version
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_falls_in_a_single_underlying_library
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries
FAILED tests/integration/tickstore/test_toplevel.py::test_should_return_data_when_date_range_spans_libraries_even_if_one_returns_nothing
FAILED tests/integration/tickstore/test_toplevel.py::test_should_add_underlying_library_where_another_library_exists_in_a_non_overlapping_daterange
FAILED tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_list_of_dicts
FAILED tests/integration/tickstore/test_toplevel.py::test_should_write_top_level_with_correct_timezone
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range[tickstore]
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range_end_not_in_range[tickstore]
FAILED tests/integration/tickstore/test_ts_read.py::test_date_range_no_bounds[tickstore]
FAILED tests/unit/store/test_version_store_audit.py::test_ArcticTransaction_detects_concurrent_writes
FAILED tests/unit/tickstore/test_tickstore.py::test_mongo_date_range_query - ...
FAILED tests/unit/tickstore/test_tickstore.py::test_tickstore_to_bucket_with_image
FAILED tests/unit/tickstore/test_tickstore.py::test_tickstore_pandas_to_bucket_image
= 28 failed, 1288 passed, 3 skipped, 19 xfailed, 1 xpassed, 60732 warnings in 2611.78s (0:43:31) =
ERROR: InvocationError for command /home/cwm/git/bb.FLXSA/quant/arctic_878/.tox/dev36/bin/python setup.py test --pytest-args=-v (exited with code 1)

commands failed

